<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="562" Id="FS0302002A" Left="8" OnLoadCompleted="fn_OnLoadCompleted" OnUnloadCompleted="fn_OnUnloadCompleted" PidAttrib="7" Title="시행예산&#32;등록/변경" Top="8" Ver="1.0" Width="978" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_error">
				<Contents>
					<colinfo id="IDX" size="256" type="STRING"/>
					<colinfo id="ERRMSG" size="256" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_cond">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="OCNT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="EBDG_MGSQ" size="10" summ="default" type="INT"/>
					<colinfo id="RE_EBDG_MGSQ" size="10" summ="default" type="INT"/>
					<record>
						<EBDG_MGSQ/>
						<MANDT></MANDT>
						<OCNT_NUMB></OCNT_NUMB>
						<RE_EBDG_MGSQ/>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0301">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="OCNT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="EBDG_MGSQ" size="10" summ="default" type="INT"/>
					<colinfo id="ESMT_TAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="SLCS_RATE" size="9" summ="default" type="DECIMAL"/>
					<colinfo id="WAERK" size="5" summ="default" type="STRING"/>
					<colinfo id="PBDG_TAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="SALE_COST" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="CEBD_TAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="EBDG_TAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="MNGR" size="20" summ="default" type="STRING"/>
					<colinfo id="EBDG_MGST" size="10" summ="default" type="STRING"/>
					<colinfo id="EBDG_MGST_NAME" size="10" summ="default" type="STRING"/>
					<colinfo id="AFIL_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="WRIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="WRIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="WRIT_USER" size="12" summ="default" type="STRING"/>
					<colinfo id="MODI_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="MODI_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="MODI_USER" size="12" summ="default" type="STRING"/>
					<colinfo id="ADIT" size="20" summ="default" type="STRING"/>
					<colinfo id="APPR" size="256" summ="default" type="STRING"/>
					<colinfo id="APPR_STAT" size="20" summ="default" type="STRING"/>
					<colinfo id="APPR_STAT_NAME" size="20" summ="default" type="STRING"/>
					<colinfo id="BSTNK" size="256" summ="default" type="STRING"/>
					<colinfo id="KUNNR_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="ORDR_TYPE_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="PSPID" size="24" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0302_list" OnColumnChanged="ds_zfst0302_list_OnColumnChanged">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="OCNT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="EBDG_MGSQ" size="10" summ="default" type="INT"/>
					<colinfo id="EBDG_ITSQ" size="10" summ="default" type="INT"/>
					<colinfo id="EBDG_GROP" size="10" summ="default" type="STRING"/>
					<colinfo id="ESCS_UPBG" size="10" summ="default" type="STRING"/>
					<colinfo id="BDGT_ITEM" size="9" summ="default" type="STRING"/>
					<colinfo id="NAME1" size="100" summ="default" type="STRING"/>
					<colinfo id="NAME2" size="100" summ="default" type="STRING"/>
					<colinfo id="NAME3" size="100" summ="default" type="STRING"/>
					<colinfo id="NAME4" size="100" summ="default" type="STRING"/>
					<colinfo id="EBDG_NAME" size="100" summ="default" type="STRING"/>
					<colinfo id="WAERK" size="5" summ="default" type="STRING"/>
					<colinfo id="ESMT_AMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="BFOR_BAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="CEBD_AMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="EBDG_AMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="SPEN_AMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="SLCS_RATE" size="9" summ="default" type="DECIMAL"/>
					<colinfo id="NOTE" size="4000" summ="default" type="STRING"/>
					<colinfo id="ORDR_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="ORIT_SEQN" size="5" summ="default" type="INT"/>
					<colinfo id="WRIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="WRIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="WRIT_USER" size="12" summ="default" type="STRING"/>
					<colinfo id="LEVEL" size="256" summ="default" type="STRING"/>
					<colinfo id="FLAG" size="256" summ="default" type="STRING"/>
					<colinfo id="DATA_DIV" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0303">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="OCNT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="EBDG_MGSQ" size="10" summ="default" type="INT"/>
					<colinfo id="CHHS_SEQN" size="10" summ="default" type="INT"/>
					<colinfo id="CHNG_TAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="WAERK" size="5" summ="default" type="STRING"/>
					<colinfo id="RSON_CHNG" size="1000" summ="default" type="STRING"/>
					<colinfo id="WRIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="WRIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="WRIT_USER" size="12" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_doc_appr">
				<Contents>
					<colinfo id="MANDT" size="256" summ="default" type="STRING"/>
					<colinfo id="ADOC_CLAS" size="256" summ="default" type="STRING"/>
					<colinfo id="ADOC_NUMB" size="256" summ="default" type="STRING"/>
					<colinfo id="ADOC_NTIM" size="256" summ="default" type="STRING"/>
					<colinfo id="APPR_STAT" size="256" summ="default" type="STRING"/>
					<record>
						<ADOC_CLAS></ADOC_CLAS>
						<ADOC_NTIM></ADOC_NTIM>
						<ADOC_NUMB></ADOC_NUMB>
						<APPR_STAT></APPR_STAT>
						<MANDT></MANDT>
					</record>
				</Contents>
			</Dataset>
		</Datasets>
		<Shape BKColor="user0" Bottom="30" Height="30" Id="Shape2" Left="0" LineColor="user1" Right="978" TabOrder="1" Top="0" Type="Rectangle" Width="978"></Shape>
		<Shape BKColor="user0" Bottom="108" Height="56" Id="Shape0" Left="0" LineColor="user1" Right="978" TabOrder="2" Top="52" Type="Rectangle" Width="978"></Shape>
		<Static Align="Right" Height="20" Id="Static1" Left="8" Style="sty_lb_search" TabOrder="4" Text="수주번호" Top="5" VAlign="Middle" Width="56"></Static>
		<Edit Align="CENTER" BindDataset="ds_cond" Border="Flat" BorderColor="user1" Column="OCNT_NUMB" Height="20" Id="ed_ocntNumb" Left="64" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="3" Top="5" UpperOnly="TRUE" Width="107"></Edit>
		<Button Cursor="HAND" Height="18" Id="btn_ocntNumb" ImageID="btn_icon_search" Left="171" OnClick="btn_budget_num_OnClick" TabOrder="5" Top="6" Transparent="TRUE" Width="18"></Button>
		<Static Color="user6" Font="굴림,9,Bold" Height="20" Id="Static19" Left="15" TabOrder="7" Text="사업정보" Top="32" VAlign="Middle" Width="102"></Static>
		<Image Height="20" Id="Image0" ImageID="form_bl_title_sub" Left="2" TabOrder="6" Top="30" Width="11"></Image>
		<Grid AutoEnter="TRUE" AutoFitEndLine="Hide" BindDataset="ds_zfst0302_list" BkColor2="default" BoldHead="true" Border="Flat" Bottom="544" ColSizing="TRUE" Editable="TRUE" Enable="true" EndLineColor="default" HeadBorder="Flat" HeadHeight="25" Height="400" HScrollCell="TRUE" Id="grd_zfst0302" InputPanel="FALSE" Left="8" LineColor="user20" LineType="ExHORZ" Right="968" RowHeight="20" Style="sty_grid" TabOrder="8" TabStop="true" Top="144" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="true" VLineColor="default" WheelScrollRow="1" Width="960">
			<contents>
				<format id="Default">
					<columns>
						<col width="0"/>
						<col width="0"/>
						<col width="78"/>
						<col width="87"/>
						<col width="82"/>
						<col width="145"/>
						<col width="141"/>
						<col width="121"/>
						<col width="140"/>
						<col width="144"/>
						<col width="346"/>
					</columns>
					<head>
						<cell col="0" display="text"/>
						<cell align="center" col="1" color="user21" display="text" font="굴림,9" text="항목레벨" wordwrap="word"/>
						<cell align="center" col="2" color="user21" display="text" font="굴림,9" text="항목구분" wordwrap="word"/>
						<cell align="center" col="3" color="user21" display="text" font="굴림,9" text="항목1" wordwrap="word"/>
						<cell align="center" col="4" color="user21" display="text" font="굴림,9" text="항목2" wordwrap="word"/>
						<cell align="center" col="5" color="user21" display="text" font="굴림,9" text="항목3" wordwrap="word"/>
						<cell align="center" col="6" color="user21" display="text" font="굴림,9" text="변경전&#32;시행예산"/>
						<cell align="center" col="7" color="user21" display="text" font="굴림,9" text="변동금액"/>
						<cell align="center" col="8" color="user21" display="text" font="굴림,9" text="시행예산"/>
						<cell align="center" col="9" color="user21" display="text" font="굴림,9" text="지출금액"/>
						<cell align="center" col="10" color="user21" display="text" font="굴림,9" text="비고" wordwrap="word"/>
					</head>
					<body>
						<cell align="center" bkcolor2="user22" col="0" display="text" edit="normal"/>
						<cell align="center" bkcolor2="user22" col="1" colid="LEVEL" display="text"/>
						<cell align="left" bkcolor2="user22" col="2" colid="NAME1" display="normal"/>
						<cell align="left" bkcolor2="user22" col="3" colid="NAME2" display="normal"/>
						<cell align="left" bkcolor2="user22" col="4" colid="NAME3" display="normal"/>
						<cell align="left" bkcolor2="user22" col="5" colid="NAME4" display="normal"/>
						<cell align="right" col="6" colid="BFOR_BAMT" display="number" edit="expr:iif(EBDG_MGSQ==1,&#32;&apos;number&apos;,&#32;&apos;none&apos;)" Valign="Center"/>
						<cell align="right" col="7" colid="CEBD_AMT" display="number" edit="number" Valign="Center"/>
						<cell align="right" col="8" colid="EBDG_AMT" display="number" Valign="Center"/>
						<cell align="right" col="9" colid="SPEN_AMT" display="number" Valign="Center"/>
						<cell align="left" bkcolor2="user22" col="10" colid="NOTE" display="normal" edit="normal" limit="500"/>
					</body>
					<summary>
						<cell col="0" display="text"/>
						<cell col="1" display="text"/>
						<cell bkcolor="user25" col="2" color="user26" colspan="4" display="text">
							<cell col="0" display="text"/>
							<cell col="1" display="text"/>
							<cell col="2" display="text"/>
							<cell col="3" display="text"/>
						</cell>
						<cell align="right" bkcolor="user25" col="6" color="user26" display="number" expr='ds_zfst0302_list.Sum(&quot;BFOR_BAMT&quot;)'/>
						<cell align="right" bkcolor="user25" col="7" color="user26" display="number" expr='ds_zfst0302_list.Sum(&quot;CEBD_AMT&quot;)'/>
						<cell align="right" bkcolor="user25" col="8" color="user26" display="number" expr='ds_zfst0302_list.Sum(&quot;EBDG_AMT&quot;)'/>
						<cell align="right" bkcolor="user25" col="9" color="user26" display="number" expr='ds_zfst0302_list.Sum(&quot;SPEN_AMT&quot;)'/>
						<cell bkcolor="user25" col="10" color="user26" display="text">
							<cell col="0" display="text"/>
							<cell col="1" display="text"/>
							<cell col="2" display="text"/>
							<cell col="3" display="text"/>
						</cell>
					</summary>
				</format>
			</contents>
		</Grid>
		<Image Height="20" Id="Image1" ImageID="form_bl_title_sub" Left="2" TabOrder="9" Top="118" Width="11"></Image>
		<Static Color="user6" Font="굴림,9,Bold" Height="20" Id="Static4" Left="15" TabOrder="10" Text="기준항목별&#32;시행예산" Top="120" VAlign="Middle" Width="158"></Static>
		<Static Align="Right" Height="20" Id="Static0" Left="444" Style="sty_lb_search" TabOrder="11" Text="진행상태" Top="5" VAlign="Middle" Width="60"></Static>
		<Edit BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="EBDG_MGST_NAME" Height="20" Id="Edit4" Left="504" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="12" Top="5" UpperOnly="TRUE" Width="131"></Edit>
		<Static Align="Right" Height="20" Id="Static2" Left="640" Style="sty_lb_search" TabOrder="13" Text="결재상태" Top="5" VAlign="Middle" Width="60"></Static>
		<Edit BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="APPR_STAT_NAME" Height="20" Id="Edit5" Left="700" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="14" Top="5" UpperOnly="TRUE" Width="123"></Edit>
		<Static Align="Right" Height="20" Id="Static11" Left="636" Style="sty_lb_search" TabOrder="15" Text="오더유형" Top="56" VAlign="Middle" Width="56"></Static>
		<Edit BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="KUNNR_NAME" Height="20" Id="ed_qtnum" Left="408" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="16" Top="56" UpperOnly="TRUE" Width="219"></Edit>
		<Static Align="Right" Height="20" Id="Static6" Left="356" Style="sty_lb_search" TabOrder="17" Text="고객명" Top="56" VAlign="Middle" Width="52"></Static>
		<Static Align="Right" Height="20" Id="Static5" Left="8" Style="sty_lb_search" TabOrder="18" Text="프로젝트명" Top="56" VAlign="Middle" Width="68"></Static>
		<Edit BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="BSTNK" Height="20" Id="Edit6" Left="76" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="19" Top="56" UpperOnly="TRUE" Width="275"></Edit>
		<Edit BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="ORDR_TYPE_NAME" Height="20" Id="Edit7" Left="692" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="20" Top="56" UpperOnly="TRUE" Width="115"></Edit>
		<Static Align="Right" Height="20" Id="Static7" Left="8" Style="sty_lb_search" TabOrder="21" Text="수주금액(A)" Top="82" VAlign="Middle" Width="76"></Static>
		<Static Align="Right" Height="20" Id="Static9" Left="472" Style="sty_lb_search" TabOrder="22" Text="변경전&#32;시행예산" Top="82" VAlign="Middle" Width="92"></Static>
		<Static Align="Right" Height="20" Id="Static10" Left="356" Style="sty_lb_search" TabOrder="23" Text="시행율(B/A)" Top="82" VAlign="Middle" Width="68"></Static>
		<Edit Align="CENTER" BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="SLCS_RATE" Height="20" Id="ed_slcsRate" Left="425" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="24" Top="82" UpperOnly="TRUE" Width="43"></Edit>
		<Edit Align="CENTER" BindDataset="ds_cond" Border="Flat" BorderColor="user1" Column="EBDG_MGSQ" Height="20" Id="ed_ebdgMgsq" Left="244" MaxLength="10" Number="TRUE" OnChanged="ed_ebdgMgsq_OnChanged" Style="sty_btn" TabOrder="25" Top="5" UpperOnly="TRUE" Width="27"></Edit>
		<Static Align="Right" Height="20" Id="Static15" Left="192" Style="sty_lb_search" TabOrder="26" Text="예산차수" Top="5" VAlign="Middle" Width="52"></Static>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_basicCode" ImageID="btn_sub_04" Left="902" LeftMargin="12" OnClick="btn_basic_info_OnClick" Style="sty_btn" TabOrder="26" Text="기준정보" Top="5" Transparent="TRUE" Width="76"></Button>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_changeReson" ImageID="btn_sub_04" Left="901" LeftMargin="12" OnClick="btn_reason_OnClick" Style="sty_btn" TabOrder="27" Text="변경사유" Top="56" Transparent="TRUE" Width="73"></Button>
		<Button Cursor="HAND" Height="20" Id="btn_rowDel1" ImageID="btn_icon_minus" Left="945" LeftMargin="12" OnClick="btn_rowDel1_OnClick" Style="sty_btn" TabOrder="28" Top="120" Transparent="TRUE" Width="22"></Button>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_mngrReg" ImageID="btn_sub_05" Left="815" LeftMargin="12" OnClick="btn_person_OnClick" Style="sty_btn" TabOrder="30" Text="담당자등록" Top="56" Transparent="TRUE" Width="89"></Button>
		<Static Align="Right" Height="20" Id="Static8" Left="666" Style="sty_lb_search" TabOrder="31" Text="변동금액" Top="82" VAlign="Middle" Width="52"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="ESMT_TAMT" Height="20" Id="ed_esmtTamt" Left="83" MaxLength="10" Style="sty_ipt_form_ind" TabOrder="32" Top="82" Width="99"></MaskEdit>
		<MaskEdit Align="Right" BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="PBDG_TAMT" Height="20" Id="ed_ebdgTamt" Left="564" MaxLength="10" Style="sty_ipt_form_ind" TabOrder="33" Top="82" Width="99"></MaskEdit>
		<MaskEdit Align="Right" BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="CEBD_TAMT" Height="20" Id="ed_cebdTamt" Left="718" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="34" Top="82" Width="99"></MaskEdit>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_itemAdd" ImageID="btn_sub_04" Left="869" LeftMargin="12" OnClick="btn_itemAdd_OnClick" Style="sty_btn" TabOrder="35" Text="항목추가" Top="120" Transparent="TRUE" Width="76"></Button>
		<Static Align="Right" Height="20" Id="Static3" Left="186" Style="sty_lb_search" TabOrder="36" Text="시행예산(B)" Top="82" VAlign="Middle" Width="68"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="EBDG_TAMT" Height="20" Id="ed_ebdgAmt" Left="254" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="37" Top="82" Width="99"></MaskEdit>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_adocInfo" ImageID="btn_sub_04" Left="828" LeftMargin="12" OnClick="btn_adocInfo_OnClick" Style="sty_btn" TabOrder="38" Text="결재정보" Top="5" Transparent="TRUE" Width="76"></Button>
		<Static Align="Right" Height="20" Id="Static12" Left="827" Style="sty_lb_search" TabOrder="39" Text="원가" Top="82" VAlign="Middle" Width="44"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="SALE_COST" Height="20" Id="ed_saleCost" Left="871" MaxLength="10" Style="sty_ipt_form_ind" TabOrder="40" Top="82" Width="99"></MaskEdit>
		<Static Align="Right" Height="20" Id="Static13" Left="279" Style="sty_lb_search" TabOrder="41" Text="프로젝트번호" Top="5" VAlign="Middle" Width="76"></Static>
		<Edit Align="CENTER" BindDataset="ds_zfst0301" Border="Flat" BorderColor="user1" Column="PSPID" Height="20" Id="Edit0" Left="354" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="42" Top="5" UpperOnly="TRUE" Width="83"></Edit>
	</Form>
	<Script><![CDATA[/*
 ******************************************************************************************
 * 기      능   : 사양별 템플릿 특성값 지정
 * 작  성  자   : 박수근
 * 작성  일자   : 20116.11.01
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
#include "LIB::commons.js";           // 공통 스크립트
#include "LIB::fs_common.js";         // 물류서비스 공통 스크립트

//=========================================================================================
// [ PART 1 ]
// Form에서 사용될 전역변수를 선언
// FORM에서 사용되는 전역변수는 대문자로 작성하며, F_XXX 의 형태를 갖도록 한다.
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form Loading / Unloading 시 작업 정의
//=========================================================================================
function fn_OnLoadCompleted(obj) {
    gfn_initForm(true);          // Form 로드 이벤트 맨 첫줄에 기술
    fn_init_form();             // 폼 초기화
}

/********************************************************************************
* 기      능   : form UnloadCompleted
********************************************************************************/
function fn_OnUnloadCompleted(obj) {
    return gfn_isFormUnload(obj);
}

/********************************************************************************
* 기      능   : 폼 초기화
********************************************************************************/
function fn_init_form() {
    // 초기 파라미터로 넘어온 값 처리
    if( FS0302002A.IsExistVar("ocntNumb") ) {
        if( ocntNumb == "" ) {
            ds_cond.SetColumn(0, "OCNT_NUMB", "");
            ds_cond.SetColumn(0, "EBDG_MGSQ", "");
        } else {
            ds_cond.SetColumn(0, "OCNT_NUMB", ocntNumb);
            ds_cond.SetColumn(0, "EBDG_MGSQ", ebdgMgsq);
			fn_query();
        }
    }
}

/********************************************************************************
* 기      능   : 시행예산관리품목 조회
********************************************************************************/
function fn_query() {
    // 기본 수주번호 검색 조건을 체크한다.
    if( ed_ocntNumb.text == '' ) {
        gfn_openMsgWin("수주번호를 입력하십시요", "", "A", "");
        return;
    }

    // 조회 스크립트
    tit_clearActionInfo();
    tit_addSearchActionInfo("fs03:FS0302002A_S1");
    tit_addSearchActionInfo("fs03:FS0302002A_S2");
    tit_addSearchActionInfo("fs03:FS0302002A_S3");
    tit_callService(
                    ""
                   ,""
                   ,"ds_cond=ds_cond"
                   ,"ds_zfst0301=ds_zfst0301 ds_zfst0302_list=ds_zfst0302_list ds_zfst0303=ds_zfst0303"
                   ,""
                   ,"fn_afterQuery"
                   ,"true"
                   ,"true"
                   ,"false"
                   );
}

/********************************************************************************
* 기      능   : 시행예산관리품목 조회 Callback
********************************************************************************/
function fn_afterQuery(errCode, errMsg) {
    if(errCode != "0") {
        gfn_showMsg("CE00001");
    } else {
        gfn_showMsg("CI00002", ds_zfst0301.rowCount() + "");
        
        // 예산차수가 1이 상인 경우 계약금액 변경 못하게 처리
        if( ds_zfst0301.GetColumn(0, "EBDG_MGSQ") > 1 ) {
            ed_esmtTamt.Readonly = true;
        }
        
        // 버튼 권한 관리
        fn_authCtrl();
    }
}

/********************************************************************************
* 기      능   : 시행예산 버튼 및 권한 체크 로직
********************************************************************************/
function fn_authCtrl()
{
    // 팀구분에 따른 원가 내역 조회 처리
	// 문서상태 330: 시행예산 작성중, 340: 시행예산 결재 중: 350: 시행예산 승인 360: 최종완료 OCNT_STAT
	var ebdgMgst = ds_zfst0301.GetColumn(0, "EBDG_MGST");
	// 결재상태
	var apprStat = ds_zfst0301.GetColumn(0, "APPR_STAT");
	// 작성자
	var writUser = ds_zfst0301.GetColumn(0, "WRIT_USER");

    if( G_DPT1 != "CD" ) {
        grd_zfst0302.Editable = false;
    }

    // 최초 버튼 제어
	btn_approval.Enable = false;        // 승인
	btn_draft.Enable = false;           // 기안
	btn_rewrite.Enable = false;         // 재작성
	btn_delete.Enable = false;          // 삭제
	btn_save.Enable = false;            // 저장
	btn_print.Enable = false;           // 출력
	btn_sendback.Enable = false;        // 반송
	btn_mngrReg.Enable = false;         // 담당자 등록
	btn_adocInfo.Enable = false;        // 결재정보
	btn_basicCode.Enable = false;       // 기준정보
	btn_changeReson.Enable = false;     // 변경사유
    btn_itemAdd.Enable = false;         // 항목추가
    btn_rowDel1.Enable = false;         // 삭제

    // 물류서비스 팀인 경우
    if( G_DPT1 == "CD" ) {
        if( ebdgMgst == "320" || ebdgMgst == "330" ) {
            grd_zfst0302.Editable = true;
			btn_draft.Enable = true;           // 기안
			btn_delete.Enable = true;          // 삭제
			btn_save.Enable = true;            // 저장
			btn_print.Enable = true;           // 출력
			btn_mngrReg.Enable = true;         // 담당자 등록
			btn_adocInfo.Enable = true;        // 결재정보
			btn_basicCode.Enable = true;       // 기준정보
			btn_changeReson.Enable = true;     // 변경사유
			btn_itemAdd.Enable = true;         // 항목추가
			btn_rowDel1.Enable = true;         // 삭제
			
			if( ds_zfst0301.GetColumn(0, "EBDG_MGSQ") == 1 ) {
			    btn_delete.Enable = false;          // 삭제
			}
        }

        // 시행예산 반려 상태
        if( ebdgMgst == "320" ) {
            grd_zfst0302.Editable = true;
			// 결재정보
		    btn_adocInfo.Enable = true;        // 결재정보
        }

        // 시행예산 결재 중
        if( ebdgMgst == "340" ) {
			btn_print.Enable = true;           // 출력
			// 문서 상태가 결재 중 일 경우 로그인 사용자가 결재 대상자 인 경우
			var adit = ds_zfst0301.GetColumn(0, "ADIT");
			var appr = ds_zfst0301.GetColumn(0, "APPR");
			var apprStat = ds_zfst0301.GetColumn(0, "APPR_STAT");

			if( G_USER_ID == adit && apprStat == "190" ) {
	            btn_approval.Enable = true;        // 승인
	            btn_sendback.Enable = true;        // 반송
			}

			if( G_USER_ID == appr && apprStat == "290" ) {
	            btn_approval.Enable = true;        // 승인
	            btn_sendback.Enable = true;        // 반송
			}

            // 심사자 정보가 없는 경우 바로 승인 처리
			if( G_USER_ID == appr && adit == "" && apprStat == "190" ) {
	            btn_approval.Enable = true;        // 승인
	            btn_sendback.Enable = true;        // 반송
			}

			// 결재정보
		    btn_adocInfo.Enable = true;        // 결재정보
        }

        // 승인완료 상태
        if( ebdgMgst == "350" ||  ebdgMgst == "360") {
            grd_zfst0302.Editable = false;
	        btn_rewrite.Enable = true;         // 재작성
			btn_print.Enable = true;           // 출력
		    btn_adocInfo.Enable = true;        // 결재정보
        }
        
        // 시행예산 폐기 또는 최종 완료 시 재작성 불가
        if( ebdgMgst == "360" ||  ebdgMgst == "310") {
	        btn_rewrite.Enable = false;         // 재작성
        }
    }
}

/********************************************************************************
* 기      능   : 삭제
********************************************************************************/
function fn_delete() {
    if( ds_zfst0301.GetColumn(0, "EBDG_MGSQ") == 1 ) {
        gfn_openMsgWin("1차 시행예산은 삭제 할 수 없습니다.", "", "A", "");
        return;
    }

    if( gfn_showConfirm("현재 작성 중인 시행예산을 삭제 하시겠습니까?") ) {
		// 단일 삭제 스크립트
		tit_clearActionInfo();
		tit_addSingleActionInfo("fs03:FS0302002A_D1");
		tit_addSingleActionInfo("fs03:FS0302002A_D2");
		tit_addSingleActionInfo("fs03:FS0302002A_D3");
		
		tit_callService(
						""
					   ,""
					   ,"ds_zfst0301=ds_cond ds_zfst0302_list=ds_cond ds_zfst0303=ds_cond"
					   ,""
					   ,""
					   ,"fn_afterDelete"
					   ,"true"
					   ,"true"
					   ,"false"
					   );
    }
}

/********************************************************************************
* 기      능   : 시행예산 삭제 Callback
********************************************************************************/
function fn_afterDelete(errCode, errMsg) {
    if( errCode != "0" ) {
        gfn_showMsg("CE00001");
    } else {
        gfn_showMsg("CI00004");
	    var ebdgMgsq = ds_zfst0301.GetColumn(0, "EBDG_MGSQ");
	    ebdgMgsq = toNumber(ebdgMgsq) - 1;
	    ds_cond.SetColumn(0, "EBDG_MGSQ", ebdgMgsq);
        gfn_openMsgWin("작성 중인 시행예산이 삭제 되었습니다.", "", "A", "");
        fn_query();
    }
}

/********************************************************************************
* 기      능   : 시행예산 저장
********************************************************************************/
function fn_save() {
	if( ds_zfst0301.GetUpdate() || ds_zfst0302_list.GetUpdate() || ds_zfst0303.GetUpdate() ) {
		// 단일 입력 스크립트
		tit_clearActionInfo();
		// 시행예산 마스터 저장
		tit_addSaveActionInfo("fs03:FS0302002A_I1", "fs03:FS0302002A_U1", "", "", "", "", "", "");
	
		// 시행예산 품목 저장
		tit_addSaveActionInfo("fs03:FS0302002A_I2", "fs03:FS0302002A_U2", "fs03:FS0302002A_D2", "", "", "", "", "");
	
		// 시행예산 변경사유 저장
		tit_addSaveActionInfo("fs03:FS0302002A_I3", "fs03:FS0302002A_U3", "", "", "", "", "", "");
		
		tit_callService(
						""
					   ,""
					   ,"ds_zfst0301=ds_zfst0301:A ds_zfst0302_list=ds_zfst0302_list:A ds_zfst0303=ds_zfst0303:A"
					   ,""
					   ,""
					   ,"fn_afterSave"
					   ,"true"
					   ,"true"
					   ,"false"
					   );
	}
}

/********************************************************************************
* 기      능   : 시행예산 저장 Callback
********************************************************************************/
function fn_afterSave(errCode, errMsg) {
    if(errCode != "0") {
        gfn_showMsg("CE00001");
    } else {
        gfn_showMsg("CI00003");
        gfn_openMsgWin("시행예산이 저장 되었습니다.", "", "A", "");
        fn_query();
    }
}

/********************************************************************************
* 기      능   : 기안
********************************************************************************/
function fn_draft() {
    if(fn_validate()) {
        if( ds_zfst0301.GetUpdate() || ds_zfst0302_list.GetUpdate() || ds_zfst0303.GetUpdate() ) {
			gfn_openMsgWin("저장 후 기안 요청을 하십시요.", "", "A", "");
			return false;
		}

		var aDocClas = "OB";
		var aDocNumb = ds_zfst0301.GetColumn(0, "OCNT_NUMB");
		var aDocNtim = ds_zfst0301.GetColumn(0, "EBDG_MGSQ");
		var arg="";
		arg="aDocClas="+aDocClas+" aDocNumb="+aDocNumb+" aDocNtim="+aDocNtim;
		var aRtn = null;
		aRtn = gfn_openPopup("FS_COM0701", true, arg);
		if( length(aRtn) > 0 )  {
		    // 결재승인처리가 완료 되었음
		    // 쿼리를 재조회 한 후 버튼의 대한 퀀한을 재 설정한다.
	        gfn_openMsgWin("기안처리가 완료 되었습니다.", "", "A", "");
		    fn_query();
		}
    }
}

/********************************************************************************
* 기      능   : 기안 시 입력값 체크
********************************************************************************/
function fn_validate()
{
    var isValidate = true;
    // 변동 사유 체크
    if( ds_zfst0301.GetColumn(0, "EBDG_MGSQ") > 1 ) {
        if( ds_zfst0303.GetRowCount() == 0  ) {
			gfn_openMsgWin("변경 사유를 입력 하세요.", "", "A", "");
			return false;
        } else {
			if( ds_zfst0303.GetColumn(0, "RSON_CHNG") == ""  ) {
				gfn_openMsgWin("변경 사유를 입력 하세요.", "", "A", "");
				return false;
			}
        }

		// 변동금액 없이 시행예산을 변경하는 경우
		var chgAmt = 0;
		chgAmt = ds_zfst0302_list.Sum("CEBD_AMT");
		if( chgAmt == 0 ) {
			gfn_openMsgWin("시행예산 변동 금액이 존재하지 않습니다.", "", "A", "");
			return false;
		}
    }
    
    // 입력된 시행예산에 0값인 시행예산이 존재하는 경우
    for(var i=0; i < ds_zfst0302_list.GetRowCount(); i++) {
		if( ds_zfst0302_list.GetColumn(i, "BFOR_BAMT") == 0 ) {
			gfn_openMsgWin("시행예산 변동 금액이 존재하지 않습니다.", "", "A", "");
			return false;
		}
    }

    return isValidate;
}

/********************************************************************************
* 기      능   : 결재정보 팝업을 호출한다.
********************************************************************************/
function btn_adocInfo_OnClick(obj)
{
    var aDocClas = "OB";
    var aDocNumb = ds_zfst0301.GetColumn(0, "OCNT_NUMB");
    var aDocNtim = ds_zfst0301.GetColumn(0, "EBDG_MGSQ");
    var arg="aDocClas="+aDocClas+" aDocNumb="+aDocNumb+" aDocNtim="+aDocNtim;
    var aRtn= null;
    aRtn = gfn_openPopup("FS_COM0702", true, arg);
	if( length(aRtn) > 0 )  {
		// 결재승인처리가 완료 되었음
		// 쿼리를 재조회 한 후 버튼의 대한 퀀한을 재 설정한다.
		gfn_openMsgWin("기안취소가 완료 되었습니다.", "", "A", "");
		fn_query();
	}
}

/********************************************************************************
* 기      능   : 결재승인
********************************************************************************/
function fn_approval()
{
	if( gfn_showConfirm("결재 승인 처리 하시겠습니까?") ) {
        ds_doc_appr.fireevent = false;
		var aDocClas = "OB";
	    ds_doc_appr.SetColumn(0, "ADOC_CLAS", "OB");
	    ds_doc_appr.SetColumn(0, "ADOC_NUMB", ds_zfst0301.GetColumn(0, "OCNT_NUMB"));
	    ds_doc_appr.SetColumn(0, "ADOC_NTIM", ds_zfst0301.GetColumn(0, "EBDG_MGSQ"));
		var adit = ds_zfst0301.GetColumn(0, "ADIT");
		var appr = ds_zfst0301.GetColumn(0, "APPR");
		var apprStat = ds_zfst0301.GetColumn(0, "APPR_STAT");
		if( G_USER_ID == adit ) {
            ds_doc_appr.SetColumn(0, "APPR_STAT", "290");  // 심사완료
		}
		if( G_USER_ID == appr) {
            ds_doc_appr.SetColumn(0, "APPR_STAT", "390");  // 승인완료
		}
	    ds_doc_appr.fireevent = true;

		tit_clearActionInfo();
		tit_addSingleActionInfo("fs01:FS_COM0701_M2");  // 결재 테이블 상태값 처리
		if( G_USER_ID == appr) {
		    tit_addSingleActionInfo("fs01:FS_COM0701_U4");  // 시행예산 문서 상태값 처리
		}

		tit_callService(
						""
					   ,""
					   ,"ds_doc_appr=ds_doc_appr ds_doc_stat=ds_doc_appr"
					   ,""
					   ,""
					   ,"fn_approvalCallback"
					   ,"true"
					   ,"true"
					   ,"false"
					   );
    }
}

/********************************************************************************
* 기      능   : 결재승인
********************************************************************************/
function fn_approvalCallback()
{
    if(ds_error< 0) {
        gfn_showMsg("CE00001");
    } else {
        gfn_openMsgWin("결재 승인처리가 완료 되었습니다.", "", "A", "");
	    fn_query();
    }
}

/********************************************************************************
* 기      능   : 반송
********************************************************************************/
function fn_sendback() {
	var aDocClas = "OB";
	var aDocNumb = ds_zfst0301.GetColumn(0, "OCNT_NUMB");
	var aDocNtim = ds_zfst0301.GetColumn(0, "EBDG_MGSQ");
	var arg="";
	arg="aDocClas="+aDocClas+" aDocNumb="+aDocNumb+" aDocNtim="+aDocNtim;
	var aRtn = null;
    aRtn = gfn_openPopup("FS_COM0703", true, arg);
    if( length(aRtn) > 0 )  {
		// 결재 반송 처리가 완료 되었음
		// 쿼리를 재조회 한 후 버튼의 대한 퀀한을 재 설정한다.
		gfn_openMsgWin("반송 처리 되었습니다.", "", "A", "");
		fn_query();
	}
}

/********************************************************************************
* 기      능   : 재작성
********************************************************************************/
function fn_rewrite() 
{
	// 최종 차수 정보 입력   
	var ebdgMgst = ds_zfst0301.GetColumn(0, "EBDG_MGST");
    if( !(ebdgMgst == "350" || ebdgMgst == "360") ) {
        gfn_openMsgWin("진행상태가 수주승인 시에만 재작성할 수 있습니다.", "", "A", "");
        return;
    }

	if( gfn_showConfirm("재작성 하시겠습니까?") ) {
	    var ebdgMgsq = ds_zfst0301.GetColumn(0, "EBDG_MGSQ");
	    ebdgMgsq = toNumber(ebdgMgsq) + 1;
		ds_cond.SetColumn(0, "RE_EBDG_MGSQ", ebdgMgsq);

		tit_clearActionInfo();
		
		// 시행예산 마스터 데이터 생성
		tit_addSingleActionInfo("fs03:FS0302002A_I1_1");
		
		// 시행예산 품목 데이터 생성
		tit_addSingleActionInfo("fs03:FS0302002A_I2_1");

		tit_callService(
						""
					   ,""
					   ,"ds_cond=ds_cond"
					   ,""
					   ,""
					   ,"fn_afterRewrite"
					   ,"true"
					   ,"true"
					   ,"false"
					   );	
	}
}

/********************************************************************************
* 기      능   : 재작성
********************************************************************************/
function fn_afterRewrite() {
    if(ds_error < 0) {
        gfn_showMsg("CE00001");
    } else {
	    var ebdgMgsq = ds_cond.GetColumn(0, "RE_EBDG_MGSQ");
		ds_cond.SetColumn(0, "EBDG_MGSQ", ebdgMgsq);
        gfn_openMsgWin("시행예산 재작성 처리가 완료 되었습니다.", "", "A", "");
        fn_query();
    }
}

/********************************************************************************
* 기      능   : 닫기
********************************************************************************/
function fn_close() {
    if( ds_zfst0301.GetUpdate() ) {
        if( gfn_showConfirm("저장처리 없이 종료하시겠습니까?") ) {
            close();
        } else {
            return;
        }
    }

    if( ds_zfst0302_list.GetUpdate() ) {
        if( gfn_showConfirm("저장처리 없이 종료하시겠습니까?") ) {
            close();
        } else {
            return;
        }
    }

    if( ds_zfst0303.GetUpdate() ) {
        if( gfn_showConfirm("저장처리 없이 종료하시겠습니까?") ) {
            close();
        } else {
            return;
        }
    }

    close();
}

/********************************************************************************
* 기      능   : 담당자등록 팝업을 호출한다.
********************************************************************************/
function btn_person_OnClick(obj)
{
	var arg = "";
	arg = "adocClas="+quote("OI")+" adocNumb ="+quote(ds_cond.GetColumn(0, "OCNT_NUMB"));
	gfn_openPopup("FS0103001B", true, arg);
}

/********************************************************************************
* 기      능   : 사업년도별 기준정보 팝업을 호출한다.
********************************************************************************/
function btn_basic_info_OnClick(obj)
{
    var year = substr(gfn_getCurrDate(),0,4);
    var arg="bsnsYear="+quote(year);
    gfn_openPopup("FS0102001B", true, arg);
}

/********************************************************************************
* 기      능   : 시행예산 수주번호 조회 팝업 호출
********************************************************************************/
function btn_budget_num_OnClick(obj)
{
    var arg="";
	var arr = null;
    arr = gfn_openPopup("FS0302001C", true, arg);
    if( length(arr) > 0 )  {
		ds_cond.fireevent = false;
		ds_cond.SetColumn(0, "OCNT_NUMB", arr[0]);
		ds_cond.SetColumn(0, "EBDG_MGSQ", arr[1]);
		ds_cond.SetColumn(0, "PSPID", arr[2]);
		ds_cond.fireevent = true;
		fn_query();
    }
}

/********************************************************************************
* 기      능   : 시행예산 품목 삭제
********************************************************************************/
function btn_rowDel1_OnClick(obj)
{
	var nRow = ds_zfst0302_list.currow;
	if( nRow > -1 ) {
	     // 1차인 경우에만 무조건 삭제 가능
	     if( ds_zfst0301.GetColumn(0, "EBDG_MGSQ") == 1 ) {
	         ds_zfst0302_list.DeleteRow(nRow);
	     } else {
	         if( ds_zfst0302_list.GetRowType(nRow) != "insert" ) {
	             if( ds_zfst0302_list.GetColumn(nRow, "SPEN_AMT") == 0 ) {
	                 ds_zfst0302_list.DeleteRow(nRow);
	             } else {
		             gfn_openMsgWin("사용된 시행예산은 삭제 할 수 없습니다.", "", "A", "");
	             }
	         } else {
	             ds_zfst0302_list.DeleteRow(nRow);
	         }
	     }
	}
}

/********************************************************************************
* 기      능   : 변경사유 등록 팝업 호출
********************************************************************************/
function btn_reason_OnClick(obj)
{
	if( ds_zfst0301.GetColumn(0, "EBDG_MGSQ") > 1 )  {
		var arg = "";
		var rsonChng = ds_zfst0303.GetColumn(0, "RSON_CHNG");
		arg = "ocntNumb="+quote(ds_zfst0301.GetColumn(0, "OCNT_NUMB"));
		arg = " ebdgMgsq="+quote(ds_zfst0301.GetColumn(0, "EBDG_MGSQ"));
		arg = " rsonChng="+quote(ds_zfst0303.GetColumn(0, "RSON_CHNG"));
		var arr = null;
		arr = gfn_openPopup("FS0302002B", true, arg);
		ds_zfst0303.fireevent = false;
		if( length(arr) >  0 ) {
		    if( ds_zfst0303.GetRowCount() == 0 ) {
		        ds_zfst0303.AddRow();
		        ds_zfst0303.SetColumn(0, "OCNT_NUMB", ds_zfst0301.GetColumn(0, "OCNT_NUMB"));
		        ds_zfst0303.SetColumn(0, "EBDG_MGSQ", ds_zfst0301.GetColumn(0, "EBDG_MGSQ"));
		        ds_zfst0303.SetColumn(0, "CHHS_SEQN", 1);
		        ds_zfst0303.SetColumn(0, "RSON_CHNG", arr);
		    } else {
		        ds_zfst0303.SetColumn(0, "RSON_CHNG", arr);
		    }
		}
		ds_zfst0303.fireevent = true;
	}
}

/********************************************************************************
* 기      능   : 시행예산 값 변경 이벤트
********************************************************************************/
function ds_zfst0302_list_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
{
    ds_zfst0302_list.fireevent = false;
    switch ( strColumnID ) {
        case "BFOR_BAMT":
        case "CEBD_AMT":
			var bforBamt = ds_zfst0302_list.GetColumn(nRow, "BFOR_BAMT");
			var cebdamt = ds_zfst0302_list.GetColumn(nRow, "CEBD_AMT");
            // 시행예산 변경 시 -> 변동시행예산 = 시행예산 - 변동금액 EBDG_AMT
            var ebdgAmt = toNumber(bforBamt) + toNumber(cebdamt);
            ds_zfst0302_list.SetColumn(nRow, "EBDG_AMT", ebdgAmt);
            setTotAmt();
        break;
    }
    ds_zfst0302_list.fireevent = true;
}

/********************************************************************************
* 기      능   : 시행예산 총계값 계산
********************************************************************************/
function setTotAmt()
{
    // ESMT_TAMT 계약금액 총계
    // BFOR_BAMT 시행예산 총계
    // CEBD_TAMT 변동금액 총계
    // EBDG_AMT 변동시행예산 총계
    // SLCS_RATE 시행율
    var esmtTAmt = ds_zfst0301.GetColumn(0, "ESMT_TAMT");
    var slcsRat= ds_zfst0301.GetColumn(0, "SLCS_RATE");
    var bforBamt = ds_zfst0302_list.Sum("BFOR_BAMT");
    var cebdTamt = ds_zfst0302_list.Sum("CEBD_AMT");
    var ebdgAmt = ds_zfst0302_list.Sum("EBDG_AMT");
    ds_zfst0301.fireevent = false;
    ds_zfst0301.SetColumn(0, "PBDG_TAMT", bforBamt);
    ds_zfst0301.SetColumn(0, "CEBD_TAMT", cebdTamt);
    ds_zfst0301.SetColumn(0, "EBDG_TAMT", ebdgAmt);
    slcsRat = round(ebdgAmt/esmtTAmt,2)*100;
    ds_zfst0301.SetColumn(0, "SLCS_RATE", slcsRat);
    ds_zfst0301.fireevent = true;
}


/********************************************************************************
* 기      능   : 시행예산 항목 추가 팝업 호출
********************************************************************************/
function btn_itemAdd_OnClick(obj)
{
	var arg = "";
	var arr = null;
	arg = "ocntNumb="+quote(ds_zfst0301.GetColumn(0, "OCNT_NUMB"));
	arg = arg + " ebdgMgsq="+quote(ds_zfst0301.GetColumn(0, "EBDG_MGSQ"));
    arr = gfn_openPopup("FS0302002E", true, arg);
    if( length(arr) > 0 )  {
		// 추가된 예산항목을 그리드에 추가한다.
		ds_zfst0302_list.fireevent = false;
		for(var i=0; i < length(arr); i++) {
		    var nRow = ds_zfst0302_list.AppendRow();
		    ds_zfst0302_list.SetColumn(nRow, "OCNT_NUMB", ds_zfst0301.GetColumn(0, "OCNT_NUMB"));
		    ds_zfst0302_list.SetColumn(nRow, "EBDG_MGSQ", ds_zfst0301.GetColumn(0, "EBDG_MGSQ"));
		    ds_zfst0302_list.SetColumn(nRow, "EBDG_GROP", arr[i][0]);
		    ds_zfst0302_list.SetColumn(nRow, "ESCS_UPBG", arr[i][1]);
		    ds_zfst0302_list.SetColumn(nRow, "LEVEL", arr[i][2]);
		    ds_zfst0302_list.SetColumn(nRow, "BDGT_ITEM", arr[i][4]);
		    ds_zfst0302_list.SetColumn(nRow, "NAME1", arr[i][5]);
		    ds_zfst0302_list.SetColumn(nRow, "NAME2", arr[i][6]);
		    ds_zfst0302_list.SetColumn(nRow, "NAME3", arr[i][7]);
		    ds_zfst0302_list.SetColumn(nRow, "NAME4", arr[i][8]);
		    ds_zfst0302_list.SetColumn(nRow, "EBDG_NAME", arr[i][9]);
		}
		ds_zfst0302_list.fireevent = true;
    }
}

/********************************************************************************
* 기      능   : 시행예산 이력 조회 입력 값 체크
********************************************************************************/
function ed_ebdgMgsq_OnChanged(obj,strText)
{
    if( strText == "" ) {
		ds_cond.SetColumn(0, "EBDG_MGSQ", ds_cond.GetOrgColumn(0, "EBDG_MGSQ"));
    }
    if( strText == "0" ) {
        gfn_openMsgWin("0 차 이력은 존재하지 않습니다.", "", "A", "");
		ds_cond.SetColumn(0, "EBDG_MGSQ", ds_cond.GetOrgColumn(0, "EBDG_MGSQ"));
    }
}

]]></Script>
</Window>