<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="536" Id="CS8001001F" Left="8" OnKeyDown="gfn_EnterInForm" OnLoadCompleted="fn_OnLoadCompleted" PidAttrib="7" Title="주문&#32;추가&#32;정보" Top="8" Ver="1.0" Width="848" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_status">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_cond">
				<Contents>
					<colinfo id="QTNUM" size="256" summ="default" type="STRING"/>
					<colinfo id="SEQ" size="256" summ="default" type="STRING"/>
					<record>
						<QTNUM></QTNUM>
						<SEQ></SEQ>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_list">
				<Contents></Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_yn_cd">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
					<record>
						<CODE></CODE>
						<CODE_NAME>-선택-</CODE_NAME>
					</record>
					<record>
						<CODE>Y</CODE>
						<CODE_NAME>Yes</CODE_NAME>
					</record>
					<record>
						<CODE>N</CODE>
						<CODE_NAME>No</CODE_NAME>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_yn2_cd">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
					<record>
						<CODE></CODE>
						<CODE_NAME>-선택-</CODE_NAME>
					</record>
					<record>
						<CODE>Y</CODE>
						<CODE_NAME>ALLOWED</CODE_NAME>
					</record>
					<record>
						<CODE>N</CODE>
						<CODE_NAME>NOT&#32;ALLOWED</CODE_NAME>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_transport_cd">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
					<record>
						<CODE></CODE>
						<CODE_NAME>-선택-</CODE_NAME>
					</record>
					<record>
						<CODE>VESSEL</CODE>
						<CODE_NAME>VESSEL</CODE_NAME>
					</record>
					<record>
						<CODE>AIR</CODE>
						<CODE_NAME>AIR</CODE_NAME>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_cond_prt">
				<Contents>
					<colinfo id="QTNUM" size="256" summ="default" type="STRING"/>
					<colinfo id="SEQ" size="256" summ="default" type="STRING"/>
					<colinfo id="KUNNR" size="256" summ="default" type="STRING"/>
					<colinfo id="UPN" size="256" summ="default" type="STRING"/>
					<colinfo id="CST" size="256" summ="default" type="STRING"/>
					<colinfo id="STATUS" size="256" summ="default" type="STRING"/>
					<record>
						<CST></CST>
						<KUNNR></KUNNR>
						<QTNUM></QTNUM>
						<SEQ></SEQ>
						<STATUS></STATUS>
						<UPN></UPN>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_header_prt">
				<Contents></Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_detail_prt">
				<Contents></Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_customer_prt">
				<Contents></Contents>
			</Dataset>
		</Datasets>
		<Shape BKColor="user12" Bottom="496" Height="128" Id="Shape12" Left="407" LineColor="user13" Right="807" TabOrder="35" Top="368" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="369" Height="33" Id="Shape11" Left="407" LineColor="user13" Right="807" TabOrder="33" Top="336" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="337" Height="33" Id="Shape10" Left="407" LineColor="user13" Right="807" TabOrder="31" Top="304" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="305" Height="33" Id="Shape9" Left="407" LineColor="user13" Right="807" TabOrder="22" Top="272" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="273" Height="33" Id="Shape8" Left="407" LineColor="user13" Right="807" TabOrder="20" Top="240" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="239" Height="55" Id="Shape7" Left="407" LineColor="user13" Right="807" TabOrder="18" Top="184" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="185" Height="33" Id="Shape6" Left="407" LineColor="user13" Right="807" TabOrder="16" Top="152" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="497" Height="33" Id="Shape5" Left="8" LineColor="user13" Right="408" TabOrder="14" Top="464" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="465" Height="33" Id="Shape4" Left="8" LineColor="user13" Right="408" TabOrder="12" Top="432" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="433" Height="33" Id="Shape2" Left="8" LineColor="user13" Right="408" TabOrder="10" Top="400" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="401" Height="33" Id="Shape1" Left="8" LineColor="user13" Right="408" TabOrder="8" Top="368" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="368" Height="64" Id="Shape0" Left="8" LineColor="user13" Right="408" TabOrder="6" Top="304" Type="Rectangle" Width="400"></Shape>
		<Div Height="40" Id="div_btn" TabOrder="3" Text="Div0" ToolTipFont="Default,0" Url="WB01::CommBtnForm.xml" Width="848">
			<Contents></Contents>
		</Div>
		<Image Height="36" Id="Image1" ImageID="form_bl_title_main" Left="8" TabOrder="1" Top="-1" Width="15"></Image>
		<Shape BKColor="user12" Bottom="304" Height="152" Id="Shape3" Left="8" LineColor="user13" Right="408" TabOrder="3" Top="152" Type="Rectangle" Width="400"></Shape>
		<Static Color="user5" Font="굴림,10,Bold" Height="20" Id="Static0" Left="28" TabOrder="2" Text="MMPR&#32;조회" Top="8" VAlign="Middle" Width="192"></Static>
		<Static Height="31" Id="st_text1" Left="9" Style="sty_lb_form_basic" TabOrder="5" Text="&#32;1.&#32;FROM&#32;(PURCHASER/BUYER/IMPORTER)&#32;&#32;&#32;" Top="153" VAlign="Middle" Width="398"></Static>
		<Static Height="31" Id="st_text2" Left="8" Style="sty_lb_form_basic" TabOrder="7" Text="&#32;2.&#32;FINAL&#32;DESTINATION&#32;ADDRESS" Top="305" VAlign="Middle" Width="399"></Static>
		<Static Height="31" Id="st_text3" Left="9" Style="sty_lb_form_basic" TabOrder="9" Text="&#32;3.&#32;FINAL&#32;DESTINATION&#32;PORT&#32;&#32;" Top="369" VAlign="Middle" Width="255"></Static>
		<Static Height="31" Id="st_text4" Left="9" Style="sty_lb_form_basic" TabOrder="11" Text="&#32;4.&#32;TRANSPORT" Top="401" VAlign="Middle" Width="255"></Static>
		<Static Height="31" Id="st_text5" Left="9" Style="sty_lb_form_basic" TabOrder="13" Text="&#32;5.&#32;TERMS&#32;OF&#32;TRADE" Top="433" VAlign="Middle" Width="255"></Static>
		<Static Height="31" Id="st_text6" Left="9" Style="sty_lb_form_basic" TabOrder="15" Text="&#32;6.&#32;TERMS&#32;OF&#32;PAYMENT&#32;" Top="465" VAlign="Middle" Width="255"></Static>
		<Static Height="31" Id="st_text7" Left="408" Style="sty_lb_form_basic" TabOrder="17" Text="&#32;7.&#32;REQUESTED&#32;SHIPMENT&#32;DATE&#32;" Top="153" VAlign="Middle" Width="255"></Static>
		<Static Height="31" Id="st_text8" Left="408" Style="sty_lb_form_basic" TabOrder="19" Text="&#32;8.&#32;SHIPPING&#32;MARK&#32;" Top="185" VAlign="Middle" Width="398"></Static>
		<Static Height="31" Id="st_text9" Left="408" Style="sty_lb_form_basic" TabOrder="21" Text="&#32;9.&#32;PARTIAL&#32;SHIPMENT&#32;" Top="241" VAlign="Middle" Width="255"></Static>
		<Static Height="31" Id="st_text10" Left="408" Style="sty_lb_form_basic" TabOrder="23" Text="&#32;10.&#32;TRANSSHIPMENT&#32;" Top="273" VAlign="Middle" Width="255"></Static>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_1" Height="25" Id="ed_info1_1" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="24" Top="184" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="FINALADDRESS" Height="33" Id="ed_info2" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="25" Top="336" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="SHIPTO" Height="24" Id="ed_info3" ImeMode="none" Left="266" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="26" Top="372" Width="140"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TERMSOFTRADE" Enable="FALSE" Height="24" Id="ed_info5" ImeMode="none" Left="266" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="27" Top="436" Width="140"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TERMSOFPAYMENT" Enable="FALSE" Height="24" Id="ed_info6" ImeMode="none" Left="266" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="28" Top="468" Width="140"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_1" Height="27" Id="ed_info8" ImeMode="none" Left="407" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="29" Top="214" Width="400"></Edit>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_purchase_order" ImageID="btn_sub_08" Left="80" LeftMargin="12" OnClick="btn_purchase_order_OnClick" Style="sty_btn" TabOrder="30" Text="Order&#32;confirmation" Top="504" Transparent="TRUE" Width="120"></Button>
		<Static Height="31" Id="Static1" Left="408" Style="sty_lb_form_basic" TabOrder="32" Text="&#32;11.&#32;REQUEST&#32;PROFORMA&#32;INVOICE&#32;" Top="305" VAlign="Middle" Width="255"></Static>
		<Static Height="31" Id="Static2" Left="408" Style="sty_lb_form_basic" TabOrder="34" Text="&#32;12.&#32;REQUEST&#32;CERTIFICATE&#32;OF&#32;ORIGIN&#32;" Top="337" VAlign="Middle" Width="255"></Static>
		<Static Height="30" Id="Static3" Left="408" Style="sty_lb_form_basic" TabOrder="36" Text="&#32;13.&#32;REMARK&#32;:" Top="369" VAlign="Middle" Width="398"></Static>
		<Edit BindDataset="ds_list" Border="Flat" Column="REMARK" Height="98" Id="ed_info13" ImeMode="none" Left="407" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="37" Top="398" Width="400"></Edit>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="PARTIALSHIP" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_info9" InnerDataset="ds_yn2_cd" Left="665" Style="sty_ipt_form" TabOrder="38" Top="243" Width="140"></Combo>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="TRANSSHIP" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_info10" InnerDataset="ds_yn2_cd" Left="665" Style="sty_ipt_form" TabOrder="39" Top="275" Width="140"></Combo>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="REQUESTPI" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_info11" InnerDataset="ds_yn_cd" Left="665" Style="sty_ipt_form" TabOrder="40" Top="307" Width="140"></Combo>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="REQUESTCO" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_info12" InnerDataset="ds_yn_cd" Left="665" Style="sty_ipt_form" TabOrder="41" Top="339" Width="140"></Combo>
		<Static Color="user6" Font="Default,9,Bold" Height="24" Id="st_message1" Left="8" TabOrder="42" Text="Click&#32;‘Save&#32;&amp;&#32;Order&#32;Confirmation’&#32;after&#32;modifying/checking&#32;below&#32;information&#32;is&#32;finished." Top="40" VAlign="Middle" Width="608"></Static>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="TRANSPORT" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_info4" InnerDataset="ds_transport_cd" Left="266" Style="sty_ipt_form" TabOrder="43" Top="403" Width="140"></Combo>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_poConfirm" ImageID="btn_sub_07" Left="856" LeftMargin="12" Style="sty_btn" TabOrder="44" Text="PO&#32;Confirm" Top="704" Transparent="TRUE" Visible="FALSE" Width="120"></Button>
		<Static Border="Flat" Color="user6" Font="Default,8" Height="80" Id="st_message2" Left="8" TabOrder="45" Top="64" VAlign="Middle" Width="632"></Static>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_ufnsave" ImageID="btn_sub_03" Left="8" LeftMargin="12" OnClick="btn_ufnsave_OnClick" Style="sty_btn" TabOrder="46" Text="Save" Top="504" Transparent="TRUE" Width="64"></Button>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_2" Height="25" Id="ed_info1_2" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="47" Top="208" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_3" Height="25" Id="ed_info1_3" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="48" Top="232" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_4" Height="25" Id="ed_info1_4" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="49" Top="256" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_5" Height="25" Id="ed_info1_5" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="50" Top="280" Width="400"></Edit>
		<Calendar BindDataset="ds_list" Border="Flat" ClickedBkColor="user32" ClickedTextColor="user33" Column="SHIPMENTDATE" Dateformat="yyyy.MM.dd" DayFont="돋움,9" DaySelect="Auto" DaySpacingHeight="6" DrawWeekSeparator="FALSE" EditAlign="CENTER" Enable="FALSE" Font="돋움,9" HeaderBorder="NONE" HeaderFont="돋움,10,Bold" Height="24" Id="cal_info7" Left="666" MonthPickerFormat="yyyy년&#32;MMMM" MonthPopupBorder="FLAT" SaturdayTextColor="user34" SelectedDayFont="돋움,9,Bold" Style="sty_ipt_form" SundayTextColor="user35" TabOrder="51" TextColor="user36" TitleBKColor="user37" TitleTextColor="user38" TodayColor="user39" Top="156" WeekBKColor="user40" WeekColor="user41" WeeksFont="돋움,10" Width="136"></Calendar>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_print_po" ImageID="btn_sub_04" Left="704" LeftMargin="12" OnClick="btn_print_po_OnClick" Style="sty_btn" TabOrder="52" Text="Print&#32;PO" Top="48" Transparent="TRUE" Width="80"></Button>
	</Form>
	<Script><![CDATA[﻿﻿﻿﻿﻿﻿﻿﻿/*
 ******************************************************************************************
 * 기      능   : 견적 진행상태 및 수금상태 변경 
 * 작  성  자   : 
 * 작성  일자   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
#include "LIB::commons.js";	// 공통 스크립트 
//=========================================================================================
// [ PART 1 ]
// Form에서 사용될 전역변수를 선언
// FORM에서 사용되는 전역변수는 대문자로 작성하며, F_XXX 의 형태를 갖도록 한다. 
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form Loading / Unloading 시 작업 정의
//=========================================================================================
function fn_OnLoadCompleted(obj) {
	// Form 로드 이벤트 맨 첫줄에 기술 
	gfn_initForm();
	
	var codeArr = ["LAND1","CS003G"];
    var dsObjArr = [ds_land1,ds_status];
    var addTypeArr = [G_CODE_SELECT,G_CODE_SELECT];
    gfn_searchCommCode(codeArr, dsObjArr, addTypeArr,true);
    
	fn_setText();
	fn_query();
}

function fn_setText() {
	st_message2.Text = "  - FREIGHT COST SHALL BE UPDATED AFTER PACKING. PLEASE ISSUE THE REVISED PO AFTER PACKING.\n"
	              + "  - SPECIAL TERMS AND CONDITIONS : THE CANCELLATION OF MANUFACTURE IS STRICTLY PROHIBITED AFTER\n"
	              + "   ORDER IS CONFIRMED AND NOTICED TO THE MANUFACTURER. IN CASE OF ANY CANCELLATION, THE\n"
	              + "   MANUFACTURING COST SHALL BE BORN TO THE PURCHASER.\n"
	              + "   - ESCALATION : IN CASE OF THE SHIPMENT DELAY ONE MONTH AFTER PACKING, ADDITIONAL COST OF 1.5%\n"
	              + "  SHALL BE ADDED TO THE OFFERED AMOUNT. \n"
	              ;

}


/********************************************************************************
* 기      능   : 공통코드가 조회된 후의 Callback 함수 
********************************************************************************/
function fn_completeInit(sCode, sDsObj, sCodeType) {

}
/********************************************************************************
* 기      능   : form UnloadCompleted 
********************************************************************************/
function fn_OnUnloadCompleted(obj) {
	return gfn_isFormUnload(obj);
}
//=========================================================================================
// [ PART 3 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,form닫기)
//=========================================================================================
/********************************************************************************
* 기      능   : 조회 1
********************************************************************************/
//var fa_qtnum ,fa_seq;
function fn_query() {
	
	ds_cond.SetColumn(0,"QTNUM",fa_qtnum);
	ds_cond.SetColumn(0,"SEQ",fa_seq);
	
	tit_clearActionInfo();
	tit_addSearchActionInfo("cs80:CS8001001F_S1"); 
	tit_callService(
        ""
        , ""
        , "ds_cond=ds_cond"
        , "ds_list=ds_list"
        , ""
        , "fn_afterQuery"
        , true);

}
function fn_afterQuery(){
	var saveYN = ds_list.GetColumn(0, "SAVEYN") ;

	if(saveYN == "Y") {
		btn_poConfirm.Visible = true ;
	} else {
		btn_poConfirm.Visible = false ;
	}
	
	var status = ds_list.GetColumn(0, "STATUS") ;
	

	if(status >= "B") {
		btn_purchase_order.Visible = false ;
		div_btn.btn_save.Visible = false;
		btn_ufnsave.Visible = false;
		btn_print_po.Visible = true;
		
		ed_info1_1.Enable = false;
		ed_info1_2.Enable = false;
		ed_info1_3.Enable = false;
		ed_info1_4.Enable = false;
		ed_info1_5.Enable = false;
		ed_info2.Enable = false;
		ed_info3.Enable = false;
		cb_info4.Enable = false;
		ed_info5.Enable = false;
		ed_info6.Enable = false;
		cal_info7.Enable = false;
		ed_info8.Enable = false;
		cb_info9.Enable = false;
		cb_info10.Enable = false;
		cb_info11.Enable = false;
		cb_info12.Enable = false;
		ed_info13.Enable = false;
				
	} else {
		btn_print_po.Visible = false;
	}
}

function fn_save() {

	// 필수 항목 체크 

	if(!fn_chkNull())
	{	
		//alert("필수 입력 사항이 누락되었습니다.");
		return;
	}
	
	//trace(ds_list.SaveXML());
	
	tit_clearActionInfo();
	tit_addMultiActionInfo("cs80:CS8001001F_U1");					
	tit_callService(
		"" 
		, ""
		, "ds_list=ds_list "
		, ""
		, ""
		, "fn_aftersave");

}

var Flag_save = false; // 저장여부 
function fn_aftersave(errCode, errMsg) {
	if ( errCode!= 0 ) 
	{
		gfn_showAlert("CE00001");
	} 
	else 
	{	
		gfn_showInform( "CI30002");
		                  // gfn_openMsgWin( "주문을 저장하고, 인쇄 창이 활성화 됩니다. \n"
											// +"인쇄 창을 닫고 주문 버튼을 누르면 주문이 최종 접수 됩니다.");
		Flag_save = true;
		fn_query();	
	}
}

function fn_chkNull() {
		// n 번 항목은 필수입력입니다.
	if( length(ed_info1_1.Text) == 0 ) {
		//" 1번 항목은 필수입력입니다.");
		gfn_showAlert("CI30003","1");
		return false;
	}
	if( length(ed_info2.Text) == 0 ) {
		gfn_showAlert("CI30003","2");
		return false;
	}
	if( length(ed_info3.Text) == 0 ) {
		gfn_showAlert("CI30003","3");
		return false;
	}
	if( length(cb_info4.Value) == 0 ) {
		gfn_showAlert("CI30003","4");
		return false;
	}
	if( length(ed_info5.Text) == 0 ) {
		gfn_showAlert("CI30003","5");
		return false;
	}
	if( length(ed_info6.Text) == 0 ) {
		gfn_showAlert("CI30003","6");
		return false;
	}
	return true;
}
/********************************************************************************
* 기      능   : 닫기  
********************************************************************************/
function fn_close() {

	if(Flag_save == true){ // 저장여부 
	
		if(fa_gbn == "CS8001001A"){ //현황창 리프레시 
			//parent.ds_list_master.clearData();										//부모창의 마스터 리스트를 클리어한다.
			//parent.ds_list_detail.clearData();										//부모창의 디테일 리스트를 클리어한다.
			parent.fn_query();
		} else {                    //작성창 리프레시 
			parent.ufn_resetAll();										         //부모창의 모든 정보를 리셋한다.
			parent.ufn_initParameters();										//부모창의 Parameter를 초기화한다.
		}	
		
	}
	close();
}


function btn_purchase_order_OnClick(obj)
{
	var saveYN = ds_list.GetColumn(0, "SAVEYN") ;

	if(saveYN != "Y") {
		// 추가 정보 저장 완료 후 주문 가능합니다.
		gfn_showAlert("CI30004");
		return false;
	}
	// 견적 승인 처리, 주문완료 처리  >> 해외서비스 승인 대상으로 상태 변경 
	// 주문을 완료합니다."
	if(!gfn_showConfirm("CI30005")) 
	{
		return;
	}
	
	ufn_trans();
	
}

/********************************************************************************
* 기      능   : CS8001001B  화면의 fn_trans() 와 동일 
********************************************************************************/

function ufn_trans() {

	tit_clearActionInfo();
	tit_addMultiActionInfo("cs80:CS8001001F_U2");					
	tit_callService(
		"" 
		, ""
		, "ds_list=ds_list "
		, ""
		, ""
		, "fn_aftersave2");
		
}

function fn_aftersave2(errCode, errMsg) {

	if ( errCode!= 0 ) 
	{
		gfn_showAlert("CE00001");
	} 
	else 
	{	
		// 주문이 접수되었습니다.
		gfn_showInform("CI30005");
		Flag_save = true ;
		fn_query();
	}

}
function btn_ufnsave_OnClick(obj)
{
	fn_save();
}

function btn_print_po_OnClick(obj)
{

//	if(!gfn_showConfirm("CI30002")) 
	// {
		// return;
	// }

	ds_cond_prt.SetColumn(0, "KUNNR", ds_list.GetColumn(0, "KUNNR"));
	ds_cond_prt.SetColumn(0, "UPN", ds_list.GetColumn(0, "UPN"));
	ds_cond_prt.SetColumn(0, "CST", ds_list.GetColumn(0, "CST"));
	ds_cond_prt.SetColumn(0, "QTNUM", ds_list.GetColumn(0, "QTNUM"));
	ds_cond_prt.SetColumn(0, "SEQ", ds_list.GetColumn(0, "SEQ"));
	// 상태가 B 이하인 경우 현대 직인 출력 불가 
	ds_cond_prt.SetColumn(0, "STATUS", ds_list.GetColumn(0, "STATUS"));
	
	
	tit_clearActionInfo();					
	tit_addSearchActionInfo("cs80:CS8001001B_S11");			// 견적 헤더 정보	 ds_header_prt
	tit_addSearchActionInfo("cs80:CS8001001B_S13");			// 견적 자재 디테일   ds_detail_prt	 		
	tit_addSearchActionInfo("cs80:CS8001001B_S17");			// 고객 정보	 
	tit_callService("", "", "ds_cond=ds_cond_prt", "ds_header_prt=ds_header_prt ds_detail_prt=ds_detail_prt ds_customer_prt=ds_customer_prt", "", "", true, false, true);	

	var o_qtdat = ds_header_prt.GetColumn(0,"QTDAT");
	var n_qtdat = gfn_getAfterDate(o_qtdat,30) ;
	ds_header_prt.SetColumn(0,"QTDAT",n_qtdat);
	
	Dialog("CS80::CS8001001H.xml", ""); // PO SHEET  출력 

}
]]></Script>
</Window>