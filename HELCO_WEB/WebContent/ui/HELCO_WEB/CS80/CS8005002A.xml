<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="528" Id="CS8005002A" Left="8" OnKeyDown="gfn_EnterInForm" OnLoadCompleted="fn_OnLoadCompleted" PidAttrib="7" Title="고객정보&#32;상세" Top="8" Ver="1.0" Width="432" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_cond">
				<Contents>
					<colinfo id="LIFNR" size="256" summ="default" type="STRING"/>
					<colinfo id="FCURR" size="256" summ="default" type="STRING"/>
					<record>
						<FCURR></FCURR>
						<LIFNR></LIFNR>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_list">
				<Contents></Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_waers">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
					<record>
						<CODE>USD</CODE>
						<CODE_NAME>USD</CODE_NAME>
					</record>
					<record>
						<CODE>KRW</CODE>
						<CODE_NAME>KRW</CODE_NAME>
					</record>
					<record>
						<CODE>EUR</CODE>
						<CODE_NAME>EUR</CODE_NAME>
					</record>
					<record>
						<CODE>MYR</CODE>
						<CODE_NAME>MYR</CODE_NAME>
					</record>
					<record>
						<CODE>CNY</CODE>
						<CODE_NAME>CNY</CODE_NAME>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_lgort">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_inco1">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
					<record>
						<CODE></CODE>
						<CODE_NAME>-&#32;선택&#32;-</CODE_NAME>
					</record>
					<record>
						<CODE>EXW</CODE>
						<CODE_NAME>EXW</CODE_NAME>
					</record>
					<record>
						<CODE>FOB</CODE>
						<CODE_NAME>FOB</CODE_NAME>
					</record>
					<record>
						<CODE>FCA</CODE>
						<CODE_NAME>FCA</CODE_NAME>
					</record>
					<record>
						<CODE>FAS</CODE>
						<CODE_NAME>FAS</CODE_NAME>
					</record>
					<record>
						<CODE>CFR</CODE>
						<CODE_NAME>CFR</CODE_NAME>
					</record>
					<record>
						<CODE>CIF</CODE>
						<CODE_NAME>CIF</CODE_NAME>
					</record>
					<record>
						<CODE>CPT</CODE>
						<CODE_NAME>CPT</CODE_NAME>
					</record>
					<record>
						<CODE>CIP</CODE>
						<CODE_NAME>CIP</CODE_NAME>
					</record>
					<record>
						<CODE>DDU</CODE>
						<CODE_NAME>DDU</CODE_NAME>
					</record>
					<record>
						<CODE>DDP</CODE>
						<CODE_NAME>DDP</CODE_NAME>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zterm">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
					<record>
						<CODE></CODE>
						<CODE_NAME>-&#32;선택&#32;-</CODE_NAME>
					</record>
					<record>
						<CODE>TB01</CODE>
						<CODE_NAME>T/T&#32;(선적전&#32;사전입금)&#32;&#32;</CODE_NAME>
					</record>
					<record>
						<CODE>TF01</CODE>
						<CODE_NAME>T/T&#32;(선적후&#32;사후입금)&#32;&#32;</CODE_NAME>
					</record>
					<record>
						<CODE>LC01</CODE>
						<CODE_NAME>L/C</CODE_NAME>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zterm2">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
					<record>
						<CODE>in&#32;advance</CODE>
						<CODE_NAME>in&#32;advance</CODE_NAME>
					</record>
					<record>
						<CODE>30days</CODE>
						<CODE_NAME>30days</CODE_NAME>
					</record>
					<record>
						<CODE>60days</CODE>
						<CODE_NAME>60days</CODE_NAME>
					</record>
					<record>
						<CODE>90days</CODE>
						<CODE_NAME>90days</CODE_NAME>
					</record>
					<record>
						<CODE>120days</CODE>
						<CODE_NAME>120days</CODE_NAME>
					</record>
					<record>
						<CODE>180days</CODE>
						<CODE_NAME>180days</CODE_NAME>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_incgbn">
				<Contents>
					<colinfo id="CODE" size="256" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" type="STRING"/>
					<record>
						<CODE></CODE>
						<CODE_NAME></CODE_NAME>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_kunnr">
				<Contents>
					<colinfo id="KUNNR" size="256" summ="default" type="STRING"/>
					<colinfo id="NAME1" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_exch_waers">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
		</Datasets>
		<Shape BKColor="user12" Bottom="105" Height="33" Id="Shape10" Left="8" LineColor="user13" Right="408" TabOrder="47" Top="72" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="73" Height="33" Id="Shape9" Left="8" LineColor="user13" Right="408" TabOrder="46" Top="40" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="513" Height="33" Id="Shape7" Left="8" LineColor="user13" Right="408" TabOrder="40" Top="480" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="481" Height="33" Id="Shape6" Left="8" LineColor="user13" Right="408" TabOrder="33" Top="448" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="169" Height="33" Id="Shape2" Left="8" LineColor="user13" Right="408" TabOrder="21" Top="136" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="137" Height="33" Id="Shape0" Left="8" LineColor="user13" Right="408" TabOrder="19" Top="104" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="449" Height="33" Id="Shape5" Left="8" LineColor="user13" Right="408" TabOrder="8" Top="416" Type="Rectangle" Width="400"></Shape>
		<Shape BKColor="user12" Bottom="417" Height="33" Id="Shape1" Left="8" LineColor="user13" Right="408" TabOrder="6" Top="384" Type="Rectangle" Width="400"></Shape>
		<Div Height="40" Id="div_btn" TabOrder="3" Text="Div0" ToolTipFont="Default,0" Url="WB01::CommBtnForm.xml" Width="432">
			<Contents></Contents>
		</Div>
		<Image Height="36" Id="Image1" ImageID="form_bl_title_main" Left="8" TabOrder="1" Top="-1" Width="15"></Image>
		<Shape BKColor="user12" Bottom="352" Height="152" Id="Shape3" Left="8" LineColor="user13" Right="408" TabOrder="3" Top="200" Type="Rectangle" Width="400"></Shape>
		<Static Color="user5" Font="굴림,10,Bold" Height="20" Id="Static0" Left="28" TabOrder="2" Text="MMPR&#32;조회" Top="8" VAlign="Middle" Width="192"></Static>
		<Static Height="31" Id="st_text1" Left="9" Style="sty_lb_form_basic" TabOrder="5" Text="&#32;TO&#32;&#32;" Top="201" VAlign="Middle" Width="398"></Static>
		<Static Height="31" Id="st_shipto2" Left="9" Style="sty_lb_form_basic" TabOrder="7" Text="&#32;SHIP&#32;TO&#32;2" Top="385" VAlign="Middle" Width="255"></Static>
		<Static Height="31" Id="st_inco1" Left="9" Style="sty_lb_form_basic" TabOrder="9" Text="&#32;TERMS&#32;OF&#32;TRADE" Top="417" VAlign="Middle" Width="255"></Static>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_1" Height="25" Id="ed_to_01" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="10" Top="232" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="LAND1_NM" Height="24" Id="ed_land1_nm" ImeMode="none" Left="266" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="11" Top="388" Width="140"></Edit>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_poConfirm" ImageID="btn_sub_07" Left="856" LeftMargin="12" Style="sty_btn" TabOrder="12" Text="PO&#32;Confirm" Top="704" Transparent="TRUE" Visible="FALSE" Width="120"></Button>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_2" Height="25" Id="ed_to_02" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="13" Top="256" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_3" Height="25" Id="ed_to_03" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="14" Top="280" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_4" Height="25" Id="ed_to_04" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="15" Top="304" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TO_5" Height="25" Id="ed_to_05" ImeMode="none" Left="8" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="16" Top="328" Width="400"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="LIFNR" Enable="FALSE" Height="24" Id="ed_kunnr" ImeMode="none" Left="83" LeftMargin="4" MaxLength="10" Number="TRUE" RightMargin="4" Style="sty_ipt_form" TabOrder="17" Top="44" Width="84"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="NAME1" Enable="FALSE" Height="24" Id="ed_abr_nm" ImeMode="none" Left="83" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="18" Top="76" Width="317"></Edit>
		<Static Height="31" Id="st_waers" Left="9" Style="sty_lb_form_basic" TabOrder="20" Text="&#32;통화" Top="105" VAlign="Middle" Width="71"></Static>
		<Static Height="31" Id="st_pernr" Left="9" Style="sty_lb_form_basic" TabOrder="22" Text="&#32;담당자" Top="137" VAlign="Middle" Width="71"></Static>
		<Edit BindDataset="ds_list" Border="Flat" Column="PERNR" Height="24" Id="ed_pernr" ImeMode="none" Left="154" LeftMargin="4" MaxLength="7" Number="TRUE" RightMargin="4" Style="sty_ipt_form" TabOrder="23" Top="140" Width="70"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="REPRES" Height="24" Id="ed_repres" ImeMode="none" Left="81" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="24" Top="140" Width="70"></Edit>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="WAERS" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_waers" ImeMode="none" InnerDataset="ds_waers" Left="81" Style="sty_ipt_form" TabOrder="25" Top="108" Width="100"></Combo>
		<Static Height="31" Id="st_lgort" Left="233" Style="sty_lb_form_basic" TabOrder="26" Text="&#32;저장위치" Top="105" VAlign="Middle" Width="71"></Static>
		<Edit BindDataset="ds_list" Border="Flat" Column="LGORT" Height="24" Id="ed_lgort" ImeMode="none" Left="305" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="27" Top="108" Width="95"></Edit>
		<Shape BKColor="user12" Bottom="385" Height="33" Id="Shape4" Left="8" LineColor="user13" Right="408" TabOrder="28" Top="352" Type="Rectangle" Width="400"></Shape>
		<Static Height="31" Id="st_shipto" Left="9" Style="sty_lb_form_basic" TabOrder="29" Text="&#32;SHIP&#32;TO&#32;1" Top="353" VAlign="Middle" Width="255"></Static>
		<Edit BindDataset="ds_list" Border="Flat" Column="SHIPTO" Height="24" Id="ed_shipto" ImeMode="none" Left="266" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="30" Top="356" Width="140"></Edit>
		<Combo BindDataset="DS_LIst" Border="Flat" CodeColumn="CODE" Column="ZTERM_CODE" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_zterm" ImeMode="none" InnerDataset="ds_zterm" Left="160" OnChanged="cb_zterm_OnChanged" Style="sty_ipt_form_ind" TabOrder="31" Top="451" Width="145"></Combo>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="ZTERM_TEXT" DataColumn="CODE_NAME" DisableBKColor="user5" Enable="FALSE" Height="24" Id="cb_zterm2" ImeMode="none" InnerDataset="ds_zterm2" Left="306" Style="sty_ipt_form_ind" TabOrder="32" Top="451" Width="100"></Combo>
		<Static Height="31" Id="st_zterm" Left="9" Style="sty_lb_form_basic" TabOrder="34" Text="&#32;TERMS&#32;OF&#32;PAYMENT&#32;" Top="449" VAlign="Middle" Width="151"></Static>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="TERMSOFTRADE" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_inco1" InnerDataset="ds_inco1" Left="265" OnChanged="cb_inco1_OnChanged" Style="sty_ipt_form" TabOrder="35" Top="419" Width="140"></Combo>
		<Static Height="31" Id="Static1" Left="233" Style="sty_lb_form_basic" TabOrder="36" Text="&#32;법인구분" Top="137" VAlign="Middle" Width="71"></Static>
		<Combo BindDataset="ds_list" Border="Flat" CodeColumn="CODE" Column="INCGBN" DataColumn="CODE_NAME" DisableBKColor="user5" Height="24" Id="cb_incgbn" InnerDataset="ds_incgbn" Left="305" Style="sty_ipt_form" TabOrder="37" Top="140" Width="95"></Combo>
		<Static Align="Center" Height="31" Id="st_seal" Left="9" Style="sty_lb_form_basic" TabOrder="38" Text="직인파일명" Top="481" VAlign="Middle" Width="71"></Static>
		<Edit BindDataset="ds_list" Border="Flat" Column="SEAL" Height="24" Id="ed_seal" ImeMode="none" Left="81" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="39" Top="484" Width="232"></Edit>
		<Shape BKColor="user12" Bottom="201" Height="33" Id="Shape8" Left="8" LineColor="user13" Right="408" TabOrder="41" Top="168" Type="Rectangle" Width="400"></Shape>
		<Static Height="31" Id="Static2" Left="9" Style="sty_lb_form_basic" TabOrder="42" Text="&#32;Attn" Top="169" VAlign="Middle" Width="71"></Static>
		<Edit BindDataset="ds_list" Border="Flat" Column="ATTENTION" Height="24" Id="Edit0" ImeMode="none" Left="234" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="43" Top="172" Width="166"></Edit>
		<Edit BindDataset="ds_list" Border="Flat" Column="TEL" Height="24" Id="Edit1" ImeMode="none" Left="81" LeftMargin="4" RightMargin="4" Style="sty_ipt_form" TabOrder="44" Top="172" Width="151"></Edit>
		<Static Height="31" Id="Static3" Left="9" Style="sty_lb_form_basic" TabOrder="45" Text="&#32;고객코드" Top="41" VAlign="Middle" Width="71"></Static>
		<Static Height="31" Id="Static4" Left="9" Style="sty_lb_form_basic" TabOrder="48" Text="&#32;고객명" Top="73" VAlign="Middle" Width="71"></Static>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_searchKunnr" ImageID="btn_sub_05" Left="176" LeftMargin="12" OnClick="btn_searchKunnr_OnClick" Style="sty_btn" TabOrder="49" Text="유효성체크" Top="46" Transparent="TRUE" Visible="FALSE" Width="83"></Button>
	</Form>
	<Script><![CDATA[﻿﻿﻿﻿﻿﻿﻿﻿/*
 ******************************************************************************************
 * 기      능   : 
 * 작  성  자   : 
 * 작성  일자   : 
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
#include "LIB::commons.js";	// 공통 스크립트 
//=========================================================================================
// [ PART 1 ]
// Form에서 사용될 전역변수를 선언
// FORM에서 사용되는 전역변수는 대문자로 작성하며, F_XXX 의 형태를 갖도록 한다. 
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form Loading / Unloading 시 작업 정의
//=========================================================================================
function fn_OnLoadCompleted(obj) {
	// Form 로드 이벤트 맨 첫줄에 기술 
	gfn_initForm();
	
	ed_seal.Visible = false;
	st_seal.Visible = false;
	
	var codeArr = ["LAND1", "CS001_INCGBN"];	
	var dsObjArr = [ds_land1_cd,ds_incgbn];
	var addTypeArr = [G_CODE_ALL,G_CODE_ALL];

	gfn_searchCommCode(codeArr, dsObjArr, addTypeArr);	
	
	if (gbn == "new"){
		ds_list.AddRow();
		fn_setDsList();
	} else {
		fn_query();
	}

}


/********************************************************************************
* 기      능   : 공통코드가 조회된 후의 Callback 함수 
********************************************************************************/
function fn_completeInit(sCode, sDsObj, sCodeType) {

}
/********************************************************************************
* 기      능   : form UnloadCompleted 
********************************************************************************/
function fn_OnUnloadCompleted(obj) {
	return gfn_isFormUnload(obj);
}
//=========================================================================================
// [ PART 3 ]
// Main Process Event 정의(조회,입력,삭제,저장,인쇄,form닫기)
//=========================================================================================
/********************************************************************************
* 기      능   : 조회 1
********************************************************************************/
//var fa_qtnum ,fa_seq;
function fn_query() {
	
	ds_cond.SetColumn(0,"LIFNR",lifnr);
	
	tit_clearActionInfo();
	tit_addSearchActionInfo("cs80:CS8005002A_S1"); 
	tit_callService(
        ""
        , ""
        , "ds_cond=ds_cond"
        , "ds_list=ds_list"
        , ""
        , "fn_afterQuery"
        , true);

}
function fn_afterQuery(){
	fn_setAuth();
	
}

/********************************************************************************
* 기      능   : 더미 데이타 셋 
********************************************************************************/
function fn_setDsList() {
	
	ds_list.ClearData();
	
	tit_clearActionInfo();
	tit_addSearchActionInfo("cs80:CS8005002A_S2"); 
	tit_callService(
        ""
        , ""
        , "ds_cond=ds_cond"
        , "ds_list=ds_list"
        , ""
        , "fn_afterQuery"
        , true);

}

function fn_setAuth(){

	if(G_USER_ID == "2021200" || G_USER_ID == "2023687" || G_USER_ID == "2018900" || G_USER_ID == "2029758" || G_USER_ID == "2999999") {
		//직인정보 전산실 수정 
		ed_seal.Visible = true;
		st_seal.Visible = true;
	} 

	div_btn.btn_save.Visible = true;
	
	ed_to_01.Enable = true ;
	ed_to_02.Enable = true ;
	ed_to_03.Enable = true ;
	ed_to_04.Enable = true ;
	ed_to_05.Enable = true ;
	ed_shipto.Enable = true ;
	ed_land1_nm.Enable = true ;
	cb_inco1.Enable = true ;
	cb_zterm.Enable = true ;
	
	ed_abr_nm.Enable = false;
	ed_kunnr.Enable = false;
	
	// 신규 등록의 경우 고객코드 입력
	if (gbn == "new"){
		ed_kunnr.Enable = true;
		btn_searchKunnr.Visible = true;
	} else {
		btn_searchKunnr.Visible = false;
	}
}
function fn_save() {

	// 필수 항목 체크 
	var t_kunnr = ds_list.GetColumn(0, "LIFNR") ;
	
	if(length(trim(t_kunnr)) == 0 ) {
		gfn_showAlert("고객코드를 입력해주세요.  ");
		return;
	}
	if(length(trim(t_kunnr)) < 10 ) {
		gfn_showAlert("유효성체크 를 실행해주세요.  ");
		return;
	}
	var t_lgort = ds_list.GetColumn(0, "LGORT") ;
	
	if(length(trim(t_lgort)) == 0 || length(trim(t_lgort)) < 4 ) {
		gfn_showAlert("저장위치는 필수입력입니다. ");
		ed_lgort.SetFocus();
		return;
	}

	var t_waers = ds_list.GetColumn(0, "WAERS") ;

	if(length(trim(t_waers)) == 0  ) {
		gfn_showAlert("통화는 필수입력입니다. ");
		cb_waers.SetFocus();
		return;
	}
	if(t_waers <> "KRW") {
		// 견적확율 유무 확인 
		fn_getExchangeOfQuotation(t_waers);
		
		if(ds_exch_waers.RowCount() == 0) {
			gfn_showAlert("견적환율 정보가 없습니다. ");
			cb_waers.SetFocus();
			return;
		}
	}
	
	// 담당자명 필수체크 -- 2018.06.28 J.H Han
	var t_ed_repres = ds_list.GetColumn(0, "REPRES") ;
	
	if(length(trim(t_ed_repres)) == 0 ) {
		gfn_showAlert("담당자명은 필수입력입니다.  ");
		ed_repres.SetFocus();
		return;
	}

	var t_pernr = ds_list.GetColumn(0, "PERNR") ;

	if(length(trim(t_pernr)) == 0  || length(trim(t_pernr)) < 7 ) {
		gfn_showAlert("담당자 번호는 사번 7자리를 입력해주세요.  ");
		ed_pernr.SetFocus();
		return;
	}
	
	var t_incgbn = ds_list.GetColumn(0, "INCGBN") ;

	if(length(trim(t_incgbn)) == 0 ) {
		gfn_showAlert("법인구분은 필수입력입니다.  ");
		cb_incgbn.SetFocus();
		return;
	}
	//trace(ds_list.SaveXML());
	
	var sql;
	
	if (gbn == "new"){
		sql = "cs80:CS8005002A_I1";
	} else {
		sql = "cs80:CS8005002A_U1";
	}
	
	tit_clearActionInfo();
	tit_addSingleActionInfo(sql);					
	tit_callService(
		"" 
		, ""
		, "ds_list=ds_list "
		, ""
		, ""
		, "fn_aftersave");

}


function fn_aftersave(errCode, errMsg) {
	if ( errCode!= 0 ) 
	{
		gfn_openMsgWin("CE00001");
	} 
	else 
	{	
		if(gbn == "new"){ 
			gbn = "detail";
		}
		fn_query();	
	}
}

/********************************************************************************
* 기      능   : 닫기  
********************************************************************************/
function fn_close() {

	close();
}

function cb_zterm_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
{
	
	if(strCode == "TB01") {
		cb_zterm2.Enable = false;
		ds_zterm2.UnFilter();
		cb_zterm2.index = 0;
	} else if(strCode == "TF01") {
		cb_zterm2.Enable = true;
		ds_zterm2.Filter("CODE <> 'in advance'");
		cb_zterm2.index = 0;
	} else if(strCode == "LC01") {
		cb_zterm2.Enable = false;
		ds_zterm2.UnFilter();
		cb_zterm2.index = -1;
	} else{
		cb_zterm2.Enable = false;
		ds_zterm2.UnFilter();
		cb_zterm2.index = -1;
	}  
}

function btn_searchKunnr_OnClick(obj)
{	
	var t_lifnr = ds_list.GetColumn(0, "LIFNR") ;
	var c_lifnr = t_lifnr ; 
	var checkDigit = 10 - length(trim(t_lifnr)) ;
	
	for (var i = 0; i < checkDigit ; i++) {
		c_lifnr = "0" + c_lifnr ;
	}
	
	ds_list.SetColumn(0, "LIFNR",c_lifnr);
	
	fn_checkKunnrInfo();

}

function fn_checkKunnrInfo() {

	ds_cond.ClearData();
	ds_kunnr.ClearData();
	
	ds_cond.AddRow();
	ds_cond.SetColumn(0,"LIFNR",ds_list.GetColumn(0, "LIFNR"));	

	tit_clearActionInfo();
	tit_addSearchActionInfo("cs80:CS8005002A_S3"); 
	tit_callService(
        ""
        , ""
        , "ds_cond=ds_cond"
        , "ds_kunnr=ds_kunnr"
        , ""
        , "fn_afterQuery2"
        , true);

}
function fn_afterQuery2() {
	
	if(ds_kunnr.RowCount() == 0 ) {
		gfn_showAlert("고객정보가 없습니다. 고객코드를 다시 확인해주세요.");		
		ds_list.SetColumn(0, "LIFNR", "" );
		ed_kunnr.SetFocus();
		
	} else {
		ds_list.SetColumn(0, "NAME1",ds_kunnr.GetColumn(0, "NAME1") );	
		ds_list.SetColumn(0, "LAND1",ds_kunnr.GetColumn(0, "LAND1") );	
	}
}
/********************************************************************************
* 기      능   : 견적환율 유무 확인 
********************************************************************************/
function fn_getExchangeOfQuotation(waers){

	ds_cond.SetColumn(0, "FCURR", waers);
	ds_exch_waers.ClearData();
	tit_clearActionInfo();
	tit_addSearchActionInfo("cs80:CS8005002A_S4");
	tit_callService(
        ""
        , ""
        , "ds_cond=ds_cond"
        , "ds_exch_waers=ds_exch_waers"
        , ""						
        , ""						
		, true							
		, false							
		, true);
}]]></Script>
</Window>