<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="560" Id="FS0402001A" Left="8" OnLoadCompleted="fn_OnLoadCompleted" OnTimer="fn_OnTimer" OnUnloadCompleted="fn_OnUnloadCompleted" PidAttrib="7" Title="발주품목/발주업체&#32;등록" Top="8" Ver="1.0" Width="978" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_error">
				<Contents>
					<colinfo id="IDX" size="256" type="STRING"/>
					<colinfo id="ERRMSG" size="256" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0400">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="ORDR_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="ORDR_CLSS" size="10" summ="default" type="STRING"/>
					<colinfo id="POST1" size="40" summ="default" type="STRING"/>
					<colinfo id="ORIT_NAME" size="100" summ="default" type="STRING"/>
					<colinfo id="ORIT_NOTE" size="500" summ="default" type="STRING"/>
					<colinfo id="CLMY_CNDT" size="200" summ="default" type="STRING"/>
					<colinfo id="DLIV" size="200" summ="default" type="STRING"/>
					<colinfo id="MITC_PRCS" size="10" summ="default" type="STRING"/>
					<colinfo id="FRPI_PRID" size="5" summ="default" type="INT"/>
					<colinfo id="RMNR_PRID" size="5" summ="default" type="INT"/>
					<colinfo id="CONT_CMPY" size="10" summ="default" type="STRING"/>
					<colinfo id="CMPY_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="WAERK" size="5" summ="default" type="STRING"/>
					<colinfo id="ORDR_TBDG" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="CONT_PRIC" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="MNGR" size="20" summ="default" type="STRING"/>
					<colinfo id="MNGR_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="ETC" size="3000" summ="default" type="STRING"/>
					<colinfo id="ORDR_APDT" size="8" summ="default" type="STRING"/>
					<colinfo id="ORDR_STAT" size="10" summ="default" type="STRING"/>
					<colinfo id="ORDR_STAT_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="OCNT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="EBDG_MGSQ" size="5" summ="default" type="INT"/>
					<colinfo id="EBDG_ITSQ" size="10" summ="default" type="INT"/>
					<colinfo id="EBDG_NAME" size="100" summ="default" type="STRING"/>
					<colinfo id="PSPID" size="24" summ="default" type="STRING"/>
					<colinfo id="BSTNK" size="20" summ="default" type="STRING"/>
					<colinfo id="AFIL_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="WRIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="WRIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="WRIT_USER" size="12" summ="default" type="STRING"/>
					<colinfo id="APPR_STAT" size="256" summ="default" type="STRING"/>
					<colinfo id="APPR_STAT_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="DRAF" size="256" summ="default" type="STRING"/>
					<colinfo id="ADIT" size="256" summ="default" type="STRING"/>
					<colinfo id="APPR" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0401">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="ORDR_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="CMPY_CODE" size="10" summ="default" type="STRING"/>
					<colinfo id="CMPY_NAME" size="35" summ="default" type="STRING"/>
					<colinfo id="LICS_RLTS" size="10" summ="default" type="STRING"/>
					<colinfo id="ACDT_ISRN" size="10" summ="default" type="STRING"/>
					<colinfo id="ATAL" size="10" summ="default" type="STRING"/>
					<colinfo id="WAERK" size="5" summ="default" type="STRING"/>
					<colinfo id="ESMT_AMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="NAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="MODI_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="MODI_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="MODI_USER" size="12" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0402" OnColumnChanged="ds_zfst0402_OnColumnChanged">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="ORDR_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="PMPL_SEQN" size="10" summ="default" type="INT"/>
					<colinfo id="PAYT_CLSS" size="10" summ="default" type="STRING"/>
					<colinfo id="PAYT_RATE" size="6" summ="default" type="DECIMAL"/>
					<colinfo id="PAYT_CUNT" size="5" summ="default" type="INT"/>
					<colinfo id="WAERK" size="5" summ="default" type="STRING"/>
					<colinfo id="PAYT_TAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="PAYT_TERM" size="200" summ="default" type="STRING"/>
					<colinfo id="WRIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="WRIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="WRIT_USER" size="12" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_cond">
				<Contents>
					<colinfo id="ORDR_NUMB" size="256" summ="default" type="STRING"/>
					<colinfo id="ACTION_CMD" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_a09">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_a10">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_a11">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_a12">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0103">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="ADOC_CLAS" size="10" summ="default" type="STRING"/>
					<colinfo id="ADOC_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="ADOC_NTIM" size="5" summ="default" type="INT"/>
					<colinfo id="RSON_RJCT" size="200" summ="default" type="STRING"/>
					<colinfo id="DRAF_TIME" size="8" summ="default" type="STRING"/>
					<colinfo id="DRAF_DATE" size="6" summ="default" type="STRING"/>
					<colinfo id="DRAF" size="12" summ="default" type="STRING"/>
					<colinfo id="DRAF_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="DRAF_STAT" size="5" summ="default" type="STRING"/>
					<colinfo id="ADIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="ADIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="ADIT" size="12" summ="default" type="STRING"/>
					<colinfo id="ADIT_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="ADIT_STAT" size="5" summ="default" type="STRING"/>
					<colinfo id="APPR_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="APPR_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="APPR" size="12" summ="default" type="STRING"/>
					<colinfo id="APPR_NAME" size="12" summ="default" type="STRING"/>
					<colinfo id="APPR_STAT" size="10" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_doc_appr">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="ADOC_CLAS" size="10" summ="default" type="STRING"/>
					<colinfo id="ADOC_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="ADOC_NTIM" size="5" summ="default" type="INT"/>
					<colinfo id="RSON_RJCT" size="600" summ="default" type="STRING"/>
					<colinfo id="APPR_STAT" size="30" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_a08">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0400_key">
				<Contents>
					<colinfo id="ORDR_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="ACTION_CMD" size="10" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0302">
				<Contents>
					<colinfo id="MANDT" size="9" summ="default" type="STRING"/>
					<colinfo id="OCNT_NUMB" size="60" summ="default" type="STRING"/>
					<colinfo id="EBDG_ITSQ" size="4" summ="default" type="INT"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0302_amt">
				<Contents>
					<colinfo id="EBDG_AMT" size="17" summ="default" type="DECIMAL"/>
					<colinfo id="SPEN_AMT" size="17" summ="default" type="DECIMAL"/>
					<colinfo id="REMN_AMT" size="17" summ="default" type="DECIMAL"/>
				</Contents>
			</Dataset>
			<Dataset DataObject="ds_zfst0402" DataSetType="Filter" FilterExpr="PMPL_SEQN==0" Id="ds_zfst0402_0"></Dataset>
			<Dataset DataObject="ds_zfst0402" DataSetType="Filter" FilterExpr="PMPL_SEQN==1" Id="ds_zfst0402_1"></Dataset>
			<Dataset DataObject="ds_zfst0402" DataSetType="Filter" FilterExpr="PMPL_SEQN==2" Id="ds_zfst0402_2"></Dataset>
		</Datasets>
		<Shape BKColor="user0" Bottom="376" Height="320" Id="Shape0" Left="16" LineColor="user1" Right="962" TabOrder="9" Top="56" Type="Rectangle" Width="946"></Shape>
		<Shape BKColor="user12" Bottom="293" Height="51" Id="Shape6" Left="23" LineColor="user13" Right="951" TabOrder="19" Top="242" Type="Rectangle" Width="928"></Shape>
		<TextArea BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="ETC" Height="47" Id="ta_note" Left="309" MaxLength="3000" Style="sty_ipt_form" TabOrder="33" Top="244" VScroll="TRUE" Width="637"></TextArea>
		<Shape BKColor="user0" Bottom="33" Height="33" Id="Shape1" Left="0" LineColor="user1" Right="978" TabOrder="0" Top="0" Type="Rectangle" Width="978"></Shape>
		<Static Align="Right" Height="20" Id="Static0" Left="8" Style="sty_lb_search" TabOrder="2" Text="발주번호" Top="6" VAlign="Middle" Width="60"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" BorderColor="user1" Column="ORDR_NUMB" Height="20" Id="ed_ordrNumb" Left="68" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="3" Top="6" UpperOnly="TRUE" Width="83"></Edit>
		<Button Cursor="HAND" Height="18" Id="btn_ordrNumb" ImageID="btn_icon_search" Left="152" OnClick="btn_ordrNumb_OnClick" TabOrder="4" Top="7" Transparent="TRUE" Width="18"></Button>
		<Static Color="user6" Font="굴림,9,Bold" Height="20" Id="Static19" Left="17" TabOrder="6" Text="발주정보" Top="37" VAlign="Middle" Width="102"></Static>
		<Shape BKColor="user12" Bottom="118" Height="26" Id="Shape2" Left="23" LineColor="user13" Right="951" TabOrder="10" Top="92" Type="Rectangle" Width="928"></Shape>
		<Edit BindDataset="ds_zfst0400" Border="Flat" Column="POST1" Height="20" Id="ed_post1" Left="116" MaxLength="40" Style="sty_ipt_form_ind" TabOrder="11" Top="95" Width="508"></Edit>
		<Shape BKColor="user12" Bottom="143" Height="26" Id="Shape3" Left="23" LineColor="user13" Right="951" TabOrder="13" Top="117" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static4" Left="24" Style="sty_lb_form_basic" TabOrder="14" Text="품목명" Top="118" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" Column="ORIT_NAME" Height="20" Id="ed_oritName" Left="116" MaxLength="100" Style="sty_ipt_form_ind" TabOrder="15" Top="120" Width="387"></Edit>
		<Static Align="Right" Height="24" Id="Static5" Left="507" Style="sty_lb_form_basic" TabOrder="16" Text="납기" Top="118" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" Column="DLIV" Height="20" Id="ed_dliv" Left="599" MaxLength="300" Style="sty_ipt_form_ind" TabOrder="17" Top="120" Width="347"></Edit>
		<Shape BKColor="user12" Bottom="193" Height="26" Id="Shape4" Left="23" LineColor="user13" Right="951" TabOrder="20" Top="167" Type="Rectangle" Width="928"></Shape>
		<Combo BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" CodeColumn="CODE" Column="MITC_PRCS" DataColumn="CODE_NAME" Height="20" Id="cb_mitcPrcs" INDEX="0" InnerDataset="ds_combo_a09" Left="116" OnChanged="cb_mitcPrcs_OnChanged" Style="sty_ipt_form" TabOrder="21" Top="169" Width="132"></Combo>
		<Static Align="Right" Height="24" Id="Static6" Left="24" Style="sty_lb_form_basic" TabOrder="22" Text="유상무상구분" Top="168" VAlign="Middle" Width="92"></Static>
		<Static Align="Right" Height="24" Id="Static7" Left="258" Style="sty_lb_form_basic" TabOrder="24" Text="무상보수기간" Top="168" VAlign="Middle" Width="92"></Static>
		<Static Align="Center" Border="None" Color="user7" Font="굴림,9" Height="20" Id="Static8" Left="458" TabOrder="25" Text="년" Top="170" VAlign="Middle" Width="37"></Static>
		<Static Align="Right" Height="24" Id="Static10" Left="594" Style="sty_lb_form_basic" TabOrder="27" Text="유상보수기간" Top="168" VAlign="Middle" Width="92"></Static>
		<Static Align="Center" Border="None" Color="user7" Font="굴림,9" Height="20" Id="Static11" Left="798" TabOrder="29" Text="년" Top="171" VAlign="Middle" Width="26"></Static>
		<Shape BKColor="user12" Bottom="218" Height="26" Id="Shape5" Left="23" LineColor="user13" Right="951" TabOrder="32" Top="192" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static13" Left="24" Style="sty_lb_form_basic" TabOrder="34" Text="계약업체" Top="193" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="CMPY_NAME" Height="20" Id="ed_contCmpy" Left="116" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="38" TabStop="FALSE" Top="195" UpperOnly="TRUE" Width="211"></Edit>
		<Static Align="Right" Height="24" Id="Static14" Left="341" Style="sty_lb_form_basic" TabOrder="42" Text="시행예산" Top="193" VAlign="Middle" Width="92"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="ORDR_TBDG" Height="20" Id="ed_ordrTbdg" Left="434" Mask="&apos;**********&apos;" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="46" TabStop="FALSE" Top="195" Width="147"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static15" Left="594" Style="sty_lb_form_basic" TabOrder="47" Text="계약금액" Top="193" VAlign="Middle" Width="92"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="CONT_PRIC" Height="20" Id="ed_contPric" Left="687" Mask="&apos;**********&apos;" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="48" TabStop="FALSE" Top="195" Width="147"></MaskEdit>
		<Shape BKColor="user12" Bottom="168" Height="26" Id="Shape7" Left="23" LineColor="user13" Right="951" TabOrder="49" Top="142" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static16" Left="24" Style="sty_lb_form_basic" TabOrder="50" Text="품목비고" Top="143" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" Column="ORIT_NOTE" Height="20" Id="ed_oritNote" Left="116" MaxLength="500" Style="sty_ipt_form" TabOrder="18" Top="145" Width="830"></Edit>
		<Image Height="20" Id="Image0" ImageID="form_bl_title_sub" Left="4" TabOrder="5" Top="35" Width="11"></Image>
		<Shape BKColor="user12" Bottom="93" Height="26" Id="Shape10" Left="23" LineColor="user13" Right="951" TabOrder="51" Top="67" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static18" Left="24" Style="sty_lb_form_basic" TabOrder="52" Text="프로젝트번호" Top="68" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="PSPID" Height="20" Id="ed_pspid" Left="117" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="53" TabStop="FALSE" Top="70" UpperOnly="TRUE" Width="99"></Edit>
		<Button Cursor="HAND" Height="18" Id="btn_pspid" ImageID="btn_icon_search" Left="217" OnClick="btn_pspid_OnClick" TabOrder="7" Top="71" Transparent="TRUE" Width="18"></Button>
		<Static Align="Right" Height="24" Id="Static3" Left="626" Style="sty_lb_form_basic" TabOrder="54" Text="시행예산항목" Top="68" VAlign="Middle" Width="76"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="EBDG_NAME" Height="20" Id="ed_ebdgPlan" Left="702" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="55" TabStop="FALSE" Top="70" UpperOnly="TRUE" Width="219"></Edit>
		<Button Cursor="HAND" Height="18" Id="btn_ebdgPlan" ImageID="btn_icon_search" Left="921" OnClick="btn_ebdgPlan_OnClick" TabOrder="8" Top="71" Transparent="TRUE" Width="18"></Button>
		<Static Align="Right" Height="24" Id="Static20" Left="240" Style="sty_lb_form_basic" TabOrder="56" Text="프로젝트명" Top="68" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="BSTNK" Height="20" Id="ed_bstnk" Left="333" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="57" TabStop="FALSE" Top="70" UpperOnly="TRUE" Width="291"></Edit>
		<Static Align="Right" Height="24" Id="Static21" Left="24" Style="sty_lb_form_basic" TabOrder="58" Text="공사명" Top="93" VAlign="Middle" Width="92"></Static>
		<Shape BKColor="user12" Bottom="318" Height="26" Id="Shape11" Left="23" LineColor="user13" Right="951" TabOrder="59" Top="292" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="343" Height="26" Id="Shape12" Left="23" LineColor="user13" Right="951" TabOrder="60" Top="317" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="367" Height="26" Id="Shape13" Left="23" LineColor="user13" Right="951" TabOrder="61" Top="341" Type="Rectangle" Width="928"></Shape>
		<Static Align="Center" Height="24" Id="Static1" Left="24" Style="sty_lb_form_basic" TabOrder="62" Text="선급금" Top="293" VAlign="Middle" Width="93"></Static>
		<Static Align="Right" Height="24" Id="Static2" Left="119" Style="sty_lb_form_basic" TabOrder="63" Text="지급비율" Top="293" VAlign="Middle" Width="59"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_0" Border="Flat" Column="PAYT_RATE" DecimalLen="3" DigitLen="5" Height="20" Id="ed_paytRate1" Left="180" Mask="&apos;***&apos;" NullValue="0" Readonly="TRUE" Style="sty_ipt_form" TabOrder="64" TabStop="FALSE" Top="295" Width="59"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static9" Left="264" Style="sty_lb_form_basic" TabOrder="65" Text="지불횟수" Top="293" VAlign="Middle" Width="60"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_0" Border="Flat" Column="PAYT_CUNT" DecimalLen="0" DigitLen="3" Height="20" Id="ed_paytCunt1" Left="325" Mask="&apos;***&apos;" NullValue="0" Style="sty_ipt_form" TabOrder="35" Top="295" TrimType="Both" Width="43"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static22" Left="388" Style="sty_lb_form_basic" TabOrder="66" Text="지불총액" Top="293" VAlign="Middle" Width="61"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_0" Border="Flat" Column="PAYT_TAMT" DecimalLen="0" DigitLen="15" Height="20" Id="ed_paytTamt1" Left="450" Mask="&apos;**********&apos;" NullValue="0" Style="sty_ipt_form_ind" TabOrder="36" Top="295" TrimType="Both" Width="118"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static23" Left="598" Style="sty_lb_form_basic" TabOrder="67" Text="지불조건" Top="293" VAlign="Middle" Width="61"></Static>
		<Edit BindDataset="ds_zfst0402_0" Border="Flat" Column="PAYT_TERM" Height="20" Id="ed_paytTerm1" Left="660" MaxLength="200" Style="sty_ipt_form" TabOrder="37" Top="295" Width="283"></Edit>
		<Shape BKColor="user12" Bottom="343" Height="26" Id="Shape14" Left="23" LineColor="user13" Right="951" TabOrder="68" Top="317" Type="Rectangle" Width="928"></Shape>
		<Static Align="Center" Height="24" Id="Static24" Left="24" Style="sty_lb_form_basic" TabOrder="69" Text="중도금" Top="318" VAlign="Middle" Width="93"></Static>
		<Static Align="Right" Height="24" Id="Static25" Left="119" Style="sty_lb_form_basic" TabOrder="70" Text="지급비율" Top="318" VAlign="Middle" Width="59"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_1" Border="Flat" Column="PAYT_RATE" DecimalLen="3" DigitLen="5" Height="20" Id="ed_paytRate2" Left="180" Mask="&apos;***&apos;" NullValue="0" Readonly="TRUE" Style="sty_ipt_form" TabOrder="71" TabStop="FALSE" Top="320" Width="59"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static26" Left="264" Style="sty_lb_form_basic" TabOrder="72" Text="지불횟수" Top="318" VAlign="Middle" Width="60"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_1" Border="Flat" Column="PAYT_CUNT" DecimalLen="0" DigitLen="3" Height="20" Id="ed_paytCunt2" Left="325" Mask="&apos;***&apos;" NullValue="0" Style="sty_ipt_form" TabOrder="39" Top="320" TrimType="Both" Width="43"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static27" Left="388" Style="sty_lb_form_basic" TabOrder="73" Text="지불총액" Top="318" VAlign="Middle" Width="61"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_1" Border="Flat" Column="PAYT_TAMT" DecimalLen="0" DigitLen="15" Height="20" Id="ed_paytTamt2" Left="450" Mask="&apos;**********&apos;" NullValue="0" Style="sty_ipt_form_ind" TabOrder="40" Top="320" TrimType="Both" Width="118"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static28" Left="598" Style="sty_lb_form_basic" TabOrder="74" Text="지불조건" Top="318" VAlign="Middle" Width="61"></Static>
		<Edit BindDataset="ds_zfst0402_1" Border="Flat" Column="PAYT_TERM" Height="20" Id="ed_paytTerm2" Left="660" MaxLength="200" Style="sty_ipt_form" TabOrder="41" Top="320" Width="283"></Edit>
		<Shape BKColor="user12" Bottom="368" Height="26" Id="Shape15" Left="23" LineColor="user13" Right="951" TabOrder="75" Top="342" Type="Rectangle" Width="928"></Shape>
		<Static Align="Center" Height="24" Id="Static29" Left="24" Style="sty_lb_form_basic" TabOrder="76" Text="잔&#32;&#32;&#32;금" Top="343" VAlign="Middle" Width="93"></Static>
		<Static Align="Right" Height="24" Id="Static30" Left="119" Style="sty_lb_form_basic" TabOrder="77" Text="지급비율" Top="343" VAlign="Middle" Width="59"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_2" Border="Flat" Column="PAYT_RATE" DecimalLen="3" DigitLen="5" Height="20" Id="ed_paytRate3" Left="180" Mask="&apos;***&apos;" NullValue="0" Readonly="TRUE" Style="sty_ipt_form" TabOrder="78" TabStop="FALSE" Top="345" Width="59"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static31" Left="264" Style="sty_lb_form_basic" TabOrder="79" Text="지불횟수" Top="343" VAlign="Middle" Width="60"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_2" Border="Flat" Column="PAYT_CUNT" DecimalLen="0" DigitLen="3" Height="20" Id="ed_paytCunt3" Left="325" Mask="&apos;***&apos;" NullValue="0" Style="sty_ipt_form" TabOrder="43" Top="345" TrimType="Both" Width="43"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static32" Left="388" Style="sty_lb_form_basic" TabOrder="80" Text="지불총액" Top="343" VAlign="Middle" Width="61"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0402_2" Border="Flat" Column="PAYT_TAMT" DecimalLen="0" DigitLen="15" Height="20" Id="ed_paytTamt3" Left="450" Mask="&apos;**********&apos;" NullValue="0" Style="sty_ipt_form_ind" TabOrder="44" Top="345" TrimType="Both" Width="118"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static33" Left="598" Style="sty_lb_form_basic" TabOrder="81" Text="지불조건" Top="343" VAlign="Middle" Width="61"></Static>
		<Edit BindDataset="ds_zfst0402_2" Border="Flat" Column="PAYT_TERM" Height="20" Id="ed_paytTerm3" Left="660" MaxLength="200" Style="sty_ipt_form" TabOrder="45" Top="345" Width="283"></Edit>
		<Grid AutoEnter="TRUE" AutoFitEndLine="Hide" BindDataset="ds_zfst0401" BkColor2="default" BoldHead="true" Border="Flat" Bottom="547" ColSizing="TRUE" Editable="TRUE" Enable="true" EndLineColor="default" HeadBorder="Flat" HeadHeight="25" Height="139" Id="grd_list" InputPanel="FALSE" Left="10" LineColor="user20" LineType="ExHORZ" OnHeadClick="grd_list_OnHeadClick" Right="965" RowHeight="20" Style="sty_grid" TabOrder="85" TabStop="true" Top="408" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="true" VLineColor="default" WheelScrollRow="1" Width="955">
			<contents>
				<format id="Default">
					<columns>
						<col width="0"/>
						<col width="200"/>
						<col width="100"/>
						<col width="100"/>
						<col width="100"/>
						<col width="150"/>
						<col width="150"/>
						<col width="120"/>
					</columns>
					<head>
						<cell col="0" display="text"/>
						<cell align="center" col="1" color="user21" display="text" font="굴림,9" text="하도급&#32;업체명" wordwrap="word"/>
						<cell col="2" color="user21" display="text" font="굴림,9" text="면허관계"/>
						<cell col="3" color="user21" display="text" font="굴림,9" text="산재보험"/>
						<cell col="4" color="user21" display="text" font="굴림,9" text="실적"/>
						<cell align="center" col="5" color="user21" display="text" font="굴림,9" text="업체&#32;견적가" wordwrap="word"/>
						<cell align="center" col="6" color="user21" display="text" font="굴림,9" text="Nego&#32;가격" wordwrap="word"/>
						<cell col="7" color="user21" display="text" font="굴림,9" text="Nego율"/>
					</head>
					<body>
						<cell align="center" bkcolor2="user22" col="0" display="text" edit="normal"/>
						<cell align="left" bkcolor2="user22" col="1" colid="CMPY_NAME" display="text" limit="35" TrimType="Both"/>
						<cell col="2" colid="LICS_RLTS" combocol="CODE" combodataset="ds_combo_a10" combotext="CODE_NAME" display="combo" edit="combo" Valign="Center"/>
						<cell col="3" colid="ACDT_ISRN" combocol="CODE" combodataset="ds_combo_a11" combotext="CODE_NAME" display="combo" edit="combo" Valign="Center"/>
						<cell col="4" colid="ATAL" combocol="CODE" combodataset="ds_combo_a12" combotext="CODE_NAME" display="combo" edit="combo" Valign="Center"/>
						<cell align="right" bkcolor2="user22" col="5" colid="ESMT_AMT" display="number" edit="number" expandsize="30" limit="15" LimitDec="0" Valign="Center"/>
						<cell align="right" bkcolor2="user22" col="6" colid="NAMT" display="number" edit="number" expandsize="30" limit="15" LimitDec="0" Valign="Center"/>
						<cell col="7" display="number" expr="ROUND(&#32;(&#32;1-&#32;ToNumber(&#32;NAMT&#32;)&#32;/&#32;ToNumber(&#32;ESMT_AMT&#32;)&#32;)&#32;*&#32;100&#32;,&#32;2&#32;)" Valign="Center"/>
					</body>
				</format>
			</contents>
		</Grid>
		<Shape BKColor="user12" Bottom="404" Height="22" Id="Shape16" Left="3" LineColor="user5" Right="973" TabOrder="86" Top="382" Type="Rectangle" Width="970"></Shape>
		<Static Color="user6" Font="굴림,9,Bold" Height="20" Id="Static34" Left="14" TabOrder="88" Text="발주&#32;품목&#32;하도급&#32;업체&#32;정보" Top="385" VAlign="Middle" Width="174"></Static>
		<Image Height="20" Id="Image2" ImageID="form_bl_title_sub" Left="3" TabOrder="87" Top="383" Width="11"></Image>
		<MaskEdit Align="Right" BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="RMNR_PRID" DecimalLen="0" DigitLen="3" Height="20" Id="ed_rmnrPrid" Left="687" Style="sty_ipt_form" TabOrder="26" Top="170" TrimType="Both" Width="108"></MaskEdit>
		<MaskEdit Align="Right" BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="FRPI_PRID" DecimalLen="0" DigitLen="3" Height="20" Id="ed_frpiPrid" Left="351" Style="sty_ipt_form" TabOrder="23" Top="170" TrimType="Both" Width="108"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static35" Left="626" Style="sty_lb_form_basic" TabOrder="89" Text="발주구분" Top="93" VAlign="Middle" Width="76"></Static>
		<Combo BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" CodeColumn="CODE" Column="ORDR_CLSS" DataColumn="CODE_NAME" Height="20" Id="cb_ordrClas" INDEX="0" InnerDataset="ds_combo_a08" Left="702" Style="sty_ipt_form_ind" TabOrder="12" Top="94" Width="132"></Combo>
		<Static Align="Right" Height="20" Id="Static36" Left="372" Style="sty_lb_search" TabOrder="90" Text="문서상태" Top="6" VAlign="Middle" Width="60"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" BorderColor="user1" Column="ORDR_STAT_NAME" Height="20" Id="ed_ordrStat" Left="432" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="91" Top="6" UpperOnly="TRUE" Width="131"></Edit>
		<Shape BKColor="user12" Bottom="243" Height="26" Id="Shape17" Left="23" LineColor="user13" Right="951" TabOrder="92" Top="217" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static17" Left="24" Style="sty_lb_form_basic" TabOrder="82" Text="발주담당자" Top="243" VAlign="Middle" Width="93"></Static>
		<Static Align="Right" Height="48" Id="Static12" Left="216" Style="sty_lb_form_basic" TabOrder="84" Text="기타사항" Top="244" VAlign="Middle" Width="92"></Static>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_mngrReg" ImageID="btn_sub_05" Left="30" LeftMargin="12" OnClick="btn_mngrReg_OnClick" Style="sty_btn" TabOrder="31" Text="담당자등록" Top="269" Transparent="TRUE" Width="89"></Button>
		<Edit BindDataset="ds_zfst0400" Border="Flat" BorderColor="user13" Column="MNGR_NAME" Height="20" Id="ed_mngr" Left="118" MaxLength="10" Style="sty_ipt_form_ind" TabOrder="83" TabStop="FALSE" Top="246" UpperOnly="TRUE" Width="75"></Edit>
		<Button Cursor="HAND" Height="18" Id="btn_mngr" ImageID="btn_icon_search" Left="196" OnClick="btn_mngr_OnClick" TabOrder="30" Top="247" Transparent="TRUE" Width="18"></Button>
		<Static Align="Right" Height="24" Id="Static37" Left="24" Style="sty_lb_form_basic" TabOrder="93" Text="수금조건" Top="218" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0400" Border="Flat" Column="CLMY_CNDT" Height="20" Id="ed_clmyCndt" Left="117" MaxLength="200" Style="sty_ipt_form" TabOrder="28" Top="220" Width="830"></Edit>
		<Button Cursor="HAND" Height="20" Id="btn_rowAdd" ImageID="btn_icon_plus" Left="849" LeftMargin="12" OnClick="btn_rowAdd_OnClick" Style="sty_btn" TabOrder="96" Top="382" Transparent="TRUE" Width="22"></Button>
		<Button Cursor="HAND" Height="20" Id="btn_rowDel" ImageID="btn_icon_minus" Left="873" LeftMargin="12" OnClick="btn_rowDel_OnClick" Style="sty_btn" TabOrder="95" Top="382" Transparent="TRUE" Width="22"></Button>
		<Button ButtonStyle="TRUE" Cursor="HAND" Height="20" Id="btn_cmpySelect" ImageID="btn_sub_04" Left="898" LeftMargin="12" OnClick="btn_cmpySelect_OnClick" Style="sty_btn" TabOrder="94" Text="업체선정" Top="382" Transparent="TRUE" Width="76"></Button>
		<Edit BindDataset="ds_zfst0400" Border="Flat" BorderColor="user1" Column="APPR_STAT_NAME" Height="20" Id="Edit1" Left="236" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="98" Top="6" UpperOnly="TRUE" Width="131"></Edit>
		<Static Align="Right" Height="20" Id="Static38" Left="176" Style="sty_lb_search" TabOrder="97" Text="결재상태" Top="6" VAlign="Middle" Width="60"></Static>
		<Static Height="20" Id="Static39" Left="242" TabOrder="99" Text="%" Top="295" VAlign="Middle" Width="15"></Static>
		<Static Height="20" Id="Static40" Left="242" TabOrder="100" Text="%" Top="320" VAlign="Middle" Width="15"></Static>
		<Static Height="20" Id="Static41" Left="242" TabOrder="101" Text="%" Top="345" VAlign="Middle" Width="15"></Static>
	</Form>
	<Script><![CDATA[/*
 ******************************************************************************************
 * 기      능   : 사양별 템플릿 특성값 지정
 * 작  성  자   : 박수근
 * 작성  일자   : 20116.11.01
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
#include "LIB::commons.js";           // 공통 스크립트
#include "LIB::fs_common.js";         // 물류서비스 공통 스크립트

//=========================================================================================
// [ PART 1 ]
// Form에서 사용될 전역변수를 선언
// FORM에서 사용되는 전역변수는 대문자로 작성하며, F_XXX 의 형태를 갖도록 한다.
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form Loading / Unloading 시 작업 정의
//=========================================================================================
function fn_OnLoadCompleted(obj) {
    gfn_initForm(true);             // Form 로드 이벤트 맨 첫줄에 기술
    fn_init_form();             // 폼 초기화
}

/********************************************************************************
* 기      능   : form UnloadCompleted
********************************************************************************/
function fn_OnUnloadCompleted(obj) {
    return gfn_isFormUnload(obj);
}

/********************************************************************************
* 기      능   : 폼 초기화
********************************************************************************/
function fn_init_form() {
	gfn_initDs( ds_cond , true );
    // 공용코드 콤보 데이터 셑을 가져온다.
	var codeArray =
		[
			 "A08:ds_combo_a08"
			,"A09:ds_combo_a09"
			,"A10:ds_combo_a10"
			,"A11:ds_combo_a11"
			,"A12:ds_combo_a12"
		];
    gn_fsComboDataSet(codeArray); 
    
    if ( FS0402001A.IsExistVariable("pOrdrNumb", "Local") )
    {
		ds_cond.SetColumn(0, "ORDR_NUMB", pOrdrNumb);
		SetTimer(1, 300);
    }
    else
    {
		fn_input();
    }
}

/********************************************************************************
* 기      능   : 초기 조회
********************************************************************************/
function fn_OnTimer(obj,nEventID)
{
	KillTimer(nEventID);
	fn_loaddata();
}

/********************************************************************************
* 기      능   : 승인 10
********************************************************************************/
function fn_approval() {
    var aDocNumb = ds_zfst0400.GetColumn(0, "ORDR_NUMB"); 
    if ( length( aDocNumb +"" ) < 1 )
    {
		gfn_openMsgWin("발주가 생성되지 않았습니다.", "W", "A", "");
		return;
    }
    if ( ds_zfst0400.GetUpdate() || ds_zfst0401.GetUpdate() || ds_zfst0402.GetUpdate() )
    {
		gfn_openMsgWin("변경사항이 저장되지 않았습니다.", "W", "A", "");
		return;
    }
	gfn_initDs( ds_doc_appr, true );
	ds_doc_appr.SetColumn(0, "ADOC_CLAS", "PS" );
	ds_doc_appr.SetColumn(0, "ADOC_NUMB", aDocNumb );
	ds_doc_appr.SetColumn(0, "ADOC_NTIM", 1);
	tit_clearActionInfo();
	tit_addSingleActionInfo("fs01:FS_COM0701_S1"); 
	tit_callService(
					""
				   ,""
				   ,"ds_cond=ds_doc_appr"
				   ,"ds_zfst0103=ds_zfst0103"
				   ,""
				   ,"fn_afterApproval"
				   ,"true"
				   ,"true"
				   ,"false"
				   );
}
function fn_afterApproval(errCode, errMsg)
{
	if ( gfn_barMsgSearch(ds_zfst0103.GetRowCount(), errCode) )  return;
	var aRtn = gfn_docApprInfo(ds_zfst0103);

	if( aRtn[2] != G_USER_ID ) 
	{
		gfn_openMsgWin("승인 권한이 없습니다.", "W", "A", "");
		return;
	}
	if( gfn_showConfirm("승인 하시겠습니까?") ) {
		gfn_initDs( ds_doc_appr, true );
		
		ds_doc_appr.SetColumn(0, "ADOC_CLAS", "PS" );
		ds_doc_appr.SetColumn(0, "ADOC_NUMB", ds_zfst0400.GetColumn(0, "ORDR_NUMB") );
		ds_doc_appr.SetColumn(0, "ADOC_NTIM", 1);
		ds_doc_appr.SetColumn(0, "APPR_STAT", aRtn[1]);  
		
		tit_clearActionInfo();
		tit_addSingleActionInfo("fs01:FS_COM0701_M2");  // 결재 테이블 상태값 처리
		tit_addSingleActionInfo("fs01:FS_COM0701_U5");  // 견적 문서 상태값 처리
		tit_callService(
						""
					   ,""
					   ,"ds_doc_appr=ds_doc_appr ds_doc_stat=ds_doc_appr"
					   ,""
					   ,""
					   ,"fn_postApproval"
					   ,"true"
					   ,"true"
					   ,"false"
					   );
    }
}
function fn_postApproval(errCode, errMsg)
{
	if ( gfn_barMsgSearch(0, errCode) )  return;
	gfn_openMsgWin("결재 되었습니다.", "I", "A", "");
	fn_loaddata();
}

/********************************************************************************
* 기      능   : 기안 16
********************************************************************************/
function fn_draft()
{
    var aDocClas = "PS";
    var aDocNumb = ds_zfst0400.GetColumn(0, "ORDR_NUMB");
    var aDocNtim = "1";
    if ( length( aDocNumb ) < 1 )
    {
		gfn_openMsgWin("발주서가 생성되지 않았습니다.", "W", "A", "");
		return;
    }
    if ( ds_zfst0400.GetUpdate() || ds_zfst0401.GetUpdate() || ds_zfst0402.GetUpdate() )
    {
		gfn_openMsgWin("변경사항이 저장되지 않았습니다.", "W", "A", "");
		return;
    }
    var arg="aDocClas="+ Quote(aDocClas) +
			" aDocNumb="+Quote(aDocNumb) +
			" aDocNtim="+Quote(aDocNtim) +
			" disableDecide=true";
    var aRtn = gfn_openPopup("FS_COM0701", true, arg);

    if (length(aRtn+"") > 0)
    {
		fn_loaddata();
    }
}

/********************************************************************************
* 기      능   : 입력
********************************************************************************/
function fn_input() {
	fn_initdata(true);
	fn_formControl();
}

/********************************************************************************
* 기      능   : 삭제
********************************************************************************/
function fn_delete() {
	if ( ds_zfst0400.GetColumn(0, "ORDR_STAT") == "420" || ds_zfst0400.GetColumn(0, "ORDR_STAT") == "430" )
	{
		if ( !gfn_openMsgWin("발주정보를 삭제 하시겠습니까?","I","C","") ) return;
		if ( trim( ds_zfst0400.GetColumn(0, "ORDR_NUMB") ) == null )
		{
			fn_input();
		}
		else
		{
			tit_clearActionInfo();
			tit_addSingleActionInfo("fs04:FS0402001A_D3",);
			tit_addSingleActionInfo("fs04:FS0402001A_D2");
			tit_addSingleActionInfo("fs04:FS0402001A_D1");
			tit_callService(
							""
						   ,""
						   ,"ds_zfst0400=ds_zfst0400 ds_zfst0401=ds_zfst0401 ds_zfst0402=ds_zfst0402"
						   ,""
						   ,""
						   ,"fn_afterDelete"
						   ,"true"
						   ,"true"
						   ,"false"
						   );
		}
	}
	else
	{
		gfn_openMsgWin("결재가 진행중이거나 승인된 발주건은 삭제할 수 없습니다.","W","A","");
	}
}
function fn_afterDelete(errCode, errMsg)
{
	if ( gfn_barMsgDelete(errCode) ) return;
	fn_input();
}

/********************************************************************************
* 기      능   : 저장
********************************************************************************/
function fn_save() {
	if ( gfn_toString( ed_pspid.Text ) == "" )
	{
		gfn_openMsgWin("발주 프로젝트를 선택해야 합니다.","W","A","");
		btn_pspid.Click();
		return;
	}
	if ( gfn_toString( ed_ebdgPlan.Text ) == "" )
	{
		gfn_openMsgWin("시행예산 항목을 선택해야 합니다.", "W", "A", "" );
		btn_ebdgPlan.Click();
		return;
	}
	if ( gfn_toString( ed_post1.Text ) == "" )
	{
		gfn_openMsgWin("공사명을 입력해야 합니다", "W", "A", "" );
		ed_post1.SetFocus();
		return;
	}
	if ( cb_ordrClas.Value == "" ) 
	{
		gfn_openMsgWin("발주구분을 선택해야합니다.", "W", "A", "" );
		cb_ordrClas.SetFocus();
		return;
	}
	if ( gfn_toString( ed_oritName.Text ) == "" )
	{
		gfn_openMsgWin("품목명을 입력해야 합니다.", "W", "A", "");
		ed_oritName.SetFocus();
		return;
	}
	if ( gfn_toString( ed_dliv.Text ) == "" )
	{
		gfn_openMsgWin("납기를 입력해야 합니다.", "W", "A", "");
		ed_dliv.SetFocus();
		return;
	}
	if ( cb_mitcPrcs.Value == "010" && gfn_toString( ed_rmnrPrid.Value ) == "" )
	{
		gfn_openMsgWin("유상보수기간을 입력해야 합니다.", "W", "A", "");
		ed_rmnrPrid.SetFocus();
		return;
	}
	if ( cb_mitcPrcs.Value == "020" && gfn_toString( ed_frpiPrid.Value ) == "" )
	{
		gfn_openMsgWin("무상보수기간을 입력해야 합니다.", "W", "A", "");
		ed_frpiPrid.SetFocus();
		return;
	}
	if ( gfn_toString( ed_contCmpy.Text ) == "" )
	{
		gfn_openMsgWin("계약업체를 선택해야 합니다.", "W", "A", "");
		ed_contCmpy.SetFocus();
		return;
	}
	if ( gfn_toString( ed_mngr.Text ) == "" )
	{
		gfn_openMsgWin("담당자를 선택해야 합니다.", "W", "A", "");
		ed_mngr.SetFocus();
		return;
	}

	if ( ( parseFloat( ds_zfst0402.GetColumn(0, "PAYT_TAMT") ) + parseFloat( ds_zfst0402.GetColumn(1, "PAYT_TAMT") ) + parseFloat( ds_zfst0402.GetColumn(2, "PAYT_TAMT") ) ) != parseFloat( ds_zfst0400.GetColumn(0, "CONT_PRIC") ) )
	{
		gfn_openMsgWin("대금지불계획의 총금액의 합이 계약금액과 다릅니다.", "W", "A", "");
		ed_paytTamt1.SetFocus();
		return;
	}
	var nRowCount = ds_zfst0401.GetRowCount();
	for( var iRow = 0; iRow < nRowCount; iRow++ )
	{
		if ( gfn_toString( ds_zfst0401.GetColumn(iRow, "CMPY_NAME") ) == "" )
		{
			gfn_openMsgWin("업체명을 입력해야 합니다.", "W", "A", "");
			grd_list.SetFocus();
			return;
		}
		if ( gfn_toString( ds_zfst0401.GetColumn(iRow, "LICS_RLTS") ) == "" )
		{
			gfn_openMsgWin("면허관계를 선택해야 합니다.", "W", "A", "");
			grd_list.SetFocus();
			return;
		}
		if ( gfn_toString( ds_zfst0401.GetColumn(iRow, "ACDT_ISRN") ) == "" )
		{
			gfn_openMsgWin("산재보험을 선택해야 합니다.", "W", "A", "");
			grd_list.SetFocus();
			return;
		}
		if ( gfn_toString( ds_zfst0401.GetColumn(iRow, "ATAL") ) == "" )
		{
			gfn_openMsgWin("실적을 선택해야 합니다.", "W", "A", "");
			grd_list.SetFocus();
			return;
		}
		if ( parseFloat( ds_zfst0401.GetColumn(iRow, "ESMT_AMT") ) <= 0 )
		{
			gfn_openMsgWin("견적금액을 입력해야 합니다.", "W", "A", "");
			grd_list.SetFocus();
			return;
		}
		if ( parseFloat( ds_zfst0401.GetColumn(iRow, "NAMT") ) <= 0 )
		{
			gfn_openMsgWin("네고금액을 입력해야 합니다.", "W", "A", "");
			grd_list.SetFocus();
			return;
		}
	}
	gfn_initDs( ds_zfst0302 , true );
	ds_zfst0302.SetColumn(0, "OCNT_NUMB", ds_zfst0400.GetColumn(0, "OCNT_NUMB") ); 
	ds_zfst0302.SetColumn(0, "EBDG_ITSQ", ds_zfst0400.GetColumn(0, "EBDG_ITSQ") );
	tit_clearActionInfo();
	tit_addSearchActionInfo("fs04:FS0402001A_S5");
	tit_callService(
					""
				   ,""
				   ,"ds_zfst0302=ds_zfst0302"
				   ,"ds_zfst0302_amt=ds_zfst0302_amt"
				   ,""
				   ,"fn_preSave"
				   ,"true"
				   ,"true"
				   ,"false"
				   );
}
function fn_preSave(errCode, errMsg) {
	if ( errCode != 0 ) {
		gfn_showMsg( errMsg );
		return;
	}

	if ( parseFloat( ds_zfst0302_amt.GetColumn(0, "REMN_AMT") ) - parseFloat( ds_zfst0400.GetColumn(0, "CONT_PRIC") ) < 0 )
	{
		gfn_openMsgWin("계약금액이 예산금액보다 큽니다.", "W", "A", "");
		return;
	}
	if ( !gfn_showConfirm("CI00008") ) return;
	
	
	
	var cmd = iif( gfn_toString( ed_ordrNumb.Text ) == "" , "I", "U" ); 
	gfn_initDs( ds_cond , true );
	ds_cond.SetColumn(0, "ACTION_CMD", cmd); 
	
	tit_clearActionInfo();
	tit_addSearchActionInfo("fs04:FS0402001A_S4", true);
	tit_addSingleActionInfo("fs04:FS0402001A_I1");
	tit_addSingleActionInfo("fs04:FS0402001A_D4");
	tit_addMultiActionInfo("fs04:FS0402001A_I2");
	tit_addMultiActionInfo("fs04:FS0402001A_I3");
	tit_callService(
					""
				   ,""
				   ,"ds_cond=ds_cond ds_zfst0400=ds_zfst0400 ds_zfst0401_d=ds_zfst0401 ds_zfst0401=ds_zfst0401 ds_zfst0402=ds_zfst0402"
				   ,"ds_zfst0400_key=ds_zfst0400_key"
				   ,""
				   ,"fn_afterSave"
				   ,"true"
				   ,"true"
				   ,"false"
				   );
}
function fn_afterSave(errCode, errMsg)
{
	if (gfn_barMsgSave(errCode)) return;
	ds_cond.SetColumn(0, "ORDR_NUMB", ds_zfst0400_key.GetColumn(0, "ORDR_NUMB") );
	fn_loaddata();
}
/********************************************************************************
* 기      능   : 출력
********************************************************************************/
function fn_print() {
}

/********************************************************************************
* 기      능   : 반송
********************************************************************************/
function fn_sendback(){
	var sApprStat = ds_zfst0400.GetColumn(0, "APPR_STAT");
	var sOrdrNumb = ds_zfst0400.GetColumn(0, "ORDR_NUMB");
	if ( length( trim( sOrdrNumb + "" ) ) < 1 ) return;
	if ( sApprStat == '190' || sApprStat == '290' )
	{
		if ( gfn_openMsgWin("발주서를 반송하시겠습니까?", "I", "C", "") )
		{
			var arg = " aDocClas='PS' aDocNumb=" + Quote( sOrdrNumb ) + " aDocNtim=1";
			var aRtn = gfn_openPopup("FS_COM0703", true, arg);
			if ( length( aRtn + "" ) > 0 )
			{
				 ds_cond.SetColumn(0, "ORDR_NUMB", aRtn[0]); 
				 fn_loaddata();
			}
		}
	}
}

/********************************************************************************
* 기      능   : 닫기
********************************************************************************/
function fn_close() {
	gfn_formClose( ds_zfst0400.GetUpdate() || ds_zfst0401.GetUpdate() || ds_zfst0402.GetUpdate() );
}

/********************************************************************************
* 기      능   : 데이터셋 초기화
********************************************************************************/
function fn_initdata(isAppend){
	ds_zfst0400.ClearData();
	if (isAppend) 
	{
		ds_zfst0400.AddRow();
		ds_zfst0400.SetColumn(0, "WAERK", "KRW");
		ds_zfst0400.SetColumn(0, "ORDR_STAT", "430");
		ds_zfst0400.SetColumn(0, "ORDR_STAT_NAME", "발주작성중");
		ds_zfst0400.SetColumn(0, "MITC_PRCS", "");
		ds_zfst0400.SetColumn(0, "ORDR_CLSS", "");
		ds_zfst0400.SetColumn(0, "APPR_STAT", "110");
		ds_zfst0400.SetColumn(0, "APPR_STAT_NAME", "작성중");
		ds_zfst0400.SetColumn(0, "DRAF", G_USER_ID);
		ds_zfst0400.SetColumn(0, "ADIT", "");
		ds_zfst0400.SetColumn(0, "APPR", "");
		cb_mitcPrcs_OnChanged(cb_mitcPrcs);
	}
	ds_zfst0400.ApplyChange();
	
	ds_zfst0401.ClearData();
	ds_zfst0401.ApplyChange();
	
	ds_zfst0402.ClearData();
	if (isAppend) {
		ds_zfst0402.AddRow();
		ds_zfst0402.SetColumn(0, "PMPL_SEQN", 0);
		ds_zfst0402.SetColumn(0, "PAYT_CLSS", "100");
		ds_zfst0402.AddRow();
		ds_zfst0402.SetColumn(1, "PMPL_SEQN", 1);
		ds_zfst0402.SetColumn(1, "PAYT_CLSS", "500");
		ds_zfst0402.AddRow();
		ds_zfst0402.SetColumn(2, "PMPL_SEQN", 2);
		ds_zfst0402.SetColumn(2, "PAYT_CLSS", "900");
	}
	ds_zfst0402.ApplyChange();
	ds_zfst0402_0.RecalcFilter();
	ds_zfst0402_1.RecalcFilter();
	ds_zfst0402_2.RecalcFilter();
}

/********************************************************************************
* 기      능   : 데이터 로드
********************************************************************************/
function fn_loaddata(){
	tit_clearActionInfo();
	tit_addSearchActionInfo("fs04:FS0402001A_S1");
	tit_addSearchActionInfo("fs04:FS0402001A_S2");
	tit_addSearchActionInfo("fs04:FS0402001A_S3");
	tit_callService(
		  ""
		, ""
		, "ds_cond=ds_cond"
		, "ds_zfst0400=ds_zfst0400 ds_zfst0401=ds_zfst0401 ds_zfst0402=ds_zfst0402"
		, ""
		, "fn_afterLoaddata"
		, true
		, true
		, false);
}
function fn_afterLoaddata(errCode, errMsg)
{
	var nRowCount = ds_zfst0400.GetRowCount();
	if ( gfn_barMsgSearch(nRowCount, errCode) ) return;
	fn_formControl();
}
/********************************************************************************
* 기      능   : 화면 제어
********************************************************************************/
function fn_formControl()
{ 
	btn_ordrNumb.Enable = false;
	btn_pspid.Enable = false;
	btn_ebdgPlan.Enable = false;
	btn_mngr.Enable = false;
	btn_rowAdd.Enable = false;
	btn_rowDel.Enable = false;
	btn_cmpySelect.Enable =false;
	
	ed_bstnk.Readonly = true;
	ed_post1.Readonly = true;
	ed_dliv.Readonly = true;
	ed_oritNote.Readonly = true;
	ed_frpiPrid.Readonly = true;
	ed_rmnrPrid.Readonly = true;
	ed_oritNote.Readonly = true;
	ed_clmyCndt.Readonly = true;
	ta_note.Readonly = true;
	//ed_paytRate1.Readonly = true;
	ed_paytCunt1.Readonly = true;
	ed_paytTamt1.Readonly = true;
	ed_paytTerm1.Readonly = true;
	//ed_paytRate2.Readonly = true;
	ed_paytCunt2.Readonly = true;
	ed_paytTamt2.Readonly = true;
	ed_paytTerm2.Readonly = true;
	//ed_paytRate3.Readonly = true;
	ed_paytCunt3.Readonly = true;
	ed_paytTamt3.Readonly = true;
	ed_paytTerm3.Readonly = true;
	cb_mitcPrcs.Enable = false;
	
	ed_ordrTbdg.Type="String";
	ed_contPric.Type="String";
	ed_paytRate1.Type="String";
	ed_paytCunt1.Type="String";
	ed_paytTamt1.Type="String";
	ed_paytRate2.Type="String";
	ed_paytCunt2.Type="String";
	ed_paytTamt2.Type="String";
	ed_paytRate3.Type="String";
	ed_paytCunt3.Type="String";
	ed_paytTamt3.Type="String";
	
	btn_approval.Enable = false;        // 승인
	btn_draft.Enable = false;           // 기안
	btn_input.Enable = false;         // 입력
	btn_delete.Enable = false;          // 삭제
	btn_save.Enable = false;            // 저장
	btn_print.Enable = false;           // 출력
	btn_sendback.Enable = false;        // 반송
	
	grd_list.Editable = false;
	grd_list.SetCellProp("Body", grd_list.GetBindCellIndex("body","ESMT_AMT"), "Display", "null");
	grd_list.SetCellProp("Body", grd_list.GetBindCellIndex("body","NAMT"), "Display", "null");
	
    if( G_DPT1 == "CD" ) {
		grd_list.SetCellProp("Body", grd_list.GetBindCellIndex("body","ESMT_AMT"), "Display", "Number");
		grd_list.SetCellProp("Body", grd_list.GetBindCellIndex("body","NAMT"), "Display", "Number");
		ed_ordrTbdg.Type="Number";
		ed_contPric.Type="Number";
		ed_paytRate1.Type="Number";
		ed_paytCunt1.Type="Number";
		ed_paytTamt1.Type="Number";
		ed_paytRate2.Type="Number";
		ed_paytCunt2.Type="Number";
		ed_paytTamt2.Type="Number";
		ed_paytRate3.Type="Number";
		ed_paytCunt3.Type="Number";
		ed_paytTamt3.Type="Number";
		
		btn_print.Enable = true;           // 출력
		
		var sOrdrStat = ds_zfst0400.GetColumn(0, "ORDR_STAT");
		var sApprStat = ds_zfst0400.GetColumn(0, "APPR_STAT");
		var sDraf = ds_zfst0400.GetColumn(0, "DRAF");
		var sAdit = ds_zfst0400.GetColumn(0, "ADIT");
		var sAppr = ds_zfst0400.GetColumn(0, "APPR"); 
		
		if ( sOrdrStat == "420" || sOrdrStat == "430" )
		{
			if ( sDraf == G_USER_ID )
			{
				grd_list.Editable = true;
				btn_ordrNumb.Enable = true;
				btn_pspid.Enable = true;
				btn_ebdgPlan.Enable = true;
				btn_mngr.Enable = true;
				btn_rowAdd.Enable = true;
				btn_rowDel.Enable = true;
				btn_cmpySelect.Enable =true; 
				
				ed_bstnk.Readonly = false;
				ed_post1.Readonly = false;
				ed_dliv.Readonly = false;
				ed_oritNote.Readonly = false;
				ed_frpiPrid.Readonly = false;
				ed_rmnrPrid.Readonly = false;
				ed_oritNote.Readonly = false;
				ed_clmyCndt.Readonly = false;
				ta_note.Readonly = false;
				//ed_paytRate1.Readonly = false;
				ed_paytCunt1.Readonly = false;
				ed_paytTamt1.Readonly = false;
				ed_paytTerm1.Readonly = false;
				//ed_paytRate2.Readonly = false;
				ed_paytCunt2.Readonly = false;
				ed_paytTamt2.Readonly = false;
				ed_paytTerm2.Readonly = false;
				//ed_paytRate3.Readonly = false;
				ed_paytCunt3.Readonly = false;
				ed_paytTamt3.Readonly = false;
				ed_paytTerm3.Readonly = false;
				
				cb_mitcPrcs.Enable = true;
				
				if ( length( ds_zfst0400.GetColumn(0, "ORDR_NUMB") ) > 0 ) btn_draft.Enable = true;           // 기안
				btn_input.Enable = true;         // 입력
				btn_delete.Enable = true;          // 삭제
				btn_save.Enable = true;            // 저장
			}
		}
		else if ( sOrdrStat == "440" && ( sAdit == G_USER_ID || sAppr == G_USER_ID ) )
		{
			btn_approval.Enable = true;        // 승인
			btn_sendback.Enable = true;        // 반송
		}
    }
}

/********************************************************************************
* 기      능   : 발주번호 조회 팝업을 호출한다.
********************************************************************************/
function btn_ordrNumb_OnClick(obj)
{
    var arg="";
    var aRtn = gfn_openPopup("FS0401001B", true, arg);
    if ( length( aRtn ) > 0 )
    {
		ed_ordrNumb.Text = aRtn[0];
		ds_cond.SetColumn(0, "ORDR_NUMB", aRtn[0] );
		fn_loaddata();
    }
}
/********************************************************************************
* 기      능   : 프로젝트번호 조회 팝업을 호출한다.
********************************************************************************/
function btn_pspid_OnClick(obj)
{
    var arg = " pOrdrType='ALL' pOcntStat='250'";
    var aRtn = gfn_openPopup("FS0302001C", true, arg);
	if ( length( aRtn ) > 0 )
	{
		ed_pspid.Text = aRtn[3];
		ed_bstnk.Text = aRtn[4];
		ds_zfst0400.SetColumn(0, "OCNT_NUMB", aRtn[0]);
	}
}

/********************************************************************************
* 기      능   : 담당자등록 팝업을 호출한다.
********************************************************************************/
function btn_mngrReg_OnClick(obj)
{
	var arg = "adocClas="+quote("PS")+" adocNumb ="+quote(ds_zfst0400.GetColumn(0, "ORDR_NUMB"));
	gfn_openPopup("FS0103001B", true, arg);
}

/********************************************************************************
* 기      능   : 예산 항목 팝업을 호출한다.
********************************************************************************/
function btn_ebdgPlan_OnClick(obj)
{
	var ocntNumb = ds_zfst0400.GetColumn(0, "OCNT_NUMB");
	if ( length( ocntNumb ) < 1 )
	{
		gfn_openMsgWin("프로젝트를 선택해야 합니다.","I","A","");
		btn_pspid_OnClick(btn_pspid);
		return;
	}
    var arg = " pOcntNumb="+Quote( ds_zfst0400.GetColumn(0, "OCNT_NUMB") );
    var aRtn = gfn_openPopup("FS0302002C", true, arg);
    if ( length( aRtn ) > 0 )
    {
		ds_zfst0400.SetColumn(0, "EBDG_NAME", aRtn[4] );
		ds_zfst0400.SetColumn(0, "EBDG_MGSQ", aRtn[1] );
		ds_zfst0400.SetColumn(0, "EBDG_ITSQ", aRtn[2] );
		ds_zfst0400.SetColumn(0, "EBDG_NAME", aRtn[4] );
		ds_zfst0400.SetColumn(0, "ORDR_TBDG", aRtn[5] );
		var fRow = ds_combo_a08.FindRow("EXTN_CODE1", substr( aRtn[3] , 0, 6 ));
		if (fRow > 0) cb_ordrClas.Index = fRow;
		if ( ds_zfst0302_amt.GetRowCount() < 1 ) ds_zfst0302_amt.AddRow();
		ds_zfst0302_amt.SetColumn(0, "EBDG_AMT", aRtn[5] );
		ds_zfst0302_amt.SetColumn(0, "SPEN_AMT", aRtn[6] );
		ds_zfst0302_amt.SetColumn(0, "REMN_AMT", aRtn[7] );
    }
}

/********************************************************************************
* 기      능   : 담당자 팝업을 호출한다.
********************************************************************************/
function btn_mngr_OnClick(obj)
{
	var arg="";
	var arr=null;
    arr = gfn_openPopup("FS_COM0801", true, arg); 
    if( length(arr) > 0 )  {
        ds_zfst0400.SetColumn(0, "MNGR", arr[0]);
        ds_zfst0400.SetColumn(0, "MNGR_NAME", arr[1]);
    } 
}

/********************************************************************************
* 기      능   : 업체 선정
********************************************************************************/
function btn_cmpySelect_OnClick(obj)
{
	var iRow = ds_zfst0401.GetRowPos();
	ds_zfst0400.SetColumn(0, "CONT_CMPY", ds_zfst0401.GetColumn(iRow, "CMPY_CODE")); 
	ds_zfst0400.SetColumn(0, "CMPY_NAME", ds_zfst0401.GetColumn(iRow, "CMPY_NAME")); 
	ds_zfst0400.SetColumn(0, "CONT_PRIC", ds_zfst0401.GetColumn(iRow, "NAMT")); 

	var nRowCount = ds_zfst0402.GetRowCount();
	for (iRow = 0; iRow < nRowCount; iRow++ )
	{
		ds_zfst0402_OnColumnChanged(ds_zfst0402,iRow,"PAYT_TAMT", 0, ds_zfst0402.GetColumn(iRow,"PAYT_TAMT") );
	}
}

/********************************************************************************
* 기      능   : 업체 추가
********************************************************************************/
function btn_rowAdd_OnClick(obj)
{
	if ( ds_zfst0401.GetRowCount() >= 4 )
	{
		gfn_openMsgWin("최대 4개 업체까지 등록 가능합니다.","I","A","");
		return;
	}
	var arg="";
	var arr=null;
    arr = gfn_openPopup("FS_COM0301", true, arg); 
    if( length(arr) > 0 )  {
		var iRow = ds_zfst0401.AppendRow();
        ds_zfst0401.SetColumn(iRow, "CMPY_CODE", arr[0]);
        ds_zfst0401.SetColumn(iRow, "CMPY_NAME", iif( gfn_toString( arr[0] ) == "", "", arr[1] ) );
		ds_zfst0401.SetColumn(iRow, "LICS_RLTS", "010");
		ds_zfst0401.SetColumn(iRow, "ACDT_ISRN", "010");
		ds_zfst0401.SetColumn(iRow, "ATAL", "010");
		ds_zfst0401.SetColumn(iRow, "WAERK", "KRW");
		ds_zfst0401.SetColumn(iRow, "ESMT_AMT", 0);
		ds_zfst0401.SetColumn(iRow, "NAMT", 0);
    } 
}

/********************************************************************************
* 기      능   : 업체 삭제
********************************************************************************/
function btn_rowDel_OnClick(obj)
{
	var iRow = ds_zfst0401.GetRowPos();
	var sCmpyCode = ds_zfst0401.GetColumn(iRow, "CMPY_CODE");
	if ( sCmpyCode == ds_zfst0400.GetColumn(0, "CONT_CMPY") )
	{
		ds_zfst0400.SetColumn(0, "CONT_CMPY", ""); 
		ds_zfst0400.SetColumn(0, "CONT_CMPY_NAME", ""); 
		ds_zfst0400.SetColumn(0, "CONT_PRIC", 0); 
	}
	ds_zfst0401.DeleteRow(iRow);
}


/********************************************************************************
* 기      능   : 유무상 구분 변경시
********************************************************************************/
function cb_mitcPrcs_OnChanged(obj,strCode,strText,nOldIndex,nNewIndex)
{
	switch( strCode )
	{
	case "010":
		ed_rmnrPrid.BKColor = "";
		ed_rmnrPrid.Readonly = false;
		ed_rmnrPrid.Style = "sty_ipt_form_ind";
		ed_frpiPrid.Style = "sty_ipt_form";
		ed_frpiPrid.Readonly = true;
		ed_frpiPrid.BKColor = "#DCDCDC";
		break;
	case "020":
		ed_rmnrPrid.BKColor = "#DCDCDC";
		ed_rmnrPrid.Readonly = true;
		ed_rmnrPrid.Style = "sty_ipt_form";
		ed_frpiPrid.BKColor = "";
		ed_frpiPrid.Readonly = false;
		ed_frpiPrid.Style = "sty_ipt_form_ind";
		break;
	default:
		ed_rmnrPrid.BKColor = "#DCDCDC";
		ed_rmnrPrid.Readonly = true;
		ed_rmnrPrid.Style = "sty_ipt_form";
		ed_rmnrPrid.value = "";
		ed_frpiPrid.BKColor = "#DCDCDC";
		ed_frpiPrid.Readonly = true;
		ed_frpiPrid.Style = "sty_ipt_form";
		ed_rmnrPrid.value = "";
		break;
	}
}

/********************************************************************************
* 기      능   : 지불 총액 변경시
********************************************************************************/
function ds_zfst0402_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
{
	ds_zfst0402.FireEvent = false;
	switch(strColumnID)
	{
	case "PAYT_TAMT":
		var nOrdrTbdg = parseFloat( ds_zfst0400.GetColumn(0, "CONT_PRIC") ) ;
		ds_zfst0402.SetColumn(nRow, "PAYT_RATE", iif (nOrdrTbdg > 0, round( parseFloat( varNewValue ) / nOrdrTbdg * 100 , 2 ) , 0 ) );
		break;
	}
	ds_zfst0402.FireEvent = true;
}
]]></Script>
</Window>