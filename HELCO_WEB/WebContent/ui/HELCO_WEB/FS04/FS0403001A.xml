<?xml version="1.0" encoding="utf-8"?>
<Window>
	<Form Height="562" Id="FS0403001A" Left="8" OnLoadCompleted="fn_OnLoadCompleted" OnTimer="fn_OnTimer" OnUnloadCompleted="fn_OnUnloadCompleted" PidAttrib="7" Title="발주&#32;계약&#32;등록" Top="8" Ver="1.0" Width="978" WorkArea="true">
		<Datasets>
			<Dataset DataSetType="Dataset" Id="ds_cond">
				<Contents>
					<colinfo id="MANDT" size="256" summ="default" type="STRING"/>
					<colinfo id="PROV_SEQN" size="256" summ="default" type="INT"/>
					<colinfo id="ORDR_NUMB" size="256" summ="default" type="STRING"/>
					<colinfo id="ACTION_CMD" size="256" summ="default" type="STRING"/>
					<record>
						<ACTION_CMD></ACTION_CMD>
						<MANDT></MANDT>
						<ORDR_NUMB></ORDR_NUMB>
						<PROV_SEQN/>
					</record>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_error">
				<Contents>
					<colinfo id="IDX" size="256" type="STRING"/>
					<colinfo id="ERRMSG" size="256" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0403">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="PROV_SEQN" size="10" summ="default" type="INT"/>
					<colinfo id="CONT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="CONT_NTIM" size="5" summ="default" type="INT"/>
					<colinfo id="CONT_TYPE" size="10" summ="default" type="STRING"/>
					<colinfo id="BCNT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="BCNT_NTIM" size="5" summ="default" type="INT"/>
					<colinfo id="POST1" size="40" summ="default" type="STRING"/>
					<colinfo id="CSRS_ADDR" size="100" summ="default" type="STRING"/>
					<colinfo id="CNTS" size="21845" summ="default" type="STRING"/>
					<colinfo id="PART_NAME" size="100" summ="default" type="STRING"/>
					<colinfo id="WAERK" size="5" summ="default" type="STRING"/>
					<colinfo id="SUPY_PRIC" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="SUTX" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="CONT_MAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="PMTH_CASH" size="6" summ="default" type="DECIMAL"/>
					<colinfo id="PMTH_BILL" size="6" summ="default" type="DECIMAL"/>
					<colinfo id="PMTH_OTHR" size="6" summ="default" type="DECIMAL"/>
					<colinfo id="INSP_METH" size="21845" summ="default" type="STRING"/>
					<colinfo id="CONT_STDT" size="8" summ="default" type="STRING"/>
					<colinfo id="CONT_EDDT" size="8" summ="default" type="STRING"/>
					<colinfo id="CONT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="CNST_CHDT" size="8" summ="default" type="STRING"/>
					<colinfo id="CONT_STAT" size="10" summ="default" type="STRING"/>
					<colinfo id="TRNS_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="TRNS_STAT" size="10" summ="default" type="STRING"/>
					<colinfo id="TRNS_STAT_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="ORDR_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="PSPID" size="24" summ="default" type="STRING"/>
					<colinfo id="POSID" size="24" summ="default" type="STRING"/>
					<colinfo id="WRIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="WRIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="WRIT_USER" size="12" summ="default" type="STRING"/>
					<colinfo id="BSTNK" size="20" summ="default" type="STRING"/>
					<colinfo id="OCNT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="EBDG_MGSQ" size="5" summ="default" type="INT"/>
					<colinfo id="EBDG_ITSQ" size="10" summ="default" type="INT"/>
					<colinfo id="BDGT_ITEM" size="9" summ="default" type="STRING"/>
					<colinfo id="EBDG_NAME" size="100" summ="default" type="STRING"/>
					<colinfo id="EBDG_AMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="SPEN_AMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="REMN_AMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="CONT_PRIC" size="15" summ="default" type="DECIMAL"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0404" OnColumnChanged="ds_zfst0404_OnColumnChanged">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="CONT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="CONT_NTIM" size="5" summ="default" type="INT"/>
					<colinfo id="PMTM_SEQN" size="10" summ="default" type="INT"/>
					<colinfo id="PYMT_CLSS" size="10" summ="default" type="STRING"/>
					<colinfo id="PAYT_TIMI" size="100" summ="default" type="STRING"/>
					<colinfo id="PAYT_RATE" size="6" summ="default" type="DECIMAL"/>
					<colinfo id="WAERK" size="5" summ="default" type="STRING"/>
					<colinfo id="PAMT" size="15" summ="default" type="DECIMAL"/>
					<colinfo id="NOTE" size="200" summ="default" type="STRING"/>
					<colinfo id="WRIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="WRIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="WRIT_USER" size="12" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0405">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="CONT_NUMB" size="20" summ="default" type="STRING"/>
					<colinfo id="CONT_NTIM" size="5" summ="default" type="INT"/>
					<colinfo id="CMPY_CODE" size="10" summ="default" type="STRING"/>
					<colinfo id="CMPY_TCLS" size="10" summ="default" type="STRING"/>
					<colinfo id="CMPY_NUMB" size="16" summ="default" type="STRING"/>
					<colinfo id="CMPY_NAME" size="35" summ="default" type="STRING"/>
					<colinfo id="CMPY_ADDR" size="80" summ="default" type="STRING"/>
					<colinfo id="HTEL" size="16" summ="default" type="STRING"/>
					<colinfo id="TEL" size="16" summ="default" type="STRING"/>
					<colinfo id="FAX" size="16" summ="default" type="STRING"/>
					<colinfo id="EMIL" size="40" summ="default" type="STRING"/>
					<colinfo id="CMPY_CNTT" size="10" summ="default" type="STRING"/>
					<colinfo id="MODI_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="MODI_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="MODI_USER" size="12" summ="default" type="STRING"/>
					<colinfo id="CEO_NAME" size="10" summ="default" type="STRING"/>
					<colinfo id="NAM" size="256" summ="default" type="STRING"/>
					<colinfo id="CEO_NAME0" size="10" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0406">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="CMPY_CODE" size="10" summ="default" type="STRING"/>
					<colinfo id="CONT_SEQN" size="10" summ="default" type="INT"/>
					<colinfo id="CMPY_NAME" size="35" summ="default" type="STRING"/>
					<colinfo id="CEO_NAME" size="10" summ="default" type="STRING"/>
					<colinfo id="BSTNK" size="40" summ="default" type="STRING"/>
					<colinfo id="CONT_STDT" size="8" summ="default" type="STRING"/>
					<colinfo id="CONT_EDDT" size="8" summ="default" type="STRING"/>
					<colinfo id="TRNS_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="TRNS_STAT" size="10" summ="default" type="STRING"/>
					<colinfo id="WRIT_DATE" size="8" summ="default" type="STRING"/>
					<colinfo id="WRIT_TIME" size="6" summ="default" type="STRING"/>
					<colinfo id="WRIT_USER" size="12" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_a17">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_a20">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_a21">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_s07">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_combo_s14">
				<Contents>
					<colinfo id="CODE" size="256" summ="default" type="STRING"/>
					<colinfo id="CODE_NAME" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0403_key">
				<Contents>
					<colinfo id="PROV_SEQN" size="256" summ="default" type="INT"/>
					<colinfo id="CONT_NUMB" size="256" summ="default" type="STRING"/>
					<colinfo id="CONT_NTIM" size="256" summ="default" type="INT"/>
					<colinfo id="ACTION_CMD" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0302">
				<Contents>
					<colinfo id="MANDT" size="9" summ="default" type="STRING"/>
					<colinfo id="OCNT_NUMB" size="60" summ="default" type="STRING"/>
					<colinfo id="EBDG_ITSQ" size="4" summ="default" type="INT"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0302_amt">
				<Contents>
					<colinfo id="EBDG_AMT" size="17" summ="default" type="DECIMAL"/>
					<colinfo id="SPEN_AMT" size="17" summ="default" type="DECIMAL"/>
					<colinfo id="REMN_AMT" size="17" summ="default" type="DECIMAL"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0403_stat">
				<Contents>
					<colinfo id="PROV_SEQN" size="256" summ="default" type="STRING"/>
					<colinfo id="CONT_STAT" size="256" summ="default" type="STRING"/>
					<colinfo id="TRNS_STAT" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_trans_check">
				<Contents>
					<colinfo id="CNT" size="256" summ="default" type="INT"/>
				</Contents>
			</Dataset>
			<Dataset DataSetType="Dataset" Id="ds_zfst0405_trans">
				<Contents>
					<colinfo id="MANDT" size="3" summ="default" type="STRING"/>
					<colinfo id="PROV_SEQN" size="256" summ="default" type="INT"/>
					<colinfo id="CMPY_CODE" size="10" summ="default" type="STRING"/>
					<colinfo id="CEO_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="CMPY_ADDR" size="256" summ="default" type="STRING"/>
					<colinfo id="CMPY_NAME" size="256" summ="default" type="STRING"/>
					<colinfo id="CONT_STDT" size="256" summ="default" type="STRING"/>
					<colinfo id="CONT_EDDT" size="256" summ="default" type="STRING"/>
					<colinfo id="POST1" size="256" summ="default" type="STRING"/>
				</Contents>
			</Dataset>
		</Datasets>
		<Shape BKColor="user0" Bottom="392" Height="328" Id="Shape8" Left="8" LineColor="user1" Right="962" TabOrder="6" Top="64" Type="Rectangle" Width="954"></Shape>
		<Shape BKColor="user12" Bottom="49" Height="26" Id="Shape3" Left="991" LineColor="user13" Right="1919" TabOrder="79" Top="23" Type="Rectangle" Visible="FALSE" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="325" Height="26" Id="Shape26" Left="22" LineColor="user13" Right="950" TabOrder="24" Top="299" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="250" Height="26" Id="Shape25" Left="22" LineColor="user13" Right="950" TabOrder="22" Top="224" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="225" Height="26" Id="Shape24" Left="22" LineColor="user13" Right="950" TabOrder="20" Top="199" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="200" Height="26" Id="Shape23" Left="22" LineColor="user13" Right="950" TabOrder="18" Top="174" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="175" Height="26" Id="Shape9" Left="22" LineColor="user13" Right="950" TabOrder="7" Top="149" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="150" Height="26" Id="Shape2" Left="22" LineColor="user13" Right="950" TabOrder="50" Top="124" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="125" Height="26" Id="Shape0" Left="22" LineColor="user13" Right="950" TabOrder="42" Top="99" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user12" Bottom="100" Height="26" Id="Shape17" Left="22" LineColor="user13" Right="950" TabOrder="8" Top="74" Type="Rectangle" Width="928"></Shape>
		<Shape BKColor="user0" Bottom="29" Height="30" Id="Shape1" Left="0" LineColor="user1" Right="978" TabOrder="0" Top="-1" Type="Rectangle" Width="978"></Shape>
		<Static Align="Right" Height="20" Id="Static0" Left="4" Style="sty_lb_search" TabOrder="2" Text="계약번호" Top="3" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" BorderColor="user1" Column="CONT_NUMB" Height="20" Id="ed_contNumb" Left="97" MaxLength="10" Style="sty_ipt_form_ind" TabOrder="3" Top="3" UpperOnly="TRUE" Width="107"></Edit>
		<Grid AutoEnter="TRUE" AutoFitEndLine="Hide" BindDataset="ds_zfst0404" BkColor2="default" BoldHead="true" Border="Flat" Bottom="552" ColSizing="TRUE" Editable="TRUE" Enable="true" EndLineColor="default" HeadBorder="Flat" HeadHeight="25" Height="128" Id="grd_pay" InputPanel="FALSE" Left="8" LineColor="user20" LineType="ExHORZ" OnHeadClick="grd_list_OnHeadClick" Right="968" RowHeight="20" Style="sty_grid" TabOrder="54" TabStop="true" Top="424" UseDBuff="true" UsePopupMenu="true" UseSelColor="true" Visible="true" VLineColor="default" WheelScrollRow="1" Width="960">
			<contents>
				<format id="Default">
					<columns>
						<col width="0"/>
						<col width="107"/>
						<col width="131"/>
						<col width="162"/>
						<col width="183"/>
						<col width="307"/>
					</columns>
					<head>
						<cell col="0" display="text"/>
						<cell align="center" col="1" color="user21" display="text" font="굴림,9" text="구분" wordwrap="word"/>
						<cell align="center" col="2" color="user21" display="text" font="굴림,9" text="지급시기" wordwrap="word"/>
						<cell align="center" col="3" color="user21" display="text" font="굴림,9" text="지급비율" wordwrap="word"/>
						<cell col="4" color="user21" display="text" font="굴림,9" text="금액"/>
						<cell col="5" color="user21" display="text" font="굴림,9" text="비고"/>
					</head>
					<body>
						<cell align="center" bkcolor2="user22" col="0" display="text" edit="normal"/>
						<cell align="left" bkcolor2="user22" col="1" colid="PYMT_CLSS" combocol="CODE" combodataset="ds_combo_s07" combotext="CODE_NAME" display="combo" edit="combo"/>
						<cell align="left" bkcolor2="user22" checklength="Byte" col="2" colid="PAYT_TIMI" combocol="CODE" combodataset="ds_combo_s14" combodisplayrowcnt="10" combotext="CODE_NAME" display="combo" edit="combo" expandsize="30" limit="100" Valign="Center"/>
						<cell align="center" bkcolor2="user22" col="3" colid="PAYT_RATE" display="number" expandsize="30" limit="6" LimitDec="3" Valign="Center"/>
						<cell align="right" col="4" colid="PAMT" display="number" edit="number" limit="15" LimitDec="0" Valign="Center"/>
						<cell col="5" colid="NOTE" display="text" edit="normal" limit="200" LimitDec="0" Valign="Center"/>
					</body>
				</format>
			</contents>
		</Grid>
		<Static Color="user6" Font="굴림,9,Bold" Height="20" Id="Static19" Left="16" TabOrder="5" Text="발주&#32;계약정보" Top="41" VAlign="Middle" Width="102"></Static>
		<Image Height="20" Id="Image0" ImageID="form_bl_title_sub" Left="3" TabOrder="4" Top="39" Width="11"></Image>
		<Static Align="Right" Height="24" Id="Static29" Left="23" Style="sty_lb_form_basic" TabOrder="14" Text="프로젝트번호" Top="75" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="PSPID" Height="20" Id="ed_pspid" Left="116" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="9" Top="77" UpperOnly="TRUE" Width="120"></Edit>
		<Static Align="Right" Height="24" Id="Static12" Left="23" Style="sty_lb_form_basic" TabOrder="25" Text="업체명" Top="300" VAlign="Middle" Width="92"></Static>
		<Static Align="Right" Height="24" Id="Static13" Left="332" Style="sty_lb_form_basic" TabOrder="26" Text="주소" Top="300" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0405" Border="Flat" BorderColor="user13" Column="CMPY_NAME" Height="20" Id="ed_cmpyName" Left="116" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="35" Top="302" UpperOnly="TRUE" Width="203"></Edit>
		<Edit BindDataset="ds_zfst0405" Border="Flat" Column="CMPY_ADDR" Height="20" Id="ed_cmpyAddr" Left="424" MaxLength="80" Style="sty_ipt_form" TabOrder="37" Top="302" Width="516"></Edit>
		<Image Height="20" Id="Image1" ImageID="form_bl_title_sub" Left="2" TabOrder="27" Top="398" Width="11"></Image>
		<Static Color="user6" Font="굴림,9,Bold" Height="20" Id="Static4" Left="15" TabOrder="36" Text="지급계획" Top="398" VAlign="Middle" Width="102"></Static>
		<Edit Border="Flat" BorderColor="user1" Height="20" Id="ed_provSeqn" Left="870" MaxLength="10" Style="sty_ipt_form_ind" TabOrder="38" Top="4" UpperOnly="TRUE" Visible="FALSE" Width="99"></Edit>
		<Button Cursor="HAND" Height="20" Id="btn_rowAdd" ImageID="btn_icon_plus" Left="921" LeftMargin="12" OnClick="btn_rowAdd_OnClick" Style="sty_btn" TabOrder="48" Top="398" Transparent="TRUE" Width="22"></Button>
		<Button Cursor="HAND" Height="20" Id="btn_rowDel" ImageID="btn_icon_minus" Left="945" LeftMargin="12" OnClick="btn_rowDel_OnClick" Style="sty_btn" TabOrder="51" Top="398" Transparent="TRUE" Width="22"></Button>
		<Static Align="Right" Height="24" Id="Static5" Left="23" Style="sty_lb_form_basic" TabOrder="44" Text="발주번호" Top="100" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="ORDR_NUMB" Height="20" Id="ed_ordrNumb" Left="116" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="11" Top="102" UpperOnly="TRUE" Width="120"></Edit>
		<Static Align="Right" Height="24" Id="Static28" Left="247" Style="sty_lb_form_basic" TabOrder="46" Text="시행예산항목" Top="100" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="EBDG_NAME" Height="20" Id="ed_bdgName" Left="340" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="12" Top="102" UpperOnly="TRUE" Width="291"></Edit>
		<Static Align="Right" Height="24" Id="Static23" Left="644" Style="sty_lb_form_basic" TabOrder="47" Text="시행예산" Top="100" VAlign="Middle" Width="92"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="REMN_AMT" Height="20" Id="ed_ebdgAmt" Left="737" Mask="&apos;**********&apos;" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="13" Top="102" Width="203"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static6" Left="247" Style="sty_lb_form_basic" TabOrder="49" Text="프로젝트명" Top="75" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="BSTNK" Height="20" Id="ed_bstnk" Left="340" MaxLength="10" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="10" Top="77" UpperOnly="TRUE" Width="600"></Edit>
		<Static Align="Right" Height="24" Id="Static7" Left="23" Style="sty_lb_form_basic" TabOrder="52" Text="현장명" Top="125" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" Column="POST1" Height="20" Id="ed_post1" Left="116" MaxLength="40" Style="sty_ipt_form" TabOrder="15" Top="127" Width="333"></Edit>
		<Static Align="Right" Height="24" Id="Static2" Left="23" Style="sty_lb_form_basic" TabOrder="53" Text="내용" Top="175" VAlign="Middle" Width="92"></Static>
		<Edit Border="Flat" Column="CNTS" Height="20" Id="ed_cnts" Left="116" MaxLength="400" Style="sty_ipt_form" TabOrder="19" Top="177" Width="824"></Edit>
		<Static Align="Right" Height="24" Id="Static30" Left="23" Style="sty_lb_form_basic" TabOrder="55" Text="현장주소" Top="150" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" Column="CSRS_ADDR" Height="20" Id="ed_csrsAddr" Left="116" MaxLength="100" Style="sty_ipt_form" TabOrder="17" Top="152" Width="824"></Edit>
		<Static Align="Right" Height="24" Id="Static27" Left="458" Style="sty_lb_form_basic" TabOrder="56" Text="부품명" Top="125" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="PART_NAME" Height="20" Id="ed_partName" Left="551" MaxLength="100" Style="sty_ipt_form" TabOrder="16" Top="127" UpperOnly="TRUE" Width="389"></Edit>
		<Static Align="Right" Height="24" Id="Static17" Left="332" Style="sty_lb_form_basic" TabOrder="57" Text="계약일" Top="200" VAlign="Middle" Width="93"></Static>
		<Calendar BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" ClickedBkColor="user32" ClickedTextColor="user33" Column="CONT_DATE" Dateformat="yyyy.MM.dd" DayFont="돋움,9" DaySelect="Auto" DaySpacingHeight="6" DrawWeekSeparator="FALSE" EditAlign="CENTER" Font="돋움,9" HeaderBorder="NONE" HeaderFont="돋움,10,Bold" Height="20" Id="cal_contDate" Left="426" MonthPickerFormat="yyyy년&#32;MMMM" MonthPopupBorder="FLAT" SaturdayTextColor="user34" SelectedDayFont="돋움,9,Bold" Style="sty_ipt_form" SundayTextColor="user35" TabOrder="23" TextColor="user36" TitleBKColor="user37" TitleTextColor="user38" TodayColor="user39" Top="202" WeekBKColor="user40" WeekColor="user41" WeeksFont="돋움,10" Width="92"></Calendar>
		<Static Align="Right" Height="24" Id="Static1" Left="23" Style="sty_lb_form_basic" TabOrder="58" Text="계약금액" Top="225" VAlign="Middle" Width="92"></Static>
		<Edit Border="Flat" Height="20" Id="ed_contTamtH" Left="333" Readonly="TRUE" Style="sty_ipt_form_ind" TabOrder="59" TabStop="FALSE" Top="227" Width="519"></Edit>
		<MaskEdit Align="Right" BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="SUPY_PRIC" DecimalLen="0" DigitLen="15" Height="20" Id="ed_contTamt" Left="116" Mask="&apos;**********&apos;" NullValue="0" OnChanged="ed_contTamt_OnChanged" Style="sty_ipt_form" TabOrder="30" Top="227" TrimType="Both" Value="MaskEdit0" Width="204"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static9" Left="644" Style="sty_lb_form_basic" TabOrder="60" Text="계약기간" Top="200" VAlign="Middle" Width="92"></Static>
		<Calendar BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" ClickedBkColor="user32" ClickedTextColor="user33" Column="CONT_STDT" Dateformat="yyyy.MM.dd" DayFont="돋움,9" DaySelect="Auto" DaySpacingHeight="6" DrawWeekSeparator="FALSE" EditAlign="CENTER" Font="돋움,9" HeaderBorder="NONE" HeaderFont="돋움,10,Bold" Height="20" Id="cal_contStdt" Left="737" MonthPickerFormat="yyyy년&#32;MMMM" MonthPopupBorder="FLAT" SaturdayTextColor="user34" SelectedDayFont="돋움,9,Bold" Style="sty_ipt_form" SundayTextColor="user35" TabOrder="28" TextColor="user36" TitleBKColor="user37" TitleTextColor="user38" TodayColor="user39" Top="202" WeekBKColor="user40" WeekColor="user41" WeeksFont="돋움,10" Width="92"></Calendar>
		<Calendar BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" ClickedBkColor="user32" ClickedTextColor="user33" Column="CONT_EDDT" Dateformat="yyyy.MM.dd" DayFont="돋움,9" DaySelect="Auto" DaySpacingHeight="6" DrawWeekSeparator="FALSE" EditAlign="CENTER" Font="돋움,9" HeaderBorder="NONE" HeaderFont="돋움,10,Bold" Height="20" Id="cal_contEddt" Left="848" MonthPickerFormat="yyyy년&#32;MMMM" MonthPopupBorder="FLAT" SaturdayTextColor="user34" SelectedDayFont="돋움,9,Bold" Style="sty_ipt_form" SundayTextColor="user35" TabOrder="29" TextColor="user36" TitleBKColor="user37" TitleTextColor="user38" TodayColor="user39" Top="202" WeekBKColor="user40" WeekColor="user41" WeeksFont="돋움,10" Width="92"></Calendar>
		<Static Align="Center" Border="None" Color="user7" Font="굴림,9" Height="20" Id="Static10" Left="832" TabOrder="61" Text="~" Top="202" VAlign="Middle" Width="10"></Static>
		<Static Align="Right" Height="24" Id="Static11" Left="23" Style="sty_lb_form_basic" TabOrder="62" Text="계약구분" Top="200" VAlign="Middle" Width="92"></Static>
		<Combo BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" CodeColumn="CODE" Column="CONT_TYPE" DataColumn="CODE_NAME" Height="20" Id="cb_contType" INDEX="0" InnerDataset="ds_combo_a20" Left="116" ResetIndex="FIRST" Style="sty_ipt_form" TabOrder="21" Top="201" Width="120"></Combo>
		<Shape BKColor="user12" Bottom="350" Height="26" Id="Shape4" Left="22" LineColor="user13" Right="950" TabOrder="63" Top="324" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static14" Left="23" Style="sty_lb_form_basic" TabOrder="64" Text="대표자명" Top="325" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0405" Border="Flat" Column="CEO_NAME" Height="20" Id="ed_cmpyCeo" Left="116" MaxLength="10" Style="sty_ipt_form" TabOrder="65" TabStop="FALSE" Top="327" Width="203"></Edit>
		<Static Align="Right" Height="24" Id="Static15" Left="332" Style="sty_lb_form_basic" TabOrder="66" Text="핸드폰" Top="325" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0405" Border="Flat" Column="HTEL" Height="20" Id="ed_htel" Left="425" MaxLength="16" Number="TRUE" Style="sty_ipt_form" TabOrder="39" Top="327" Width="203"></Edit>
		<Static Align="Right" Height="24" Id="Static16" Left="644" Style="sty_lb_form_basic" TabOrder="67" Text="연락처" Top="325" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0405" Border="Flat" Column="TEL" Height="20" Id="ed_tel" Left="737" MaxLength="16" Number="TRUE" Style="sty_ipt_form" TabOrder="40" Top="327" Width="203"></Edit>
		<Shape BKColor="user12" Bottom="375" Height="26" Id="Shape5" Left="22" LineColor="user13" Right="950" TabOrder="68" Top="349" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static18" Left="23" Style="sty_lb_form_basic" TabOrder="69" Text="FAX" Top="350" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0405" Border="Flat" Column="FAX" Height="20" Id="ed_fax" Left="116" MaxLength="16" Number="TRUE" Style="sty_ipt_form" TabOrder="41" Top="352" Width="203"></Edit>
		<Static Align="Right" Height="24" Id="Static20" Left="332" Style="sty_lb_form_basic" TabOrder="70" Text="이메일" Top="350" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0405" Border="Flat" Column="EMIL" Height="20" Id="ed_email" Left="425" MaxLength="40" Style="sty_ipt_form" TabOrder="43" Top="352" Width="203"></Edit>
		<Static Align="Right" Height="24" Id="Static21" Left="644" Style="sty_lb_form_basic" TabOrder="71" Text="담당자" Top="350" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0405" Border="Flat" Column="CMPY_CNTT" Height="20" Id="ed_cmpyCntt" Left="737" MaxLength="10" Style="sty_ipt_form" TabOrder="45" Top="352" Width="203"></Edit>
		<Edit BindDataset="ds_zfst0403" Border="Flat" BorderColor="user1" Column="CONT_NTIM" Height="20" Id="ed_contNtim" Left="218" MaxLength="10" Style="sty_ipt_form_ind" TabOrder="72" TabStop="FALSE" Top="3" UpperOnly="TRUE" Visible="FALSE" Width="33"></Edit>
		<MaskEdit Align="Right" Border="Flat" BorderColor="user13" Column="CONT_MAMT" DecimalLen="0" DigitLen="15" Height="20" Id="ed_contMamt" Left="1706" Mask="&apos;**********&apos;" MaxLength="10" Style="sty_ipt_form" TabOrder="73" TabStop="FALSE" Top="26" TrimType="Both" Visible="FALSE" Width="203"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static8" Left="1613" Style="sty_lb_form_basic" TabOrder="74" Text="월&#32;계약금액" Top="24" VAlign="Middle" Visible="FALSE" Width="92"></Static>
		<MaskEdit Align="Right" Border="Flat" BorderColor="user13" Column="SUTX" DecimalLen="0" DigitLen="15" Height="20" Id="ed_sutx" Left="1395" Mask="&apos;**********&apos;" MaxLength="10" Style="sty_ipt_form" TabOrder="75" TabStop="FALSE" Top="26" TrimType="Both" Visible="FALSE" Width="203"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static3" Left="1301" Style="sty_lb_form_basic" TabOrder="76" Text="부가세" Top="24" VAlign="Middle" Visible="FALSE" Width="93"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="SUPY_PRIC" DecimalLen="0" DigitLen="15" Height="20" Id="ed_supyPric" Left="1085" Mask="&apos;**********&apos;" MaxLength="10" Style="sty_ipt_form" TabOrder="77" TabStop="FALSE" Top="26" TrimType="Both" Visible="FALSE" Width="204"></MaskEdit>
		<Static Align="Right" Height="24" Id="Static47" Left="992" Style="sty_lb_form_basic" TabOrder="78" Text="공급가액" Top="24" VAlign="Middle" Visible="FALSE" Width="92"></Static>
		<Shape BKColor="user12" Bottom="275" Height="26" Id="Shape6" Left="22" LineColor="user13" Right="950" TabOrder="80" Top="249" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static22" Left="23" Style="sty_lb_form_basic" TabOrder="81" Text="지급방법" Top="250" VAlign="Middle" Width="92"></Static>
		<Shape BKColor="user12" Bottom="300" Height="26" Id="Shape7" Left="22" LineColor="user13" Right="950" TabOrder="82" Top="274" Type="Rectangle" Width="928"></Shape>
		<Static Align="Right" Height="24" Id="Static24" Left="23" Style="sty_lb_form_basic" TabOrder="83" Text="검사방법" Top="275" VAlign="Middle" Width="92"></Static>
		<Edit BindDataset="ds_zfst0403" Border="Flat" Column="INSP_METH" Height="20" Id="ed_inspMeth" ImeMode="none" Left="116" MaxLength="500" Style="sty_ipt_form" TabOrder="34" Top="277" Width="824"></Edit>
		<MaskEdit Align="Right" BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="PMTH_CASH" DecimalLen="3" DigitLen="3" Height="20" Id="ed_pmthCash" Left="176" Mask="&apos;**********&apos;" NullValue="0" Style="sty_ipt_form" TabOrder="31" Top="252" TrimType="Both" Width="92"></MaskEdit>
		<Static Align="Right" Border="None" Color="user7" Font="굴림,9" Height="20" Id="Static25" Left="123" TabOrder="84" Text="현금" Top="252" VAlign="Middle" Width="42"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="PMTH_BILL" DecimalLen="3" DigitLen="3" Height="20" Id="ed_pmthBill" Left="323" Mask="&apos;**********&apos;" NullValue="0" Style="sty_ipt_form" TabOrder="32" Top="252" TrimType="Both" Width="92"></MaskEdit>
		<Static Align="Right" Border="None" Color="user7" Font="굴림,9" Height="20" Id="Static26" Left="274" TabOrder="85" Text="어음" Top="252" VAlign="Middle" Width="42"></Static>
		<MaskEdit Align="Right" BindDataset="ds_zfst0403" Border="Flat" BorderColor="user13" Column="PMTH_OTHR" DecimalLen="3" DigitLen="3" Height="20" Id="ed_pmthOthr" Left="475" Mask="&apos;**********&apos;" NullValue="0" Style="sty_ipt_form" TabOrder="33" Top="252" TrimType="Both" Width="92"></MaskEdit>
		<Static Align="Right" Border="None" Color="user7" Font="굴림,9" Height="20" Id="Static31" Left="426" TabOrder="86" Text="기타" Top="252" VAlign="Middle" Width="42"></Static>
		<Static Align="Right" Border="None" Color="user7" Font="굴림,9" Height="20" Id="Static32" Left="848" TabOrder="87" Text="(부가세별도)" Top="227" VAlign="Middle" Width="90"></Static>
	</Form>
	<Script><![CDATA[/*
 ******************************************************************************************
 * 기      능   : 사양별 템플릿 특성값 지정
 * 작  성  자   : 박수근
 * 작성  일자   : 20116.11.01
 * ----------------------------------------------------------------------------------------
 * HISTORY    :
 ******************************************************************************************
 */
#include "LIB::commons.js";           // 공통 스크립트
#include "LIB::fs_common.js";         // 물류서비스 공통 스크립트

//=========================================================================================
// [ PART 1 ]
// Form에서 사용될 전역변수를 선언
// FORM에서 사용되는 전역변수는 대문자로 작성하며, F_XXX 의 형태를 갖도록 한다.
//=========================================================================================

//=========================================================================================
// [ PART 2 ]
// Form Loading / Unloading 시 작업 정의
//=========================================================================================
function fn_OnLoadCompleted(obj) {
    gfn_initForm(true);             // Form 로드 이벤트 맨 첫줄에 기술
    fn_init_form();             // 폼 초기화
}

/********************************************************************************
* 기      능   : form UnloadCompleted
********************************************************************************/
function fn_OnUnloadCompleted(obj) {
    return gfn_isFormUnload(obj);
}

/********************************************************************************
* 기      능   : 폼 초기화
********************************************************************************/
function fn_init_form() {
    
    var codeArray = ["A17:ds_combo_a17","A20:ds_combo_a20","A21:ds_combo_a21","S07:ds_combo_s07","S14:ds_combo_s14"];// 공용코드 콤보 데이터 셑을 가져온다.
    gn_fsComboDataSet(codeArray);
    
	gfn_initDs( ds_cond , true );
	var isSet = false;
	if (!isSet && FS0403001A.IsExistVariable("pProvSeqn", "Local"))
	{
		if ( gfn_toString(pProvSeqn) != "" ) 
		{
			ds_cond.SetColumn(0, "ORDR_NUMB", "");
			ds_cond.SetColumn(0, "PROV_SEQN", pProvSeqn);
			ds_cond.SetColumn(0, "ACTION_CMD", "U");
			isSet = true;
		}
	}
	if (!isSet && FS0403001A.IsExistVariable("pOrdrNumb", "Local"))
	{
		if ( gfn_toString(pOrdrNumb) != "" ) 
		{
			ds_cond.SetColumn(0, "PROV_SEQN", "0");
			ds_cond.SetColumn(0, "ORDR_NUMB", pOrdrNumb);
			ds_cond.SetColumn(0, "ACTION_CMD", "I");
		}
	}
	SetTimer(1 , 300 );
}

/********************************************************************************
* 기      능   : 폼 타이머
********************************************************************************/
function fn_OnTimer(obj,nEventID)
{
	KillTimer(nEventID);
	fn_query();
}

/********************************************************************************
* 기      능   : 조회
********************************************************************************/
function fn_query() {

    tit_clearActionInfo();
    if ( ds_cond.GetColumn(0, "ACTION_CMD") == "I" )
    {
		tit_addSearchActionInfo("fs04:FS0403001A_S5");
		tit_addSearchActionInfo("fs04:FS0403001A_S6");
    }
    else
    {
		tit_addSearchActionInfo("fs04:FS0403001A_S1");
		tit_addSearchActionInfo("fs04:FS0403001A_S2");
		tit_addSearchActionInfo("fs04:FS0403001A_S3");
    }
    tit_callService(
                    ""
                   ,""
                   ,"ds_cond=ds_cond"
                   ,"ds_zfst0403=ds_zfst0403 ds_zfst0404=ds_zfst0404 ds_zfst0405=ds_zfst0405"
                   ,""
                   ,"fn_afterQuery"
                   ,"true"
                   ,"true"
                   ,"false"
                   );
}
function fn_afterQuery(errCode, errMsg)
{
	form_controll();
	var nRowCount = ds_zfst0403.GetRowCount();
	if ( gfn_barMsgSearch(nRowCount, errCode) ) return;
	ed_contTamt_OnChanged(ed_contTamt, gfn_toString( ds_zfst0403.GetColumn(0, "SUPY_PRIC") ) );
	ds_zfst0403.ApplyChange();
	ds_zfst0404.ApplyChange();
	ds_zfst0405.ApplyChange();
}
/********************************************************************************
* 기      능   : 저장
********************************************************************************/
function fn_save() {
	if ( length( ds_zfst0403.GetColumn(0, "ORDR_NUMB") ) < 1 )
	{
		gfn_openMsgWin("선택한 발주서가 없습니다.", "W", "A", "");
		return;
	}
	if ( length( ds_zfst0403.GetColumn(0, "POST1") ) < 1 )
	{
		gfn_openMsgWin("현장명을 입력해야 합니다.", "W", "A", "");
		return;
	}
	if ( length( ds_zfst0403.GetColumn(0, "POST1") ) < 1 )
	{
		gfn_openMsgWin("현장명을 입력해야 합니다.", "W", "A", "");
		return;
	}
	if ( length( ds_zfst0403.GetColumn(0, "PART_NAME") ) < 1 )
	{
		gfn_openMsgWin("부품명을 입력해야 합니다.", "W", "A", "");
		return;
	}
	if ( length( ds_zfst0403.GetColumn(0, "CSRS_ADDR") ) < 1 )
	{
		gfn_openMsgWin("현장 주소를 입력해야 합니다.", "W", "A", "");
		return;
	}
	if ( length( ds_zfst0403.GetColumn(0, "CONT_TYPE") ) < 1 )
	{
		gfn_openMsgWin("계약구분을 선택해야 합니다.", "W", "A", "");
		return;
	}
	if ( length( ds_zfst0403.GetColumn(0, "CONT_DATE") ) < 1 )
	{
		gfn_openMsgWin("계약일을 입력해야 합니다.", "W", "A", "");
		return;
	}
	if ( length( ds_zfst0403.GetColumn(0, "CONT_STDT") ) < 1 )
	{
		gfn_openMsgWin("계약기간 시작일을 입력해야 합니다.", "W", "A", "");
		return;
	}
	if ( length( ds_zfst0403.GetColumn(0, "CONT_EDDT") ) < 1 )
	{
		gfn_openMsgWin("계약기간 종료일을 입력해야 합니다.", "W", "A", "");
		return;
	}
	if ( parseInt( ds_zfst0403.GetColumn(0, "CONT_STDT") ) > parseInt( ds_zfst0403.GetColumn(0, "CONT_EDDT") ) )
	{
		gfn_openMsgWin("계약기간 시작일은 종료일보다 같거나 이후 일자로 입력하여 주십시오.", "W", "A", "");
		return;
	}  
	
	if ( length( gfn_toString( ds_zfst0405.GetColumn(0, "NAM") ) ) < 1 )
	{
		gfn_openMsgWin("전자계산서 등록업체가 아닙니다.\n"+
					   "등록되지않은 없체는 전자계산서 전송이 불가합니다.", "W", "A", "");
	}
	if ( length( ds_zfst0405.GetColumn(0, "CMPY_ADDR") ) < 1 )
	{
		gfn_openMsgWin("계약업체의 주소를 입력해야 합니다.", "W", "A", "");
		return;
	}
	
	gfn_initDs( ds_zfst0302 , true );
	ds_zfst0302.SetColumn(0, "OCNT_NUMB", ds_zfst0403.GetColumn(0, "OCNT_NUMB") ); 
	ds_zfst0302.SetColumn(0, "EBDG_ITSQ", ds_zfst0403.GetColumn(0, "EBDG_ITSQ") );
	tit_clearActionInfo();
	tit_addSearchActionInfo("fs04:FS0402001A_S5");
	tit_addSearchActionInfo("fs04:FS0403001A_S7");
	tit_callService(
					""
				   ,""
				   ,"ds_zfst0302=ds_zfst0302 ds_zfst0403_stat=ds_zfst0403"
				   ,"ds_zfst0302_amt=ds_zfst0302_amt ds_zfst0403_stat=ds_zfst0403_stat"
				   ,""
				   ,"fn_preSave"
				   ,"true"
				   ,"true"
				   ,"false"
				   );
}
function fn_preSave(errCode, errMsg)
{
	if ( errCode != 0 ) {
		gfn_showMsg( errMsg );
		return;
	}
	
	ds_zfst0403.SetColumn(0, "REMN_AMT", ds_zfst0302_amt.GetColumn(0, "REMN_AMT") );	
	
	var nSumPamt = 0;
	var nRowCount = ds_zfst0404.GetRowCount();
	for( var iRow=0; iRow < nRowCount; iRow++ )
	{
	
		nSumPamt += parseFloat( ds_zfst0404.GetColumn(iRow, "PAMT" ) );
		ds_zfst0404.SetColumn(iRow, "PMTM_SEQN", iRow+1);
		ds_zfst0404.SetColumn(iRow, "WAERK", "KRW");
		if ( ds_zfst0404.GetColumn(iRow, "PYMT_CLSS") == "" )
		{
			gfn_openMsgWin("지급계획의 구분을 선택해야 합니다.", "W", "A", "");
			return;
		}
		if ( ds_zfst0404.GetColumn(iRow, "PAYT_TIMI") == "" )
		{
			gfn_openMsgWin("지급계획의 지급시기를 선택해야 합니다.", "W", "A", "");
			return;
		}
	}
	
	if ( nSumPamt != parseFloat( ds_zfst0403.GetColumn(0, "CONT_PRIC") ) )
	{
		gfn_openMsgWin("지급계획의 합이 계약금액과 다릅니다.", "W", "A", "");
		return;
	}
	var nPmthRate = parseFloat( ds_zfst0403.GetColumn(0, "PMTH_CASH") ) + parseFloat( ds_zfst0403.GetColumn(0, "PMTH_BILL") ) + parseFloat( ds_zfst0403.GetColumn(0, "PMTH_OTHR") );
	if ( nPmthRate > 0 && nPmthRate != 100 )
	{
		gfn_openMsgWin("지급방법의 비율 합이 100%와 다릅니다.", "W", "A", "");
		return;
	}

	if ( parseFloat( ds_zfst0302_amt.GetColumn(0, "REMN_AMT") ) < ( parseFloat( ds_zfst0403.GetColumn(0, "CONT_PRIC") ) + parseFloat( ds_zfst0403.GetColumn(0, "SUTX") ) ) )
	{
		gfn_openMsgWin("계약금액(부가세 포함)이 예산금액보다 큽니다.", "W", "A", "");
		return;
	}
	
	if ( ds_zfst0403_stat.GetRowCount() > 0 )
	{
		if ( ds_zfst0403_stat.GetColumn(0, "CONT_STAT") != "520" && ds_zfst0403_stat.GetColumn(0, "CONT_STAT") != "530" )
		{
			gfn_openMsgWin("수정이 불가능한 계약입니다.", "W", "A", "");
			return;
		}

	}
	
	if ( !gfn_showConfirm("CI00008") ) return;
	
	
	tit_clearActionInfo();
    tit_addSearchActionInfo("fs04:FS0403001A_S4", true); 
	tit_addSingleActionInfo("fs04:FS0403001A_I1"); 
	tit_addSingleActionInfo("fs04:FS0403001A_D1"); 
	tit_addMultiActionInfo("fs04:FS0403001A_I2");
	tit_addSingleActionInfo("fs04:FS0403001A_I3"); 
	tit_callService(
					""
				   ,""
				   ,"ds_cond=ds_cond ds_zfst0403=ds_zfst0403 ds_zfst0404=ds_zfst0404 ds_zfst0405=ds_zfst0405"
				   ,"ds_zfst0403_key=ds_zfst0403_key"
				   ,""
				   ,"fn_afterSave"
				   ,"true"
				   ,"true"
				   ,"false"
				   );
}
function fn_afterSave(errCode, errMsg)
{
	if ( gfn_barMsgSave(errCode, true) ) return;
	gfn_initDs( ds_cond , true );
	ds_cond.SetColumn(0, "PROV_SEQN", ds_zfst0403_key.GetColumn(0, "PROV_SEQN") );
	ds_cond.SetColumn(0, "ACTION_CMD", "U" ); 
	fn_query();
}
/********************************************************************************
* 기      능   : 출력
********************************************************************************/
function fn_print() {

}

/********************************************************************************
* 기      능   : 전송
********************************************************************************/
function fn_trans() {
	if ( ds_zfst0403.GetColumn(0, "TRNS_STAT") == "030" ) 
	{
		gfn_showAlert("CW00027");
		return;
	}
	if ( !gfn_openMsgWin("전송하시겠습니까?", "I", "C", "") ) return;
	gfn_initDs( ds_zfst0405_trans , true );
	ds_zfst0405_trans.SetColumn(0, "PROV_SEQN", ds_zfst0403.GetColumn(0, "PROV_SEQN") );
	ds_zfst0405_trans.SetColumn(0, "CMPY_CODE", ds_zfst0405.GetColumn(0, "CMPY_CODE") );
	ds_zfst0405_trans.SetColumn(0, "CEO_NAME", ds_zfst0405.GetColumn(0, "CEO_NAME") );
	ds_zfst0405_trans.SetColumn(0, "CMPY_ADDR", ds_zfst0405.GetColumn(0, "CMPY_ADDR") );
	ds_zfst0405_trans.SetColumn(0, "CMPY_NAME", ds_zfst0405.GetColumn(0, "CMPY_NAME") );
	ds_zfst0405_trans.SetColumn(0, "CONT_STDT", ds_zfst0403.GetColumn(0, "CONT_STDT") );
	ds_zfst0405_trans.SetColumn(0, "CONT_EDDT", ds_zfst0403.GetColumn(0, "CONT_EDDT") );
	ds_zfst0405_trans.SetColumn(0, "POST1", ds_zfst0403.GetColumn(0, "POST1") );
	
	tit_clearActionInfo();
	tit_addSearchActionInfo("fs04:FS0403001A_S8"); 
	tit_callService(
					""
				   ,""
				   ,"ds_zfst0405_trans=ds_zfst0405_trans"
				   ,"ds_trans_check=ds_trans_check"
				   ,""
				   ,"fn_preTrans"
				   ,"true"
				   ,"true"
				   ,"false"
				   );
}

function fn_preTrans( errCode, errMsg )
{
	if ( errCode != 0 ) {
		gfn_showMsg( errMsg );
		return;
	}
	if ( ds_trans_check.GetRowCount() > 0 && ds_trans_check.GetColumn(0, "CNT") == 1 )
	{
		tit_clearActionInfo();
		tit_addSingleActionInfo("fs04:FS0403001A_I4"); 
		tit_addSingleActionInfo("fs04:FS0403001A_I5"); 
		tit_addSingleActionInfo("fs04:FS0403001A_U1");
		tit_addSingleActionInfo("fs04:FS0403001A_U2");
		if ( ds_zfst0403.GetColumn(0, "CONT_TYPE") == "020" )
		{
			tit_addSingleActionInfo("fs04:FS0403001A_I6");
			tit_addSingleActionInfo("fs04:FS0403001A_I7");
		}
		tit_callService(
						""
					   ,""
					   ,"ds_zfst0405_trans=ds_zfst0405_trans"
					   ,""
					   ,""
					   ,"fn_afterTrans"
					   ,"true"
					   ,"true"
					   ,"false"
					   );
	}
	else
	{
		gfn_openMsgWin("전자계약시스템에 등록된 업체가 아닙니다.", "W", "A", "");
		return;
	}
}

function fn_afterTrans( errCode, errMsg )
{
	if (errCode != 0)
	{
		gfn_showMsg( msgCode, arr );
	}
	else
	{
		gfn_initDs( ds_cond , true );
		ds_cond.SetColumn(0, "PROV_SEQN", ds_zfst0405_trans.GetColumn(0, "PROV_SEQN") );
		ds_cond.SetColumn(0, "ACTION_CMD", "U" ); 
		fn_query();
	}
}
/********************************************************************************
* 기      능   : 닫기
********************************************************************************/
function fn_close() {
    gfn_formClose( ds_zfst0403.GetUpdate() || ds_zfst0404.GetUpdate() || ds_zfst0405.GetUpdate() );
}

/********************************************************************************
* 기      능   : 계약번호 조회
********************************************************************************/
function btn_contNumb_OnClick(obj)
{
    var arg="";
    gfn_openPopup("FS0302001B", true, arg);	
}

/********************************************************************************
* 기      능   : 발주번호 조회
********************************************************************************/
function btn_ordrNumb_OnClick(obj)
{
    var arg="";
    gfn_openPopup("FS0302001B", true, arg);	
}

/********************************************************************************
* 기      능   : 지급계획 추가
********************************************************************************/
function btn_rowAdd_OnClick(obj)
{
	ds_zfst0404.AddRow();
}

/********************************************************************************
* 기      능   : 지급계획 삭제
********************************************************************************/
function btn_rowDel_OnClick(obj)
{
	ds_zfst0404.DeleteRow( ds_zfst0404.GetRowPos() );
}

/********************************************************************************
* 기      능   : 계약금액 한글표현
********************************************************************************/
function ed_contTamt_OnChanged(obj,strText)
{
	ed_contTamtH.Text = gfn_changeStringNum(parseInt( strText ), 0);
	ds_zfst0403.SetColumn(0, "SUTX", round( ( parseFloat( strText ) * 0.1 ) , 0 ) );
}

/********************************************************************************
* 기      능   : 화면 제어
********************************************************************************/
function form_controll()
{
	btn_save.Enable = false;
	btn_print.Enable = false;
	btn_trans.Enable = false;
	
	ed_ebdgAmt.Type = "String";
	ed_contTamt.Type = "String";
	ed_pmthCash.Type = "String";
	ed_pmthBill.Type = "String";
	ed_pmthOthr.Type = "String";

	ed_contTamt.Readonly = true;
	ed_pmthCash.Readonly = true;
	ed_pmthBill.Readonly = true;
	ed_pmthOthr.Readonly = true;
	
	ed_post1.Readonly = true;
	ed_partName.Readonly = true;
	ed_csrsAddr.Readonly = true;
	ed_cnts.Readonly = true;
	ed_inspMeth.Readonly = true;
	ed_cmpyAddr.Readonly = true;
	ed_htel.Readonly = true;
	ed_tel.Readonly = true;
	ed_fax.Readonly = true;
	ed_email.Readonly = true;
	ed_cmpyCntt.Readonly = true;
	ed_cmpyCeo.Readonly = true;
	
	cal_contDate.Enable = false;
	cal_contStdt.Enable = false;
	cal_contEddt.Enable = false;
	cb_contType.Enable = false;
	
	grd_pay.Editable = false;
	grd_pay.SetCellProp("Body", grd_pay.GetBindCellIndex("body","PAMT"), "Display", "null"); 
	
	if( G_DPT1 == "CD" ) {
		grd_pay.SetCellProp("Body", grd_pay.GetBindCellIndex("body","PAMT"), "Display", "Number"); 
		var sContStat = ds_zfst0403.GetColumn(0, "CONT_STAT") ;

		btn_print.Enable = true;
			
		ed_ebdgAmt.Type = "Number"; 
		ed_contTamt.Type = "Number";
		ed_pmthCash.Type = "Number";
		ed_pmthBill.Type = "Number";
		ed_pmthOthr.Type = "Number"; 
		if ( sContStat == "520" || sContStat == "530" )
		{
			btn_save.Enable = true;
			btn_trans.Enable = true;
			 
			ed_contTamt.Readonly = false;
			ed_pmthCash.Readonly = false;
			ed_pmthBill.Readonly = false;
			ed_pmthOthr.Readonly = false;
			
			ed_post1.Readonly = false;
			ed_partName.Readonly = false;
			ed_csrsAddr.Readonly = false;
			ed_cnts.Readonly = false;
			ed_inspMeth.Readonly = false;
			ed_cmpyAddr.Readonly = false;
			ed_htel.Readonly = false;
			ed_tel.Readonly = false;
			ed_fax.Readonly = false;
			ed_email.Readonly = false;
			ed_cmpyCntt.Readonly = false;
			ed_cmpyCeo.Readonly = false;
	
			cal_contDate.Enable = true;
			cal_contStdt.Enable = true;
			cal_contEddt.Enable = true;
			cb_contType.Enable = true;
			
			grd_pay.Editable = true;
		}
	}
}

/********************************************************************************
* 기      능   : 지급비율계산
********************************************************************************/
function ds_zfst0404_OnColumnChanged(obj,nRow,strColumnID,varOldValue,varNewValue,nPivotIndex)
{
	switch( strColumnID )
	{
	case "PAMT":
		var nContPric = parseFloat( ds_zfst0403.GetColumn(0, "CONT_PRIC") );
		var nPamt = parseFloat( varNewValue );
		ds_zfst0404.SetColumn(0, "PAYT_RATE", iif( nPamt > 0 && nContPric > 0, round( ( nPamt / nContPric * 100 ) , 2 ) , 0 ) );
		break;
	}
}
]]></Script>
</Window>