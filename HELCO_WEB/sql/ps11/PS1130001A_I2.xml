<?xml version="1.0" encoding="euc-kr"?>
<query>
	<type>update</type>
	<description><![CDATA[실측사양값 입력]]></description>
	<reload>true</reload>
	<monitoring>true</monitoring>
	<result-count>0</result-count>
	<statement>
MERGE INTO SAPHEE.ZPST1131 X -- 리모델링실측사양값
USING (SELECT CAST(#G_MANDT# AS VARCHAR(9)) AS MANDT -- 클라이언트
             ,CAST(#SUVPRH# AS VARCHAR(90)) AS SUVPRH -- 실측사양
         FROM SYSIBM.SYSDUMMY1) Y
   ON X.MANDT = Y.MANDT
  AND X.SUVPRH = Y.SUVPRH
 WHEN MATCHED THEN
      UPDATE SET DATADIV=CAST(#DATADIV# AS VARCHAR(15)) ,
		 		 ITEMDIV=CAST(#ITEMDIV# AS VARCHAR(15)),
		 		 SUVPRHNAME=CAST(#SUVPRHNAME# AS VARCHAR(150)),
		 		 INTYPE=CAST(#INTYPE# AS VARCHAR(15)),
		 		 INPUTYSNO=CASE WHEN CAST(#INPUTYSNO# AS VARCHAR(3)) = '0' OR CAST(#INPUTYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
				 NECYSNO= CASE WHEN CAST(#NECYSNO# AS VARCHAR(3)) = '0' OR CAST(#NECYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
				 IFNECYSNO= CASE WHEN CAST(#IFNECYSNO# AS VARCHAR(3)) = '0' OR CAST(#IFNECYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
				 CALYSNO= CASE WHEN CAST(#CALYSNO# AS VARCHAR(3)) = '0' OR CAST(#CALYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
				 MODYYSNO= CASE WHEN CAST(#MODYYSNO# AS VARCHAR(3)) = '0' OR CAST(#MODYYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
				 PRHYSNO= CASE WHEN CAST(#PRHYSNO# AS VARCHAR(3)) = '0' OR CAST(#PRHYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
				 DWYSNO= CASE WHEN CAST(#DWYSNO# AS VARCHAR(3)) = '0' OR CAST(#DWYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
				 VIEWYSNO= CASE WHEN CAST(#VIEWYSNO# AS VARCHAR(3)) = '0' OR CAST(#VIEWYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
				 VIEWORDER=CASE WHEN CAST(#VIEWORDER# AS VARCHAR(5)) = '' THEN CAST(CAST(0 AS VARCHAR(5)) AS SMALLINT) ELSE  CAST(CAST(#VIEWORDER# AS VARCHAR(5)) AS SMALLINT) END,
				 PRH=CASE WHEN CAST(#PRH# AS VARCHAR(90)) = '' THEN ' ' ELSE  CAST(#PRH# AS VARCHAR(90)) END,
				 IFNECST=CASE WHEN CAST(#IFNECST# AS VARCHAR(450)) = '' THEN ' ' ELSE  CAST(#IFNECST# AS VARCHAR(450)) END,
				 IFNECMSG=CASE WHEN CAST(#IFNECMSG# AS VARCHAR(90)) = '' THEN ' ' ELSE  CAST(#IFNECMSG# AS VARCHAR(90)) END ,
                 AEDAT  = HEX(CURRENT DATE), -- 변경일
                 AEZET  = HEX(CURRENT TIME), -- 최종변경시간
                 AENAM  = #G_USER_NAME#     -- 오브젝트 변경자 이름		 		 
 WHEN NOT MATCHED THEN
  INSERT (MANDT, 
		 SUVPRH,
		 DATADIV,
		 ITEMDIV,
		 SUVPRHNAME,
		 INTYPE,
		 INPUTYSNO,
		 NECYSNO,
		 IFNECYSNO,
		 CALYSNO,
		 MODYYSNO,
		 PRHYSNO,
		 DWYSNO,
		 VIEWYSNO,
		 VIEWORDER,
		 PRH,
		 IFNECST,
		 IFNECMSG,
		 ERDAT,
		 ERZET,
		 ERNAM,
		 AEDAT,
		 AEZET,
		 AENAM -- 오브젝트 변경자 이름
		 ) 
  VALUES (
		 #G_MANDT#, 
		 #SUVPRH#,
		 #DATADIV#,
		 #ITEMDIV#,
		 #SUVPRHNAME#,
		 #INTYPE#,
		 CASE WHEN CAST(#INPUTYSNO# AS VARCHAR(3)) = '0' OR CAST(#INPUTYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
		 CASE WHEN CAST(#NECYSNO# AS VARCHAR(3)) = '0' OR CAST(#NECYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
		 CASE WHEN CAST(#IFNECYSNO# AS VARCHAR(3)) = '0' OR CAST(#IFNECYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
		 CASE WHEN CAST(#CALYSNO# AS VARCHAR(3)) = '0' OR CAST(#CALYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
		 CASE WHEN CAST(#MODYYSNO# AS VARCHAR(3)) = '0' OR CAST(#MODYYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
		 CASE WHEN CAST(#PRHYSNO# AS VARCHAR(3)) = '0' OR CAST(#PRHYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
		 CASE WHEN CAST(#DWYSNO# AS VARCHAR(3)) = '0' OR CAST(#DWYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
		 CASE WHEN CAST(#VIEWYSNO# AS VARCHAR(3)) = '0' OR CAST(#VIEWYSNO# AS VARCHAR(3)) = '' THEN 'N' ELSE 'Y' END,
	     CASE WHEN CAST(#VIEWORDER# AS VARCHAR(5)) = '' THEN CAST(CAST(0 AS VARCHAR(5)) AS SMALLINT) ELSE  CAST(CAST(#VIEWORDER# AS VARCHAR(5)) AS SMALLINT) END,
		 CASE WHEN CAST(#PRH# AS VARCHAR(90)) = '' THEN ' ' ELSE  CAST(#PRH# AS VARCHAR(90)) END,
		 CASE WHEN CAST(#IFNECST# AS VARCHAR(450)) = '' THEN ' ' ELSE  CAST(#IFNECST# AS VARCHAR(450)) END,
		 CASE WHEN CAST(#IFNECMSG# AS VARCHAR(90)) = '' THEN ' ' ELSE  CAST(#IFNECMSG# AS VARCHAR(90)) END,
		 HEX(CURRENT DATE),
		 HEX(CURRENT TIME),
		 #G_USER_NAME#,
		 HEX(CURRENT DATE),
		 HEX(CURRENT TIME),
		 #G_USER_NAME#		 	 
		 )
    </statement>
	<input default-name="ds_list">
	</input>
	<output default-name="_none">
	</output>
</query>
