<?xml version="1.0" encoding="euc-kr"?>
<query>
	<type>select</type>
	<description><![CDATA[]]></description>
	<reload>true</reload>
	<monitoring>true</monitoring>
	<result-count>0</result-count>
	<statement>
<![CDATA[
SELECT A.GBN,  A.PSPID, A.POSID, '' AS CHECK,
             A.FNAME, A.FPATH, A.FNAME_APP,
             A.CDATE, A.CNAME, A.FSIZE,

             (CASE WHEN (A.GBN = 'H1' OR A.GBN = 'H2' ) AND B.STEP1_DT > '11110101' THEN 'X'
	          WHEN (A.GBN = 'H3' OR A.GBN = 'H4' ) AND B.STEP2_DT > '11110101' THEN 'X'


	         WHEN (A.GBN = 'N1' OR A.GBN = 'N2' OR A.GBN = 'N3') AND B.STEP1_DT > '11110101' THEN 'X'
		     WHEN (A.GBN = 'N4' OR A.GBN = 'N5' ) AND B.STEP2_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'N6' OR A.GBN = 'N7' ) AND B.STEP3_DT > '11110101' THEN 'X'

	         WHEN (A.GBN = 'O1' OR A.GBN = 'O2' OR A.GBN = 'O3') AND B.STEP1_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'O4') AND B.STEP2_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'O5' OR A.GBN = 'O6' ) AND B.STEP3_DT > '11110101' THEN 'X'

  	         WHEN (A.GBN = 'P1' OR A.GBN = 'P2' OR A.GBN = 'P3') AND B.STEP1_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'P4' OR A.GBN = 'P5' OR A.GBN = 'P6' ) AND B.STEP2_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'N7' ) AND B.STEP3_DT > '11110101' THEN 'X'


			 WHEN (A.GBN = 'Q1' OR A.GBN = 'Q2') AND B.STEP1_DT > '11110101' THEN 'X'
		     WHEN (A.GBN = 'Q3' OR A.GBN = 'Q4' ) AND B.STEP2_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'Q5' OR A.GBN = 'Q6' ) AND B.STEP3_DT > '11110101' THEN 'X'

			 WHEN (A.GBN = 'R1' OR A.GBN = 'R2') AND B.STEP1_DT > '11110101' THEN 'X'
		     WHEN (A.GBN = 'R3' OR A.GBN = 'R4' ) AND B.STEP2_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'R5' OR A.GBN = 'R6' ) AND B.STEP3_DT > '11110101' THEN 'X'

			 WHEN (A.GBN = 'S1' OR A.GBN = 'S2') AND B.STEP1_DT > '11110101' THEN 'X'
		     WHEN (A.GBN = 'S3' OR A.GBN = 'S4' ) AND B.STEP2_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'S5' OR A.GBN = 'S6' ) AND B.STEP3_DT > '11110101' THEN 'X'

		     WHEN (A.GBN = 'T1' OR A.GBN = 'T2') AND B.STEP1_DT > '11110101' THEN 'X'
		     WHEN (A.GBN = 'T3' OR A.GBN = 'T4' ) AND B.STEP2_DT > '11110101' THEN 'X'
	         WHEN (A.GBN = 'T5') AND B.STEP3_DT > '11110101' THEN 'X'

                       ELSE ''
	END) AS DEL,

	(SELECT USERNAME FROM SAPHEE.ZUSERF WHERE MANDT = #G_MANDT# AND USERNUMB = A.CNAME) AS CNAME2,

	C.ZZGUBUN,
	C.POSID_DONG,
	C.TYPE,
	D.GNO,
	D.GNO_STEP,

	X3.PRONR,
	X4.PROWRK,
	X4.PRO_R,
	C.VER,
	CASE WHEN D.GNO_STEP = '1'
         THEN B.DEVICE_GBN1
         WHEN D.GNO_STEP = '2'
         THEN B.DEVICE_GBN2
         WHEN D.GNO_STEP = '3'
         THEN B.DEVICE_GBN3
         ELSE ''
         END AS DEVICE_GBN

   FROM SAPHEE.ZCMFL002 AS A

    LEFT OUTER JOIN SAPHEE.ZPSTW1502 AS B
       ON A.MANDT = B.MANDT
     AND A.PSPID = B.PSPID
     AND A.POSID = B.POSID

	LEFT OUTER JOIN SAPHEE.ZMASTER02 C ON (A.MANDT = C.MANDT AND A.PSPID = C.POSID AND A.POSID = C.POSID_1)

    LEFT OUTER JOIN SAPHEE.ZPST0111M AS P
    ON P.MANDT = C.MANDT
    AND P.GUBUN = C.ZZGUBUN
    AND P.TYPE  = C.TYPE
    AND P.VER   = C.VER


    LEFT OUTER JOIN SAPHEE.ZPST1106 AS D
    ON P.MANDT = D.MANDT
    AND P.STEP3_GBN =  D.TYPE
    AND D.GBN =  #GBN#

    LEFT OUTER JOIN SAPHEE.ZPST0111T X3
    ON C.MANDT = X3.MANDT
    AND P.GUBUN = X3.GUBUN
    AND P.TYPE  = X3.TYPE
    AND P.VER   = X3.VER
    AND D.GNO   = X3.GNO

	LEFT OUTER JOIN SAPHEE.ZPST0111 X4 ON (X3.MANDT = X4.MANDT AND X3.GUBUN = X4.GUBUN AND X3.VER = X4.VER AND X3.PRONR = X4.PRONR AND X3.TYPE = X4.TYPE)

 WHERE A.MANDT = #G_MANDT#
     AND A.GBN =  #GBN#
     AND A.PSPID = #PSPID#
     AND A.POSID = #POSID#
 ORDER BY A.PSPID, A.POSID

FOR FETCH ONLY WITH UR	]]></statement>
	<input default-name="ds_cond">
	</input>
	<output default-name="ds_list">
	</output>
</query>
